!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=33)}([function(t,e,n){t.exports={forEach:n(36),isNumber:n(45),isObject:n(1),isString:n(8),isArray:n(5),isFunction:n(15),isEmpty:n(46),keys:n(9),assign:n(47),forIn:n(52),omit:n(54),cloneDeep:n(68),noop:n(75)}},function(t,e){t.exports=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}},function(t,e,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,n(7))},function(t,e){t.exports={disposable:function(t){var e=!1;return function(){e||(e=!0,t())}},invariant:function(t,e){if(!t)throw new Error(e)},fetchWithTimeout:function(t,e,n){if(window.AbortController){var r=new window.AbortController,o=window.fetch(t,Object.assign({},n,{signal:r.signal})),i=setTimeout((function(){r.abort()}),e);return o.finally((function(){clearTimeout(i)}))}return function(t,e,n){var r=new Promise((function(e,r){setTimeout((function(){r(new Error(n||"Operation Timeout"))}),t)}));return Promise.race([r,e])}(e,window.fetch(t,n),"Request Timeout")},camelCase:function(t){if(t)return t.toLowerCase().split(" ").reduce((function(t,e,n){return t+=0===n?e:function(t){var e=t[0];return e<"\ud800"||e>"\udfff"?t[0].toUpperCase()+t.slice(1):t.slice(0,2).toUpperCase()+t.slice(2)}(e)}),"")},isLocalStorageAccessible:function(){try{return localStorage.setItem("__td__","__td__"),localStorage.removeItem("__td__"),!0}catch(t){return!1}},adlHeaders:{"Content-Type":"application/vnd.treasuredata.v1+json",Accept:"application/vnd.treasuredata.v1+json"},globalIdAdlHeaders:{"Content-Type":"application/vnd.treasuredata.v1.js+json",Accept:"application/vnd.treasuredata.v1.js+json"}}},function(t,e){t.exports=function(t){return!!t&&"object"==typeof t}},function(t,e,n){var r=n(14),o=n(11),i=n(4),s=Object.prototype.toString,a=r(Array,"isArray")||function(t){return i(t)&&o(t.length)&&"[object Array]"==s.call(t)};t.exports=a},function(t,e){var n=function(t){try{return encodeURIComponent(t)}catch(t){console.error("error encode %o")}return null},r=function(t){try{return decodeURIComponent(t)}catch(t){console.error("error decode %o")}return null},o={getItem:function(t){return t&&r(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+function(t){return n(t).replace(/[\-\.\+\*]/g,"\\$&")}(t)+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(t,e,r,o,i,s,a){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var c="";if(r)switch(r.constructor){case Number:c=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:c="; expires="+r;break;case Date:c="; expires="+r.toUTCString()}var u="";return a&&"NONE"===a.toUpperCase()?u="; Secure; SameSite="+a:(s&&(u+="; Secure"),a&&(u+="; SameSite="+a)),document.cookie=[n(t),"=",n(e),c,i?"; domain="+i:"",o?"; path="+o:"",u].join(""),!0},removeItem:function(t,e,r){return!!this.hasItem(t)&&(document.cookie=[n(t),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT",r?"; domain="+r:"",e?"; path="+e:""].join(""),!0)},hasItem:function(t){return!!t&&new RegExp("(?:^|;\\s*)"+n(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){var t=document.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:=[^;]*)?;\s*/);return t=t.map((function(t){return r(t)}))}};t.exports=o},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(4),o=Object.prototype.toString;t.exports=function(t){return"string"==typeof t||r(t)&&"[object String]"==o.call(t)}},function(t,e,n){var r=n(14),o=n(10),i=n(1),s=n(41),a=n(22),c=r(Object,"keys"),u=c?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||("function"==typeof t?a.enumPrototypes:o(t))?s(t):i(t)?c(t):[]}:s;t.exports=u},function(t,e,n){var r=n(27),o=n(11);t.exports=function(t){return null!=t&&o(r(t))}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){var r=n(44);t.exports=function(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,s){return t.call(e,n,r,o,i,s)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(1),o=n(8),i=n(22);t.exports=function(t){if(i.unindexedChars&&o(t)){for(var e=-1,n=t.length,s=Object(t);++e<n;)s[e]=t.charAt(e);return s}return r(t)?t:Object(t)}},function(t,e,n){var r=n(39);t.exports=function(t,e){var n=null==t?void 0:t[e];return r(n)?n:void 0}},function(t,e,n){var r=n(1),o=Object.prototype.toString;t.exports=function(t){return r(t)&&"[object Function]"==o.call(t)}},function(t,e,n){var r=n(10),o=n(4),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable;t.exports=function(t){return o(t)&&r(t)&&s.call(t,"callee")&&!a.call(t,"callee")}},function(t,e,n){var r=n(20),o=n(16),i=n(5),s=n(15),a=n(23),c=n(11),u=n(1),f=n(8),l=n(22),d=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],p=Error.prototype,h=Object.prototype,v=String.prototype,g=h.hasOwnProperty,m=h.toString,y={};y["[object Array]"]=y["[object Date]"]=y["[object Number]"]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},y["[object Boolean]"]=y["[object String]"]={constructor:!0,toString:!0,valueOf:!0},y["[object Error]"]=y["[object Function]"]=y["[object RegExp]"]={constructor:!0,toString:!0},y["[object Object]"]={constructor:!0},r(d,(function(t){for(var e in y)if(g.call(y,e)){var n=y[e];n[t]=g.call(n,t)}})),t.exports=function(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&c(e)&&(i(t)||o(t)||f(t))&&e||0;for(var n=t.constructor,r=-1,b=s(n)&&n.prototype||h,_=b===t,x=Array(e),w=e>0,S=l.enumErrorProps&&(t===p||t instanceof Error),j=l.enumPrototypes&&s(t);++r<e;)x[r]=r+"";for(var E in t)j&&"prototype"==E||S&&("message"==E||"name"==E)||w&&a(E,e)||"constructor"==E&&(_||!g.call(t,E))||x.push(E);if(l.nonEnumShadows&&t!==h){var A=t===v?"[object String]":t===p?"[object Error]":m.call(t),O=y[A]||y["[object Object]"];for("[object Object]"==A&&(b=h),e=d.length;e--;){var M=O[E=d[e]];_&&M||!(M?g.call(t,E):t[E]!==b[E])||x.push(E)}}return x}},function(t,e,n){var r=n(2),o=n(0).assign,i={"Content-Type":"application/json","X-TD-Fetch-Api":"true"},s={"same-origin":"same-origin",include:"include",omit:"omit"},a=s.include;function c(t,e){return t=t||{},e?o({},t):o({},i,t)}function u(){return"fetch"in r}function f(t){return(t=t||{}).ignoreDefaultHeaders||!1}function l(t){return s[(t=t||{}).credentials]||a}function d(t,e,n){var r=(n=n||{}).headers||{};return fetch(t,{method:"POST",headers:c(r,f(n)),credentials:l(n),body:JSON.stringify(e)}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.text()})).then((function(t){return t?JSON.parse(t):{}}))}function p(t,e,n){t.onload=function(){var r;(r=t.status)>=200&&r<300||304===r?e(function(t){var e;try{e=JSON.parse(t)}catch(t){e={}}return e}(t.responseText)):n(new Error("Internal XMLHttpRequest error"))},t.onerror=n}function h(t,e,n){var r,o=(n=n||{}).headers||{},i=new XMLHttpRequest;for(r in i.open(t,e),i.withCredentials=Boolean(l(n)),o=c(n.headers,f(n)))o.hasOwnProperty(r)&&i.setRequestHeader(r,o[r]);return i}t.exports={post:function(t,e,n){return u()?d(t,e,n):new Promise((function(r,o){var i=h("POST",t,n);p(i,r,o),i.send(JSON.stringify(e))}))},get:function(t,e){if(e=e||{},u())return function(t,e){var n=(e=e||{}).headers||{},r=e.method||"GET";return fetch(t,{method:r,headers:c(n,f(e)),credentials:l(e)}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.text()})).then((function(t){return t?JSON.parse(t):{}}))}(t,e);var n=e.method||"GET";return new Promise((function(r,o){var i=h(n,t,e);p(i,r,o),i.send(null)}))},postWithTimeout:function(t,e,n,r){if(window.AbortController){var o=new window.AbortController,i=c(r.headers,f(r));r.headers=i;var s=window.fetch(t,Object.assign({},r,{signal:o.signal},{body:JSON.stringify(e)})),a=setTimeout((function(){o.abort()}),n);return s.finally((function(){clearTimeout(a)}))}return function(t,e,n){var r=new Promise((function(e,r){setTimeout((function(){r(new Error(n||"Operation Timeout"))}),t)}));return Promise.race([r,e])}(n,d(t,e,r),"Request Timeout")}}},function(t,e){t.exports={GLOBAL:"Treasure",VERSION:"3.1.3",HOST:"in.treasuredata.com",DATABASE:"",PATHNAME:"/js/v3/event/"}},function(t,e){t.exports=function(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(38)();t.exports=r},function(t,e){var n=Array.prototype,r=Error.prototype,o=Object.prototype.propertyIsEnumerable,i=n.splice,s={};!function(t){var e=function(){this.x=1},n={0:1,length:1},a=[];for(var c in e.prototype={valueOf:1,y:1},new e)a.push(c);s.enumErrorProps=o.call(r,"message")||o.call(r,"name"),s.enumPrototypes=o.call(e,"prototype"),s.nonEnumShadows=!/valueOf/.test(a),s.ownLast="x"!=a[0],s.spliceObjects=(i.call(n,0,1),!n[0]),s.unindexedChars="x"[0]+Object("x")[0]!="xx"}(),t.exports=s},function(t,e){var n=/^\d+$/;t.exports=function(t,e){return e=null==e?9007199254740991:e,(t="number"==typeof t||n.test(t)?+t:-1)>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(6),o=n(0);t.exports=function(t,e,n){var i=o.assign({},t),s=t.domain.match(/\d*\.\d*\.\d*\.\d*$/),a="localhost"===t.domain,c=t.customDomain,u=new Date;if(u.setSeconds(u.getSeconds()+i.expires),a)n?r.setItem(e,n,u,i.path):r.removeItem(e,i.path,i.domain);else if(s||c)n?r.setItem(e,n,u,i.path,i.domain,!0,"None"):r.removeItem(e,i.path,i.domain);else{var f=function(t){for(var e=t.split("."),n=[],r=e.length-1;r>=0;r--)n.push(e.slice(r).join("."));return n}(t.domain),l=f.length,d=0;if(n){if(r.getItem(e)===n)return;for(;d<l;d++)if(i.domain=f[d],r.setItem(e,n,u,i.path,i.domain,!0,"None"),r.getItem(e)===n){t.domain=i.domain;break}}else for(;d<l;d++)r.removeItem(e,t.path,f[d])}}},function(t,e,n){var r=n(21),o=n(9);t.exports=function(t,e){return r(t,e,o)}},function(t,e){var n=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();t.exports=n},function(t,e,n){var r=n(40)("length");t.exports=r},function(t,e,n){var r=n(49),o=n(9);t.exports=function(t,e){return null==e?t:r(e,o(e),t)}},function(t,e){var n=Math.max;t.exports=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=n(void 0===e?t.length-1:+e||0,0),function(){for(var r=arguments,o=-1,i=n(r.length-e,0),s=Array(i);++o<i;)s[o]=r[e+o];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,r[0],s);case 2:return t.call(this,r[0],r[1],s)}var a=Array(e+1);for(o=-1;++o<e;)a[o]=r[o];return a[e]=s,t.apply(this,a)}}},function(t,e,n){t.exports=n(19).VERSION},function(t,e,n){var r=n(2);t.exports=function(){var t=(new Date).getTime();return r.performance&&"function"==typeof r.performance.now&&(t+=r.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(34),o=n(2),i=n(19).GLOBAL;n(97)(r,i),o[i]=r},function(t,e,n){var r=n(35),o=n(0),i=n(76),s=n(30),a=n(6),c=n(19);function u(t){return this instanceof u?(this.init(t),this):new u(t)}u.prototype.init=function(t){for(var e in this.configure(t),u.Plugins)u.Plugins.hasOwnProperty(e)&&u.Plugins[e].configure.call(this,t);if(window.addEventListener){var n=this;window.addEventListener("pagehide",(function(){n._windowBeingUnloaded=!0}))}},u.version=u.prototype.version=s,u.prototype.log=function(){for(var t=["["+c.GLOBAL+"]"],e=0,n=arguments.length-1;e<=n;e++)t.push(arguments[e]);"undefined"!=typeof console&&this.client.logging&&console.log.apply(console,t)},u.prototype.configure=i.configure,u.prototype.set=i.set,u.prototype.get=i.get,u.prototype.isGlobalIdEnabled=i.isGlobalIdEnabled,u.prototype.ready=n(77),u.prototype.applyProperties=r.applyProperties,u.prototype.addRecord=r.addRecord,u.prototype.addConsentRecord=r.addConsentRecord,u.prototype._sendRecord=r._sendRecord,u.prototype.blockEvents=r.blockEvents,u.prototype.unblockEvents=r.unblockEvents,u.prototype.areEventsBlocked=r.areEventsBlocked,u.prototype.setSignedMode=r.setSignedMode,u.prototype.setAnonymousMode=r.setAnonymousMode,u.prototype.inSignedMode=r.inSignedMode,u.prototype.getCookie=a.getItem,u.prototype._configurator=i,u.Plugins={Clicks:n(78),GlobalID:n(80),Personalization:n(81),Track:n(82),ServerSideCookie:n(83),ConsentManager:n(84)},o.forIn(u.Plugins,(function(t){o.forIn(t,(function(t,e){u.prototype[e]||(u.prototype[e]=t)}))})),t.exports=u},function(t,e,n){var r=n(3),o=n(0),i=n(2),s=n(6),a=n(24),c=n(18),u=o.noop,f=r.invariant;function l(t,e){f(o.isString(t),"Must provide a table"),f(/^[a-z0-9_]{3,255}$/.test(t),"Table must be between 3 and 255 characters and must consist only of lower case letters, numbers, and _"),f(o.isObject(e),"Must provide a record")}e.BLOCKEVENTSCOOKIE="__td_blockEvents",e.SIGNEDMODECOOKIE="__td_signed",e.blockEvents=function(){a(this.client.storage,"__td_blockEvents","true")},e.unblockEvents=function(){a(this.client.storage,"__td_blockEvents","false")},e.areEventsBlocked=function(){return"true"===s.getItem("__td_blockEvents")},e.setSignedMode=function(){if(this.client.storeConsentByLocalStorage){if(!r.isLocalStorageAccessible())return this;i.localStorage.setItem("__td_signed","true")}else a(this.client.storage,"__td_signed","true");return this.resetUUID(this.client.storage,this.client.track.uuid),this},e.setAnonymousMode=function(t){if(this.client.storeConsentByLocalStorage){if(!r.isLocalStorageAccessible())return this;i.localStorage.setItem("__td_signed","false")}else a(this.client.storage,"__td_signed","false");return t||(a(this.client.storage,this.client.storage.name),this.removeCachedGlobalID(),this.removeServerCookie()),this},e.inSignedMode=function(){return this.client.storeConsentByLocalStorage?!!r.isLocalStorageAccessible()&&("false"!==i.localStorage.getItem(["__td_signed"])&&("true"===i.localStorage.getItem(["__td_signed"])||this.client.startInSignedMode)):"false"!==s.getItem("__td_signed")&&("true"===s.getItem("__td_signed")||this.client.startInSignedMode)},e._sendRecord=function(t,e,n,o){if(e=e||u,n=n||u,!o){var i=["modified="+encodeURIComponent((new Date).getTime())];t.time&&i.push("time="+encodeURIComponent(t.time));var s,a=t.url+"?"+i.join("&"),f="a"===t.record.tag&&!!t.record.href,l={},d=!1;this.client.useNewJavaScriptEndpoint?(l.Authorization="TD1 "+t.apikey,l["User-Agent"]=navigator.userAgent,this.inSignedMode()&&this.isGlobalIdEnabled()?(l["Content-Type"]=r.globalIdAdlHeaders["Content-Type"],l.Accept=r.globalIdAdlHeaders.Accept):(l["Content-Type"]=r.adlHeaders["Content-Type"],l.Accept=r.adlHeaders.Accept),d=!0,s={events:[t.record]}):(l["X-TD-Write-Key"]=t.apikey,s=t.record),window.fetch&&(this._windowBeingUnloaded||f)?c.postWithTimeout(a,s,this.client.jsonpTimeout,{method:"POST",keepalive:!0,credentials:"include",ignoreDefaultHeaders:d,headers:l}).then(e).catch(n):c.post(a,s,{ignoreDefaultHeaders:d,headers:l}).then(e).catch(n)}},e.applyProperties=function(t,e){return o.assign({},this.get("$global"),this.get(t),e)},e.addRecord=function(t,e,n,r){l(t,e);var i=this.applyProperties(t,e),s=this.inSignedMode()?i:o.omit(i,["td_ip","td_client_id","td_global_id"]),a={apikey:this.client.writeKey,record:s,time:null,type:this.client.requestType,url:this.client.endpoint+this.client.database+"/"+t};a.record.time&&(a.time=a.record.time),this.client.development?this.log("addRecord",a):this.areEventsBlocked()||this._sendRecord(a,n,r,this.areEventsBlocked())},e.addConsentRecord=function(t,e,n,r){l(t,e);var o={apikey:this.client.writeKey,record:e,time:null,type:this.client.requestType,url:this.client.endpoint+this.client.database+"/"+t};o.record.time&&(o.time=o.record.time),this.client.development?this.log("addConsentRecord",o):this._sendRecord(o,n,r,!1)},e._validateRecord=l},function(t,e,n){var r=n(20),o=n(37),i=n(43)(r,o);t.exports=i},function(t,e,n){var r=n(25),o=n(42)(r);t.exports=o},function(t,e,n){var r=n(13);t.exports=function(t){return function(e,n,o){for(var i=r(e),s=o(e),a=s.length,c=t?a:-1;t?c--:++c<a;){var u=s[c];if(!1===n(i[u],u,i))break}return e}}},function(t,e,n){var r=n(15),o=n(26),i=n(4),s=/^\[object .+?Constructor\]$/,a=Object.prototype,c=Function.prototype.toString,u=a.hasOwnProperty,f=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return null!=t&&(r(t)?f.test(c.call(t)):i(t)&&(o(t)?f:s).test(t))}},function(t,e,n){var r=n(13);t.exports=function(t){return function(e){return null==e?void 0:r(e)[t]}}},function(t,e,n){var r=n(16),o=n(5),i=n(23),s=n(11),a=n(8),c=n(17),u=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=c(t),n=e.length,f=n&&t.length,l=!!f&&s(f)&&(o(t)||r(t)||a(t)),d=-1,p=[];++d<n;){var h=e[d];(l&&i(h,f)||u.call(t,h))&&p.push(h)}return p}},function(t,e,n){var r=n(27),o=n(11),i=n(13);t.exports=function(t,e){return function(n,s){var a=n?r(n):0;if(!o(a))return t(n,s);for(var c=e?a:-1,u=i(n);(e?c--:++c<a)&&!1!==s(u[c],c,u););return n}}},function(t,e,n){var r=n(12),o=n(5);t.exports=function(t,e){return function(n,i,s){return"function"==typeof i&&void 0===s&&o(n)?t(n,i):e(n,r(i,s,3))}}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(4),o=Object.prototype.toString;t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==o.call(t)}},function(t,e,n){var r=n(16),o=n(5),i=n(10),s=n(15),a=n(4),c=n(8),u=n(9);t.exports=function(t){return null==t||(i(t)&&(o(t)||c(t)||r(t)||a(t)&&s(t.splice))?!t.length:!u(t).length)}},function(t,e,n){var r=n(48),o=n(28),i=n(50)((function(t,e,n){return n?r(t,e,n):o(t,e)}));t.exports=i},function(t,e,n){var r=n(9);t.exports=function(t,e,n){for(var o=-1,i=r(e),s=i.length;++o<s;){var a=i[o],c=t[a],u=n(c,e[a],a,t,e);((u==u?u!==c:c==c)||void 0===c&&!(a in t))&&(t[a]=u)}return t}},function(t,e){t.exports=function(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}},function(t,e,n){var r=n(12),o=n(51),i=n(29);t.exports=function(t){return i((function(e,n){var i=-1,s=null==e?0:n.length,a=s>2?n[s-2]:void 0,c=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=r(a,u,5),s-=2):s-=(a="function"==typeof u?u:void 0)?1:0,c&&o(n[0],n[1],c)&&(a=s<3?void 0:a,s=1);++i<s;){var f=n[i];f&&t(e,f,a)}return e}))}},function(t,e,n){var r=n(10),o=n(23),i=n(1);t.exports=function(t,e,n){if(!i(n))return!1;var s=typeof e;if("number"==s?r(n)&&o(e,n.length):"string"==s&&e in n){var a=n[e];return t==t?t===a:a!=a}return!1}},function(t,e,n){var r=n(21),o=n(53)(r);t.exports=o},function(t,e,n){var r=n(12),o=n(17);t.exports=function(t){return function(e,n,i){return"function"==typeof n&&void 0===i||(n=r(n,i,3)),t(e,n,o)}}},function(t,e,n){var r=n(55),o=n(56),i=n(63),s=n(12),a=n(17),c=n(65),u=n(66),f=n(29)((function(t,e){if(null==t)return{};if("function"!=typeof e[0]){e=r(i(e),String);return c(t,o(a(t),e))}var n=s(e[0],e[1],3);return u(t,(function(t,e,r){return!n(t,e,r)}))}));t.exports=f},function(t,e){t.exports=function(t,e){for(var n=-1,r=t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(57),o=n(59),i=n(60);t.exports=function(t,e){var n=t?t.length:0,s=[];if(!n)return s;var a=-1,c=r,u=!0,f=u&&e.length>=200?i(e):null,l=e.length;f&&(c=o,u=!1,e=f);t:for(;++a<n;){var d=t[a];if(u&&d==d){for(var p=l;p--;)if(e[p]===d)continue t;s.push(d)}else c(e,d,0)<0&&s.push(d)}return s}},function(t,e,n){var r=n(58);t.exports=function(t,e,n){if(e!=e)return r(t,n);for(var o=n-1,i=t.length;++o<i;)if(t[o]===e)return o;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=t.length,o=e+(n?0:-1);n?o--:++o<r;){var i=t[o];if(i!=i)return o}return-1}},function(t,e,n){var r=n(1);t.exports=function(t,e){var n=t.data;return("string"==typeof e||r(e)?n.set.has(e):n.hash[e])?0:-1}},function(t,e,n){(function(e){var r=n(61),o=n(14),i=o(e,"Set"),s=o(Object,"create");t.exports=function(t){return s&&i?new r(t):null}}).call(this,n(7))},function(t,e,n){(function(e){var r=n(62),o=n(14),i=o(e,"Set"),s=o(Object,"create");function a(t){var e=t?t.length:0;for(this.data={hash:s(null),set:new i};e--;)this.push(t[e])}a.prototype.push=r,t.exports=a}).call(this,n(7))},function(t,e,n){var r=n(1);t.exports=function(t){var e=this.data;"string"==typeof t||r(t)?e.set.add(t):e.hash[t]=!0}},function(t,e,n){var r=n(64),o=n(16),i=n(5),s=n(10),a=n(4);t.exports=function t(e,n,c,u){u||(u=[]);for(var f=-1,l=e.length;++f<l;){var d=e[f];a(d)&&s(d)&&(c||i(d)||o(d))?n?t(d,n,c,u):r(u,d):c||(u[u.length]=d)}return u}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(13);t.exports=function(t,e){t=r(t);for(var n=-1,o=e.length,i={};++n<o;){var s=e[n];s in t&&(i[s]=t[s])}return i}},function(t,e,n){var r=n(67);t.exports=function(t,e){var n={};return r(t,(function(t,r,o){e(t,r,o)&&(n[r]=t)})),n}},function(t,e,n){var r=n(21),o=n(17);t.exports=function(t,e){return r(t,e,o)}},function(t,e,n){var r=n(69),o=n(12);t.exports=function(t,e,n){return"function"==typeof e?r(t,!0,o(e,n,3)):r(t,!0)}},function(t,e,n){var r=n(70),o=n(20),i=n(28),s=n(25),a=n(71),c=n(72),u=n(74),f=n(5),l=n(26),d=n(1),p={};p["[object Arguments]"]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object Date]"]=p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Number]"]=p["[object Object]"]=p["[object RegExp]"]=p["[object String]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p["[object Error]"]=p["[object Function]"]=p["[object Map]"]=p["[object Set]"]=p["[object WeakMap]"]=!1;var h=Object.prototype.toString;t.exports=function t(e,n,v,g,m,y,b){var _;if(v&&(_=m?v(e,g,m):v(e)),void 0!==_)return _;if(!d(e))return e;var x=f(e);if(x){if(_=a(e),!n)return r(e,_)}else{var w=h.call(e),S="[object Function]"==w;if("[object Object]"!=w&&"[object Arguments]"!=w&&(!S||m))return p[w]?c(e,w,n):m?e:{};if(l(e))return m?e:{};if(_=u(S?{}:e),!n)return i(_,e)}y||(y=[]),b||(b=[]);for(var j=y.length;j--;)if(y[j]==e)return b[j];return y.push(e),b.push(_),(x?o:s)(e,(function(r,o){_[o]=t(r,n,v,o,e,y,b)})),_}},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){(function(e){var r=n(73),o=/\w*$/,i=e.Uint8Array,s={};s["[object Float32Array]"]=e.Float32Array,s["[object Float64Array]"]=e.Float64Array,s["[object Int8Array]"]=e.Int8Array,s["[object Int16Array]"]=e.Int16Array,s["[object Int32Array]"]=e.Int32Array,s["[object Uint8Array]"]=i,s["[object Uint8ClampedArray]"]=e.Uint8ClampedArray,s["[object Uint16Array]"]=e.Uint16Array,s["[object Uint32Array]"]=e.Uint32Array,t.exports=function(t,e,n){var i=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":i instanceof i&&(i=s[e]);var a=t.buffer;return new i(n?r(a):a,t.byteOffset,t.length);case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":var c=new i(t.source,o.exec(t));c.lastIndex=t.lastIndex}return c}}).call(this,n(7))},function(t,e,n){(function(e){var n=e.ArrayBuffer,r=e.Uint8Array;t.exports=function(t){var e=new n(t.byteLength);return new r(e).set(new r(t)),e}}).call(this,n(7))},function(t,e){t.exports=function(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(0),o=n(3).invariant,i=n(19),s=n(6);e.DEFAULT_CONFIG={database:i.DATABASE,development:!1,useNewJavaScriptEndpoint:!1,globalIdCookie:"_td_global",host:i.HOST,logging:!0,pathname:i.PATHNAME,requestType:"fetch",jsonpTimeout:1e4,startInSignedMode:!1,useServerSideCookie:!1,sscDomain:function(){for(var t=document.location.hostname.split("."),e=t.length-2;e>=1;e--){var n=t.slice(e).join("."),r="_td_domain_"+n;if(s.setItem(r,n,3600,"/",n),s.getItem(r)===n)return n}return document.location.hostname},sscServer:function(t){return["ssc",t].join(".")},storeConsentByLocalStorage:!1},e.configure=function(t){return this.client=r.assign({globals:{}},e.DEFAULT_CONFIG,t,{requestType:"fetch"}),function(t){o(r.isObject(t),"Check out our JavaScript SDK Usage Guide: https://github.com/treasure-data/td-js-sdk#api"),o(r.isString(t.writeKey),"Must provide a writeKey"),o(r.isString(t.database),"Must provide a database"),o(/^[a-z0-9_]{3,255}$/.test(t.database),"Database must be between 3 and 255 characters and must consist only of lower case letters, numbers, and _")}(this.client),this.client.useNewJavaScriptEndpoint&&(this.client.pathname="/"),this.client.endpoint||(this.client.endpoint="https://"+this.client.host+this.client.pathname),this},e.set=function(t,e,n){return r.isObject(t)&&(e=t,t="$global"),this.client.globals[t]=this.client.globals[t]||{},r.isObject(e)?r.assign(this.client.globals[t],e):this.client.globals[t][e]=n,this},e.get=function(t,e){return t=t||"$global",this.client.globals[t]=this.client.globals[t]||{},e?this.client.globals[t][e]:this.client.globals[t]},e.isGlobalIdEnabled=function(){return"td_global_id"===this.get(null,"td_global_id")}},function(t,e,n){
/*!
  * domready (c) Dustin Diaz 2012 - License MIT
  */
t.exports=function(t){var e,n=[],r=document,o=r.documentElement,i=o.doScroll,s=(i?/^loaded|^c/:/^loaded|c/).test(r.readyState);function a(t){for(s=1;t=n.shift();)t()}return r.addEventListener&&r.addEventListener("DOMContentLoaded",e=function(){r.removeEventListener("DOMContentLoaded",e,!1),a()},!1),i&&r.attachEvent("onreadystatechange",e=function(){/^c/.test(r.readyState)&&(r.detachEvent("onreadystatechange",e),a())}),t=i?function(e){self!=top?s?e():n.push(e):function(){try{o.doScroll("left")}catch(n){return setTimeout((function(){t(e)}),50)}e()}()}:function(t){s?t():n.push(t)}}()},function(t,e,n){var r=n(2),o=n(79),i=n(0).assign,s=n(3).disposable;function a(t,e){return e}t.exports={configure:function(){this._clickTrackingInstalled=!1},trackClicks:function(t){if(!this._clickTrackingInstalled){var e=this,n=i({element:r.document,extendClickData:a,ignoreAttribute:"td-ignore",tableName:"clicks"},t),c=o.createTreeHasIgnoreAttribute(n.ignoreAttribute),u=o.addEventListener(n.element,"click",(function(t){var r=o.findElement(o.getEventTarget(t));if(r&&!c(r)){var i=o.getElementData(r),s=n.extendClickData(t,i);s&&e.trackEvent(n.tableName,s)}}));return e._clickTrackingInstalled=!0,s((function(){u(),e._clickTrackingInstalled=!1}))}}}},function(t,e,n){var r=n(0).forEach,o=n(0).isString,i=n(3).disposable;function s(t){for(var e,n=[],r=0,o=0,i=" > ".length;t&&r++<5&&!("html"===(e=a(t))||r>1&&o+n.length*i+e.length>=80);)n.push(e),o+=e.length,t=t.parentNode;return n.reverse().join(" > ")}function a(t){var e,n,r,i,s,a=[];if(!t||!t.tagName)return"";if(a.push(t.tagName.toLowerCase()),t.id&&a.push("#"+t.id),(e=t.className)&&o(e))for(n=e.split(" "),s=0;s<n.length;s++)a.push("."+n[s]);var c=["type","name","title","alt"];for(s=0;s<c.length;s++)r=c[s],(i=t.getAttribute(r))&&a.push("["+r+'="'+i+'"]');return a.join("")}function c(t,e){return"function"==typeof t.hasAttribute?t.hasAttribute(e):null!==t.getAttribute(e)}t.exports={addEventListener:function(t,e,n){if(t.addEventListener)return t.addEventListener(e,r,!1),i((function(){t.removeEventListener(e,r,!1)}));if(t.attachEvent)return t.attachEvent("on"+e,r),i((function(){t.detachEvent("on"+e,r)}));throw new Error("addEventListener");function r(e){n.call(t,e||window.event)}},createTreeHasIgnoreAttribute:function(t){var e="data-"+t;return function n(r){return!(!r||!r.tagName||"html"===r.tagName.toLowerCase())&&(!(!c(r,t)&&!c(r,e))||n(r.parentNode))}},getElementData:function(t){var e={tag:t.tagName.toLowerCase(),tree:s(t)};return r(["alt","class","href","id","name","role","title","type"],(function(n){c(t,n)&&(e[n]=t.getAttribute(n))})),e},getEventTarget:function(t){var e=t.target||t.srcElement||window.document;return 3===e.nodeType?e.parentNode:e},hasAttribute:c,htmlElementAsString:a,htmlTreeAsString:s,findElement:function(t){if(!t||!t.tagName)return null;for(var e=t.tagName.toLowerCase();e&&"body"!==e;e=(t=t.parentNode)&&t.tagName&&t.tagName.toLowerCase()){var n=t.getAttribute("type");if("input"===e&&"password"===n)return null;var r=t.getAttribute("role");if("button"===r||"link"===r||"a"===e||"button"===e||"input"===e)return t}return null}}},function(t,e,n){var r=n(0).noop,o=n(3),i=n(6),s=n(18);function a(t,e,n){if(n=n||{},!t.global_id)return null;var r=n.path,o=n.domain,s=n.secure,a=n.maxAge||6e3,c=n.sameSite;return i.setItem(e,t.global_id,a,r,o,s,c),t.global_id}t.exports={cacheSuccess:a,configure:function(){return this},fetchGlobalID:function(t,e,n,c){if(c=c||{},t=t||r,e=e||r,!this.inSignedMode())return e("not in signed in mode");if(!this.isGlobalIdEnabled())return e("global id is not enabled");var u=this.client.globalIdCookie,f=i.getItem(u);if(f&&!n)return setTimeout((function(){t(f)}),0);c.sameSite||(c.sameSite="None");var l="https://"+this.client.host+"/js/v3/enable_global_id",d={},p=!1;this.client.useNewJavaScriptEndpoint&&(l="https://"+this.client.host,d.Authorization="TD1 "+this.client.writeKey,d["User-Agent"]=navigator.userAgent,d["Content-Type"]=o.globalIdAdlHeaders["Content-Type"],d.Accept=o.globalIdAdlHeaders.Accept,p=!0),s.get(l,{headers:d,ignoreDefaultHeaders:p}).then((function(e){var n=a(e,u,c);t(n)})).catch((function(t){e(t)}))},removeCachedGlobalID:function(){i.removeItem(this.client.globalIdCookie)}}},function(t,e,n){var r=n(3).invariant,o=n(0),i=n(18),s=o.noop;t.exports={configure:function(t){return t=o.isObject(t)?t:{},this.client.cdpHost=t.cdpHost||"cdp.in.treasuredata.com",this},fetchUserSegments:function(t,e,n){var a=o.isObject(t)&&!o.isArray(t),c=a?t.audienceToken:t,u=a&&t.keys||{};e=e||s,n=n||s,r("string"==typeof c||o.isArray(c),'audienceToken must be a string or array; received "'+c.toString()+'"'),r(o.isObject(u),'keys must be an object; received "'+u+'"');var f=o.isArray(c)?c.join(","):c,l=o.keys(u),d=[];o.forEach(l,(function(t){d.push(["key.",t,"=",u[t]].join(""))}));var p=d.join("&"),h="https://"+this.client.cdpHost+"/cdp/lookup/collect/segments?version=2&token="+f+(p&&"&"+p);i.get(h,{ignoreDefaultHeaders:!0,headers:{"Content-Type":"application/json"}}).then(e).catch(n)}}},function(t,e,n){
/*!
* ----------------------
* Treasure Tracker
* ----------------------
*/
var r=n(2),o=n(0),i=n(6),s=n(24),a=n(31),c=n(30),u=r.document;function f(t){return o.assign({td_version:function(){return c},td_client_id:function(){return t.uuid},td_charset:function(){return(u.characterSet||u.charset||"-").toLowerCase()},td_language:function(){var t=r.navigator;return(t&&(t.language||t.browserLanguage)||"-").toLowerCase()},td_color:function(){return r.screen?r.screen.colorDepth+"-bit":"-"},td_screen:function(){return r.screen?r.screen.width+"x"+r.screen.height:"-"},td_viewport:function(){var t=u.documentElement&&u.documentElement.clientHeight,e=u.documentElement&&u.documentElement.clientWidth,n=r.innerHeight,o=r.innerWidth;return(e<o?o:e)+"x"+(t<n?n:t)},td_title:function(){return u.title},td_description:function(){return function(t){for(var e=(u.head||u.getElementsByTagName("head")[0]).getElementsByTagName("meta"),n=e.length,r=0;r<n;r++)if(e[r].getAttribute("name")===t)return(e[r].getAttribute("content")||"").substr(0,8192);return""}("description")},td_url:function(){return u.location&&u.location.href?u.location.href.split("#")[0]:""},td_user_agent:function(){return[r.navigator.userAgent,"JSSDK/"+c].join(";")},td_platform:function(){return r.navigator.platform},td_host:function(){return u.location.host},td_path:function(){return u.location.pathname},td_referrer:function(){return u.referrer}},t.values)}e.configure=function(t){var e,n;return t=o.isObject(t)?t:{},this.client.track=t.track=(e=t.track,o.assign({pageviews:"pageviews",events:"events",values:{}},e)),this.client.storage=t.storage="none"!==(n=t.storage)&&(n=o.isObject(n)?n:{},o.assign({name:"_td",expires:63072e3,domain:u.location.hostname,customDomain:!!n.domain,path:"/"},n)),o.isNumber(t.clientId)?t.clientId=t.clientId.toString():t.clientId&&o.isString(t.clientId)||(t.storage&&t.storage.name&&(t.clientId=i.getItem(t.storage.name)),t.clientId&&"undefined"!==t.clientId||(t.clientId=a())),this.resetUUID(t.storage,t.clientId),this},e.resetUUID=function(t,e){var n=e||a(),r=t||this.client.storage;return this.client.track.uuid=n.replace(/\0/g,""),r&&r.expires&&this.inSignedMode()&&(s(r,r.name,void 0),s(r,r.name,this.client.track.uuid)),this.client.track.values=o.assign(f(this.client.track),this.client.track.values),this},e.trackEvent=function(t,e,n,r){return t||(t=this.client.track.events),e=o.assign(this.getTrackValues(),e),this.addRecord(t,e,n,r),this},e.trackPageview=function(t,e,n){return t||(t=this.client.track.pageviews),this.trackEvent(t,{},e,n),this},e.getTrackValues=function(){var t={};return o.forIn(this.client.track.values,(function(e,n){e&&(t[n]="function"==typeof e?e():e)})),this.client.useNewJavaScriptEndpoint||(t.td_ip="td_ip",t.td_browser="td_browser",t.td_browser_version="td_browser_version",t.td_os="td_os",t.td_os_version="td_os_version"),t}},function(t,e,n){var r=n(0).noop,o=n(6),i=n(24),s=n(18);t.exports={configure:function(){return this},fetchServerCookie:function(t,e,n){if(t=t||r,e=e||r,!this.inSignedMode())return e("not in signed in mode");if(!this.client.useServerSideCookie)return e("server side cookie not enabled");this._serverCookieDomainHost||("function"==typeof this.client.sscDomain?this._serverCookieDomain=this.client.sscDomain():this._serverCookieDomain=this.client.sscDomain,"function"==typeof this.client.sscServer?this._serverCookieDomainHost=this.client.sscServer(this._serverCookieDomain):this._serverCookieDomainHost=this.client.sscServer);var i="https://"+this._serverCookieDomainHost+"/get_cookie_id?cookie_domain="+window.encodeURI(this._serverCookieDomain)+"&r="+(new Date).getTime(),a=o.getItem("_td_ssc_id");if(a&&!n)return setTimeout((function(){t(a)}),0);s.get(i,{ignoreDefaultHeaders:!0}).then((function(e){t(e.td_ssc_id)})).catch(e)},removeServerCookie:function(){var t;t="[object Function]"===Object.prototype.toString.call(this.client.sscDomain)?this.client.sscDomain():this.client.sscDomain,i({domain:t},"_td_ssc_id")}}},function(t,e,n){var r=n(85),o=n(91);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a=n(0),c=n(94),u=n(2),f=n(31),l=n(3),d=n(95),p=l.camelCase,h=l.isLocalStorageAccessible;d.polyfill();var v={GIVEN:"given",REFUSED:"refused",NOTGIVEN:"notgiven",EXPIRED:"expired"};Promise.prototype.finally=Promise.prototype.finally||{finally:function(t){var e=function(e){return Promise.resolve(t()).then(e)};return this.then((function(t){return e((function(){return t}))}),(function(t){return e((function(){return Promise.reject(t)}))}))}}.finally,t.exports={configure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.consentManager||{},n=document.location.hostname,r=e.storageKey,o=void 0===r?"td_consent_preferences":r,i=e.consentTable,c=void 0===i?"td_cm_consent":i,u=e.contextTable,l=void 0===u?"td_cm_context":u,d=e.successConsentCallback,p=void 0===d?a.noop:d,h=e.failureConsentCallback,g=void 0===h?a.noop:h,m=e.expiredConsentsCallback,y=void 0===m?a.noop:m,b=e.dateFormat,_=void 0===b?"YYYY-MM-DD":b,x=e.issuer,w=void 0===x?"treasuredata":x,S=e.container;this.defaultContext={brand:n,domain_name:n,collection_type:n,collection_point_id:n,context_id:f(),consents:{}},this.consentManager={storageKey:o,successConsentCallback:p,failureConsentCallback:g,expiredConsentsCallback:y,consentTable:c,contextTable:l,dateFormat:_,issuer:w,container:S,states:s({},v)},this.consentManager.preferences=this.getPreferences()||{},this._updateExpiredConsents(),this.consentManager.expiredConsentsCallback(this.getExpiredConsents())},_getContainer:function(t){return a.isString(t)?document.querySelector(t):a.isObject(t)?t:document.body},_getNormalizedConsent:function(t,e){return{description:e.description,datatype:e.datatype,status:e.status,expiry_date:e.expiry_date||null,issuer:this.consentManager.issuer,identifier:this.client.track.uuid,purpose:t,context_id:e.context_id}},_normalizeConsents:function(){var t={},e={};for(var n in this.consentManager.preferences){var r=this.consentManager.preferences[n];for(var o in r.consents){var i=r.consents[o];i._updated?t[o]=this._getNormalizedConsent(o,i):e[o]=this._getNormalizedConsent(o,i)}}return a.isEmpty(t)?e:t},_stringifyPreferences:function(){var t=a.cloneDeep(this.consentManager.preferences);for(var e in t){var n=t[e].consents;for(var r in n){var o=n[r].expiry_date;a.isEmpty(o)||(n[r].expiry_date=c(o).format(this.consentManager.dateFormat)),n[r].identifier=this.client.track.uuid,n[r]=a.omit(n[r],["_updated"])}}return JSON.stringify(t)},_isValidStatus:function(t){return!(!t||!a.isString(t))&&((t=t.toLowerCase())===v.GIVEN||t===v.REFUSED||t===v.NOTGIVEN||t===v.EXPIRED)},_isExpired:function(t){var e=new Date;return t.status===v.GIVEN&&t.expiry_date&&c(t.expiry_date).isBefore(c(e))},_updateExpiredConsents:function(){var t=!1;if(!a.isEmpty(this.consentManager.preferences))for(var e in this.consentManager.preferences){var n=this.consentManager.preferences[e].consents||{};for(var r in n){var o=n[r];this._isExpired(o)&&(o.status=v.EXPIRED,o._updated=!0,t=!0)}}t&&this.saveConsents(a.noop,a.noop)},getPreferences:function(){if(!h())return null;var t=JSON.parse(u.localStorage.getItem(this.consentManager.storageKey))||null;if(t)for(var e in t){var n=t[e].consents;for(var r in n){var o=n[r].expiry_date;a.isEmpty(o)||(n[r].expiry_date=c(o,this.consentManager.dateFormat).valueOf()),n[r].identifier=this.client.track.uuid}}return t},_savePreferences:function(){h()&&!a.isEmpty(this.consentManager.preferences)&&u.localStorage.setItem(this.consentManager.storageKey,this._stringifyPreferences())},_getPromise:function(t){var e=this;return new Promise((function(n,r){e.addConsentRecord(e.consentManager.consentTable,t,n,r)}))},_resetUpdatedStatus:function(){for(var t in this.consentManager.preferences){var e=this.consentManager.preferences[t].consents;for(var n in e){var r=e[n];r._updated&&(r._updated=!1)}}},saveContexts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.noop,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.noop;this._savePreferences();var r=Object.keys(this.consentManager.preferences).reduce((function(e,n){var r=t.consentManager.preferences[n],o=a.omit(r,["consents"]);return e.push(o),e}),[]),o=r.map((function(e){return new Promise((function(n,r){t.addConsentRecord(t.consentManager.contextTable,e,n,r)}))}));Promise.all(o).then(e).catch(n)},saveConsents:function(t,e){var n=this;t=t||this.consentManager.successConsentCallback||a.noop,e=e||this.consentManager.failureConsentCallback||a.noop,this._savePreferences();var r,o=[],i=[];for(var s in this.consentManager.preferences){var c=this.consentManager.preferences[s].consents;for(var u in c){var f=c[u],l=this._getNormalizedConsent(u,f);f._updated?o.push(l):i.push(l)}}r=a.isEmpty(o)?i.map((function(t){return n._getPromise(t)})):o.map((function(t){return n._getPromise(t)})),Promise.all(r).then((function(){t(n._normalizeConsents())}),(function(t){e({success:!1,message:t.message})})).finally((function(){a.isEmpty(o)||n._resetUpdatedStatus()}))},addContext:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.isEmpty(t)){var e,n;e=a.isString(t.context_id)?t.context_id:a.isFunction(t.context_id)?t.context_id():f();var r=this.consentManager.preferences[e];return n=r?a.assign({},r,t):a.assign({},t,{context_id:e,consents:{}}),this.consentManager.preferences[e]=n,e}},addConsents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.isEmpty(t))for(var e in t){var n,r=this._isValidStatus(t[e].status)?t[e].status:v.NOTGIVEN,o=t[e].context_id,i=t[e].expiry_date||"";o||(o=this.defaultContext.context_id,this.consentManager.preferences[o]||(this.consentManager.preferences[o]=this.defaultContext));var s=this.consentManager.preferences[o],u=s&&s.consents[e];if(!a.isEmpty(i)&&(a.isString(i)||a.isNumber(i)||a.isObject(i))){var f=c(i,this.consentManager.dateFormat);i=f.isValid()?f.valueOf():""}else i="";(n=a.isEmpty(u)?a.assign({},t[e],{key:p(e),status:r,identifier:this.client.track.uuid,context_id:o}):a.assign({},u,t[e])).issuer=this.consentManager.issuer,n.expiry_date=i,this.consentManager.preferences[o].consents[e]=n}},updateConsent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a.isEmpty(this.consentManager.preferences[t])&&!a.isEmpty(e)){var n=Object.keys(e),o=r(n,1),i=o[0],s=this.consentManager.preferences[t].consents;for(var u in s)if(p(u)===p(i)){var f=e[i].status||"",l=e[i].expiry_date||"";if(this._isValidStatus(f)||(f=s[i].status),!a.isEmpty(l)&&(a.isString(l)||a.isNumber(l)||a.isObject(l))){var d=c(l,this.consentManager.dateFormat);l=d.isValid()?d.valueOf():s[i].expiry_date}else l=s[i].expiry_date;var h=a.omit(s[i],["expiry_date","status"]);s[i]=a.assign(h,a.omit(e[i],["expiry_date","status"]),{identifier:this.client.track.uuid,status:f,expiry_date:l}),s[i]._updated=!0;break}}},updateContext:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.consentManager.preferences[t];if(!a.isEmpty(n)&&!a.isEmpty(e)){var r=a.omit(n,["consents"]);r=a.assign({},r,e),this.consentManager.preferences[t]=a.assign({},n,r)}},getConsentExpiryDate:function(t,e){if(t&&e){var n=this.consentManager.preferences[t].consents[e];return n&&n.expiry_date||null}},getConsents:function(){var t=this,e=a.isEmpty(this.consentManager.preferences)?this.getPreferences():this.consentManager.preferences;return Object.keys(e||{}).reduce((function(n,r){var o=e[r],i=o.consents,s=a.omit(o,["consents"]);for(var c in i){var u=a.assign({},s,{status:i[c].status,datatype:i[c].datatype||"",description:i[c].description||"",expiry_date:i[c].expiry_date||"",identifier:t.client.track.uuid,purpose:c});n.push(u)}return n}),[])},getContexts:function(){var t=a.isEmpty(this.consentManager.preferences)?this.getPreferences():this.consentManager.preferences;return Object.keys(t||{}).reduce((function(e,n){var r=t[n],o=a.omit(r,["consents"]);return e.push(o),e}),[])},getExpiredConsents:function(){var t=this;return this.getConsents().filter((function(e){return e.status===v.EXPIRED||t._isExpired(e)}))}}},function(t,e,n){var r=n(86),o=n(87),i=n(88),s=n(90);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(89);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(92);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(32).default,o=n(93);t.exports=function(t){var e=o(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(32).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",o="minute",i="hour",s="day",a="week",c="month",u="quarter",f="year",l="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},g=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},m={s:g,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+g(r,2,"0")+":"+g(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,c),i=n-o<0,s=e.clone().add(r+(i?-1:1),c);return+(-(r+(n-o)/(i?o-s:s-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:f,w:a,d:s,D:l,h:i,m:o,s:r,ms:n,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",b={};b[y]=v;var _=function(t){return t instanceof j},x=function t(e,n,r){var o;if(!e)return y;if("string"==typeof e){var i=e.toLowerCase();b[i]&&(o=i),n&&(b[i]=n,o=i);var s=e.split("-");if(!o&&s.length>1)return t(s[0])}else{var a=e.name;b[a]=e,o=a}return!r&&o&&(y=o),o||!r&&y},w=function(t,e){if(_(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new j(n)},S=m;S.l=x,S.i=_,S.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var j=function(){function v(t){this.$L=x(t.locale,null,!0),this.parse(t)}var g=v.prototype;return g.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(p);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},g.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},g.$utils=function(){return S},g.isValid=function(){return!(this.$d.toString()===d)},g.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},g.isAfter=function(t,e){return w(t)<this.startOf(e)},g.isBefore=function(t,e){return this.endOf(e)<w(t)},g.$g=function(t,e,n){return S.u(t)?this[e]:this.set(n,t)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(t,e){var n=this,u=!!S.u(e)||e,d=S.p(t),p=function(t,e){var r=S.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return u?r:r.endOf(s)},h=function(t,e){return S.w(n.toDate()[t].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},v=this.$W,g=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case f:return u?p(1,0):p(31,11);case c:return u?p(1,g):p(0,g+1);case a:var b=this.$locale().weekStart||0,_=(v<b?v+7:v)-b;return p(u?m-_:m+(6-_),g);case s:case l:return h(y+"Hours",0);case i:return h(y+"Minutes",1);case o:return h(y+"Seconds",2);case r:return h(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(t){return this.startOf(t,!1)},g.$set=function(t,e){var a,u=S.p(t),d="set"+(this.$u?"UTC":""),p=(a={},a[s]=d+"Date",a[l]=d+"Date",a[c]=d+"Month",a[f]=d+"FullYear",a[i]=d+"Hours",a[o]=d+"Minutes",a[r]=d+"Seconds",a[n]=d+"Milliseconds",a)[u],h=u===s?this.$D+(e-this.$W):e;if(u===c||u===f){var v=this.clone().set(l,1);v.$d[p](h),v.init(),this.$d=v.set(l,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},g.set=function(t,e){return this.clone().$set(t,e)},g.get=function(t){return this[S.p(t)]()},g.add=function(n,u){var l,d=this;n=Number(n);var p=S.p(u),h=function(t){var e=w(d);return S.w(e.date(e.date()+Math.round(t*n)),d)};if(p===c)return this.set(c,this.$M+n);if(p===f)return this.set(f,this.$y+n);if(p===s)return h(1);if(p===a)return h(7);var v=(l={},l[o]=t,l[i]=e,l[r]=1e3,l)[p]||1,g=this.$d.getTime()+n*v;return S.w(g,this)},g.subtract=function(t,e){return this.add(-1*t,e)},g.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=S.z(this),i=this.$H,s=this.$m,a=this.$M,c=n.weekdays,u=n.months,f=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].slice(0,i)},l=function(t){return S.s(i%12||12,t,"0")},p=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},v={YY:String(this.$y).slice(-2),YYYY:S.s(this.$y,4,"0"),M:a+1,MM:S.s(a+1,2,"0"),MMM:f(n.monthsShort,a,u,3),MMMM:f(u,a),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:f(n.weekdaysMin,this.$W,c,2),ddd:f(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:S.s(i,2,"0"),h:l(1),hh:l(2),a:p(i,s,!0),A:p(i,s,!1),m:String(s),mm:S.s(s,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:o};return r.replace(h,(function(t,e){return e||v[t]||o.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,l,d){var p,h=S.p(l),v=w(n),g=(v.utcOffset()-this.utcOffset())*t,m=this-v,y=S.m(this,v);return y=(p={},p[f]=y/12,p[c]=y,p[u]=y/3,p[a]=(m-g)/6048e5,p[s]=(m-g)/864e5,p[i]=m/e,p[o]=m/t,p[r]=m/1e3,p)[h]||m,d?y:S.a(y)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return b[this.$L]},g.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=x(t,e,!0);return r&&(n.$L=r),n},g.clone=function(){return S.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),E=j.prototype;return w.prototype=E,[["$ms",n],["$s",r],["$m",o],["$H",i],["$W",s],["$M",c],["$y",f],["$D",l]].forEach((function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,j,w),t.$i=!0),w},w.locale=x,w.isDayjs=_,w.unix=function(t){return w(1e3*t)},w.en=b[y],w.Ls=b,w.p={},w}()},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var r;r=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,i=void 0,s=void 0,a=function(t,e){h[o]=t,h[o+1]=e,2===(o+=2)&&(s?s(v):_())},c="undefined"!=typeof window?window:void 0,u=c||{},f=u.MutationObserver||u.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(v,1)}}var h=new Array(1e3);function v(){for(var t=0;t<o;t+=2)(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0;o=0}var g,m,y,b,_=void 0;function x(t,e){var n=this,r=new this.constructor(j);void 0===r[S]&&$(r);var o=n._state;if(o){var i=arguments[o-1];a((function(){return I(o,r,i,n._result)}))}else k(n,r,t,e);return r}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(j);return A(e,t),e}l?_=function(){return e.nextTick(v)}:f?(m=0,y=new f(v),b=document.createTextNode(""),y.observe(b,{characterData:!0}),_=function(){b.data=m=++m%2}):d?((g=new MessageChannel).port1.onmessage=v,_=function(){return g.port2.postMessage(0)}):_=void 0===c?function(){try{var t=Function("return this")().require("vertx");return void 0!==(i=t.runOnLoop||t.runOnContext)?function(){i(v)}:p()}catch(t){return p()}}():p();var S=Math.random().toString(36).substring(2);function j(){}function E(e,n,r){n.constructor===e.constructor&&r===x&&n.constructor.resolve===w?function(t,e){1===e._state?M(t,e._result):2===e._state?C(t,e._result):k(e,void 0,(function(e){return A(t,e)}),(function(e){return C(t,e)}))}(e,n):void 0===r?M(e,n):t(r)?function(t,e,n){a((function(t){var r=!1,o=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,(function(n){r||(r=!0,e!==n?A(t,n):M(t,n))}),(function(e){r||(r=!0,C(t,e))}),t._label);!r&&o&&(r=!0,C(t,o))}),t)}(e,n,r):M(e,n)}function A(t,e){if(t===e)C(t,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(r=e),null===r||"object"!==o&&"function"!==o)M(t,e);else{var n=void 0;try{n=e.then}catch(e){return void C(t,e)}E(t,e,n)}var r,o}function O(t){t._onerror&&t._onerror(t._result),T(t)}function M(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&a(T,t))}function C(t,e){void 0===t._state&&(t._state=2,t._result=e,a(O,t))}function k(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+1]=n,o[i+2]=r,0===i&&t._state&&a(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?I(n,r,o,i):o(i);t._subscribers.length=0}}function I(e,n,r,o){var i=t(r),s=void 0,a=void 0,c=!0;if(i){try{s=r(o)}catch(t){c=!1,a=t}if(n===s)return void C(n,new TypeError("A promises callback cannot return that same promise."))}else s=o;void 0!==n._state||(i&&c?A(n,s):!1===c?C(n,a):1===e?M(n,s):2===e&&C(n,s))}var D=0;function $(t){t[S]=D++,t._state=void 0,t._result=void 0,t._subscribers=[]}var P=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(j),this.promise[S]||$(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&M(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===w){var o=void 0,i=void 0,s=!1;try{o=t.then}catch(t){s=!0,i=t}if(o===x&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===N){var a=new n(j);s?C(a,i):E(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===t?C(r,n):this._result[e]=n),0===this._remaining&&M(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;k(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),N=function(){function e(t){this[S]=D++,this._result=this._state=void 0,this._subscribers=[],j!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){A(t,e)}),(function(e){C(t,e)}))}catch(e){C(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return N.prototype.then=x,N.all=function(t){return new P(this,t).promise},N.race=function(t){var e=this;return r(t)?new e((function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},N.resolve=w,N.reject=function(t){var e=new this(j);return C(e,t),e},N._setScheduler=function(t){s=t},N._setAsap=function(t){a=t},N._asap=a,N.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=N},N.Promise=N,N},t.exports=r()}).call(this,n(96),n(7))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],f=!1,l=-1;function d(){f&&c&&(f=!1,c.length?u=c.concat(u):l=-1,u.length&&p())}function p(){if(!f){var t=a(d);f=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||f||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){var r=n(0),o=n(2);var i=["init","set","blockEvents","unblockEvents","setSignedMode","setAnonymousMode","resetUUID","addRecord","fetchGlobalID","trackPageview","trackEvent","trackClicks","fetchUserSegments","fetchServerCookie","ready"];t.exports=function(t,e){if(r.isObject(o[e])){var n=o[e],s=n.clients;r.forIn(t.prototype,(function(t,e){n.prototype[e]=t})),r.forEach(s,(function(t){r.forEach(i,(function(e){!function(t,e){var n="_"+e;if(t[n]){for(var r=t[n]||[];r.length;)t[e].apply(t,r.shift());delete t[n]}}(t,e)}))}))}}}]);