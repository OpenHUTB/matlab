/*v3.10.0 | 2021-07-05T16:39:10.896Z*/
+function(e,n){var t=((new Date).getTime(),function(){var e={};return{require:function(n){if(e.hasOwnProperty(n))return e[n];throw Error("$m.require : no such $m. named - "+n)},define:function(n,o){if(!e[n]){var i={};i.exports={},o.call(null,t.require,i.exports,i),e[n]=i.exports}}}}());t.define("utils",function(t,o,i){o.extend=function(){var e,n,t=arguments,o=1,i=t.length,a=t[0];for(1===i&&(o=0,a=this);o<i;o++)if(e=t[o])for(n in e)a[n]=e[n];return a};var a=function(e){return Object.prototype.toString.call(e)};o.each=function(e,n){var t;if("[object Array]"===a(e))for(t=0;t<e.length&&!1!==n(e[t],t,e);t++);else if("[object Object]"===a(e))for(t in e)if(!1===n(e[t],t,e))break},o.param=function(e){var n=[];for(var t in e)e[t]&&"null"!==e[t]&&void 0!==e[t]&&e.hasOwnProperty(t)&&n.push(t+"="+encodeURIComponent(e[t]));return n.join("&")},o.appendParam=function(e,n){var t,i=/\?([^#]*)/,a=/#(.*)/;e=e||"";var r={},c=e.match(i);return c&&(r=o.parseUrl(c[0])),r=o.extend(r,n),t="?"+o.param(r),i.test(e)?e=e.replace(i,t):a.test(e)?e=e.replace(a,t+"#"+e.match(a)[1]):e+=t,e},o.parseUrl=function(e,n){var t,i,a={};return e&&e.replace(/^\s+|\s+$/,"")?(e=e.replace(/\S*\?/,""),e&&(n&&(e=e.toLocaleLowerCase()),t=e.split("&"),o.each(t,function(e){i=e.split("="),a[i[0]]=decodeURIComponent(i[1])})),a):{}},o.getUrlObj=function(e){return o.parseUrl(location.search,!1,e)},o.getRootDomain=function(e){e=e||document.domain;for(var n=e.split("."),t=[".com.cn",".net.cn",".com.hk",".co.kr"],o=2,i=t.length;i--;)if(e.indexOf(t[i])>-1){o=3;break}return n.slice(n.length-o).join(".")},o.generateName=function(e,n){return e=e||"",n=n||"",e+"_"+Math.random().toString(36).slice(-6)+"_"+n},o.cookie={get:function(e){var n,t=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(n=document.cookie.match(t))?unescape(n[2]):null},set:function(e,n,t){var o=new Date;o.setTime(o.getTime()+t.expires),document.cookie=e+"="+escape(n)+";domain="+t.domain+";path="+t.path+";expires="+o.toGMTString()},remove:function(e){this.set(e,"",-1)}};var r=function(e,n){var o=t("config"),i=document.getElementsByTagName("script")[0],a=document.createElement("script");a.onload=a.onreadystatechange=a.onerror=function(e){a&&a.readyState&&/^(?!(?:loaded|complete)$)/.test(a.readyState)||(a.onload=a.onreadystatechange=a.onerror=null,o.isDebug||(a.parentNode.removeChild(a),a=null),n&&n())},a.charset="utf-8",a.async=!0,a.src=e,i.parentNode.insertBefore(a,i)};o.jsonp=function(t,i){"[object Function]"===Object.prototype.toString.call(i)&&(i={callback:i}),i=i||{};var a=i.jsonp||o.generateName(e);n[a]=function(e){i.callback&&i.callback(e||{});try{delete n[a]}catch(e){}n[a]=void 0};var c=i.data||{};c.v=+new Date,c[i.jsonpCallback||"cb"]=a,r(o.appendParam(t,c))}});var o={serverHost:"//l.fancyapi.com/",cmServerHost:"//cm.fancyapi.com/",mappingPage:"//pic.fastapi.net/static/html/cm.html",isDebug:!1,ebableCM:!1,loggerLevel:0,enableDevMob:!0,isLocal:/(localhost|127\.0\.0\.1|([192,10]\.168\.\d{1,3}\.\d{1,3}))/.test(n.location.hostname),queryParamsPrefix:"_ftag_"};t.define("config",function(e,n,t){var i=e("utils");n.get=function(){return o},n.set=function(e){i.extend(o,e)}}),t.define("cookieMapping",function(e,n,t){var o=e("utils"),i=e("config").get();n.sync=function(e){var n,t=document.body;e?(n=document.createElement("iframe"),n.style.cssText="width:1px; height:1px; position:absolute; top:-999999px; left:-999999px;",n.src=i.mappingPage,t?t.insertBefore(n,t.lastChild):setTimeout(function(){var e=document.body;e.insertBefore(n,e.lastChild)},500)):o.jsonp(i.cmServerHost+"query",{jsonpCallback:"cb",jsonp:"MAPPING",callback:function(e){var n,t=[];o.each(e,function(e){n=t.push(new Image)-1,t[n].src=e})}})}}),t.define("browser",function(e,n,t){n.get=function(){return{w:window.innerWidth,h:window.innerHeight,p:navigator.platform}}}),t.define("depth",function(t,o,i){function a(e,n){var t=s.getRootDomain();document.cookie=d+"="+escape(e)+";domain="+t+";path=/;",document.cookie=f+"="+escape(n)+";domain="+t+";path=/;"}function r(){c&&u||(c=s.cookie.get(d),u=s.cookie.get(f),c||(c=0,u=+new Date))}var c,u,s=t("utils"),d=e+"_depth",f=e+"_flag";o.check=function(){r();var t,o=document.referrer;t=s.getRootDomain()!==s.getRootDomain(o.match(/^(http:\/\/|https:\/\/)?([^\/^:]*)/)[2]),function(t){if(t){var o=t.getItem(e+"-lastPath"),i=n.location.href;if(o===i)return!0;t.setItem(e+"-lastPath",i)}return!1}(n.sessionStorage)||(o&&!t?c++:(c=1,u=+new Date),a(c,u))},o.get=function(){return{depth:c,flag:u}}});var i={},a=["aid","slotid","adid","pvid","groupid","vendorid","rtbtime","device_id","source","first_pvid","os","device_id_type","cid"];t.define("data",function(t,o,r){function c(){var n=u.getRootDomain();u.each(a,function(t){var o=31536e3;"pvflag"===t&&(o=null),"source"!==t?u.cookie.set(e+"_"+t,i[t],{domain:n,path:"/",expires:o}):document.cookie=e+"_source="+escape(i[t])+";domain="+n+";path=/;"})}var u=t("utils"),s=t("config").get(),d=!!window.cpcAndroid&&/clicash/.test(navigator.userAgent),f=function(e){return window.cpcAndroid&&cpcAndroid.fetchInfo(e)};i.url=function(){var e=location.href;if(parent!==n)try{e=top.location.href}catch(n){e=document.referrer}return encodeURIComponent(e)}(),i.ref=document.referrer,u.each(n[e],function(e){(Array.isArray&&Array.isArray(e)||"[object Array]"===Object.prototype.toString)&&"aid"===e[0]&&(i.aid=e[1])}),o.check=function(n){var t,o=u.getUrlObj();if(u.each(a,function(n){t=o[s.queryParamsPrefix+n],"aid"!=n&&"cid"!=n&&(t=t||u.cookie.get(e+"_"+n)),"undefined"!==t&&"null"!==t&&void 0!=t&&(i[n]=t)}),!i.aid)return void(console&&console.log("aid cannot be empty"));if(o[s.queryParamsPrefix+"pvid"])return i.first_pvid||(i.first_pvid=i.pvid),n&&n(),void c();var r=setTimeout(n,15e3);u.jsonp(s.serverHost+"action",{jsonpCallback:"func",jsonp:"MISSING",data:{action:"jsonp",uid:f("imei")},callback:function(e){clearTimeout(r),e.aid==i.aid&&(u.each(e,function(e,n){e&&"0"!=e&&"cid"!=e&&(i[n]=e)}),i.first_pvid||(i.first_pvid=e.pvid),c()),i.cid||(i.cid=e.cid,c()),d&&(i.device_id=f("imei")),n&&n()}})},o.get=function(){return i},o.set=function(e,n){"string"!=typeof e?u.extend(i,e):i.key=n}}),t.define("logger",function(e,n,t){var o=e("utils"),i=e("config").get(),a=e("data"),r=e("depth"),c=e("browser"),u=["debug","info","warn","error","fatal"],s=i.loggerLevel||0,d=function(){var e=Array.prototype.slice.apply(arguments),n=e.pop();n>=s&&(2===n?e.unshift("color:#ffbf00;"):n>2?e.unshift("color:#f04134;"):e.unshift("color:#00a854;"),e.unshift("%c 【logger】 "+u[n]+" %c: "),console&&console.log.apply(null,e))};o.each(u,function(e,t){n[e]=function(){var e=Array.prototype.slice.apply(arguments);e.push(t),d.apply(null,e)}});var f=[],l=function(e){var n=document.createElement("img");n.onload=function(){n=n.onload=null},n.src=o.appendParam(e,{_rm_:+new Date}),f.push(n)},p=function(e){l(e)};n.setLoggerLevel=function(e){s=e},n.send=function(){return function(e,n){if(i.enableDevMob&&i.isLocal){var t=o.parseUrl(e);return console&&console.dir({url:e,params:t,action:t.action})}"beacon"===n?p(e):l(e)}}(),n.sendAction=function(e){var t=a.get();t=o.extend({v:"3.10.0"},r.get(),c.get(),t,e),n.send(o.appendParam(i.serverHost+"action",t),"staytime"===e.action?"beacon":"image")}}),t.define("event",function(e,n,t){t.exports={on:function(e,n,t,o){var i,a=function(e){switch(t[0]){case".":return new RegExp(" "+t.slice(1)+" ").test(e.className);case"#":return e.id===t.slice(1);default:return e.tagName===t.toLocaleUpperCase()}};"string"==typeof t?(i=o,o=function(n){n=n||window.event;for(var t=n.target||n.srcElement;t&&t!=e;){if(a(t)){i&&i.call(this,n);break}t=t.parentNode}}):o=t,e.addEventListener?e.addEventListener(n,o,!1):e.attachEvent("on"+n,o)},off:function(e,n,t,o){e.removeEventListener?e.removeEventListener(n,t,!1):e.detachEvent("on"+n,t)},once:function(e,n,o,i){var a=function(){t.exports.off(e,n,o,a),i&&i()};t.exports.on(e,n,o,a)}}}),t.define("action",function(e,n,t){var o=e("logger"),i=(e("utils"),e("depth"),!1);n.trigger=function(e,n){var t={};"object"==typeof e?t=e:(t.action=e,"object"==typeof n&&(n=JSON.stringify(n)),t.data=n),"land"===t.action&&(i=!0);var a=t.action.split(".");a[1]&&(t.action=a[0],t.status=a[1]),o.sendAction(t)},n.init=function(){i||n.trigger("land")}}),t.define("proxy",function(e,n,t){var o=e("config"),i=e("action"),a=e("event"),r=e("data"),c={aid:function(e){r.set({aid:e})},cid:function(e){r.set({aid:e})},setConfig:function(e){o.set(e)},pv:function(e,n){r.set({pv:e}),i.trigger("land",n)},enableStytime:function(){},enableCM:function(e){o.set({ebableCM:!!e})},enableHT:function(){a.on(window,"hashchange",function(){i.trigger("land",{landType:"ht"})})},enableHS:function(){a.on(window,"popstate",function(){i.trigger("land",{landType:"hs"})},!0)},action:i.trigger,data:function(e){r.set({f:e.from,s:e.source})}};n.call=function(e){var n=e.shift();c[n]&&c[n].apply(null,e)}}),t.define("stayTime",function(e,n,t){var o,i,a=+new Date,r=0,c=e("action"),u=e("event");void 0!==document.hidden?(o="hidden",i="visibilitychange"):void 0!==document.mozHidden?(o="mozHidden",i="mozvisibilitychange"):void 0!==document.msHidden?(o="msHidden",i="msvisibilitychange"):void 0!==document.webkitHidden&&(o="webkitHidden",i="webkitvisibilitychange"),n.init=function(){u.on(window,"blur",function(){r=+new Date,clearInterval(void 0)}),u.on(window,"focus",function(){r=r||+new Date,a-=+new Date-r}),u.on(document,i,function(){document[o]?(r=+new Date,clearInterval(void 0)):a-=+new Date-r},!1);var e=!1,n=function(){e||(e=!0,c.trigger("staytime",{staytime:Math.floor((+new Date-a)/1e3),isLeave:1}))};u.once(window,"beforeunload",n),u.once(window,"unload",n)}}),t.define("main",function(t,o,i){var a=t("utils"),r=t("proxy"),c=t("config"),u=t("action"),s=t("depth"),d=t("stayTime"),f=n[e],l=function(e){"function"==typeof e?setTimeout(function(){e.call(null,t)},0):(Array.isArray&&Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e))&&r.call(e)};s.check(),t("data").check(function(){a.each(f,l),n[e]={push:l,action:u.trigger,version:"3.10.0",trackPV:function(){u.trigger("land",s.get())}},u.init(),d.init(),c.get().ebableCM&&setTimeout(function(){cookieMapping.sync()},3e3)})}),n[e]||t.require("main")}("_ft_",window);