function pir=cnnbuildpir(networkInfo,netname,codegendir,codegentarget,dlcfg,transformProperties,...
    rowMajorCustomLayerNames,dlCodegenOptionsCallback)






    [pir,layer2comp,connectivity]=dltargets.internal.createPIR(networkInfo,...
    netname,...
    codegendir,...
    codegentarget,...
    dlcfg,...
    transformProperties,...
    rowMajorCustomLayerNames,...
    dlCodegenOptionsCallback);



    dltargets.internal.SetSignalBufferSize(pir.getTopNetwork,networkInfo);

    if~strcmp(dlcfg.TargetLibrary,'none')

        transformObj=dltargets.internal.optimizations.TransformDriver(pir.getTopNetwork,...
        layer2comp,...
        networkInfo,...
        netname,...
        codegendir,...
        codegentarget,...
        dlcfg,...
        connectivity);

        inputNormalization=dltargets.internal.optimizations.transforms.InputNormalizationTransform;

        transformObj.addTransform(inputNormalization);

        transformObj.runTransforms();
    end


end


