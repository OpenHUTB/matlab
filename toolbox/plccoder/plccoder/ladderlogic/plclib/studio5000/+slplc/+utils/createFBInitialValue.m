function fbInitValue=createFBInitialValue(fbInitValueInput,varList)




    fbInitValue=fbInitValueInput;

    for varCount=1:numel(varList)
        varInfo=varList(varCount);
        if ismember(varInfo.Scope,{'Input','Output','Local'})&&...
            ~strcmpi(strtrim(varInfo.InitialValue),'0')

            try
                initValue=evalin('base',[varInfo.InitialValue,';']);
            catch ME
                fprintf([...
'\n\n\t\tFailed to evaluate the initial value expression "%s" specified for variable "%s" in command window.'...
                ,'\n\t\tPlease make sure "%s" can be evaluated in base workspace.'...
                ,'\n\t\tThe initial value of variable "%s" is set to the ground value before fixing it.'...
                ,'\n\t\tIf there is no error thrown, please update the model (Ctrl+D) to see the error details.'...
                ,'\n\n\t\tCaused by:'...
                ,'\n\t\t%s\n\n'],...
                varInfo.InitialValue,...
                varInfo.Name,...
                varInfo.InitialValue,...
                varInfo.Name,...
                ME.message);
            end

            if isstruct(initValue)||~isscalar(initValue)||initValue~=0


                fbInitValue.(varInfo.Name)=initValue;
            end
        end
    end

end
