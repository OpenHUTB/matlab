function functionText=generateSequenceNetworkClassifyFunction(...
    block,...
    networkToLoad,...
    hasSequenceOutput,...
    simSupported,...
    classifyEnabled,...
    predictEnabled,...
    topkEnabled,...
    kValue,...
    labelsTypeName)





    possibleOutputs=["ypred","scores","labels"];
    possibleTempOutputs=["ypredIdx","scores","idxs"];
    outputDependencies=[classifyEnabled,predictEnabled,predictEnabled];

    possibleConversions=[...
    "ypred = "+labelsTypeName+"(ypredIdx);",...
    "labels = "+labelsTypeName+"(idxs);"];
    conversionDependencies=[classifyEnabled,predictEnabled];


    outputs=possibleOutputs(outputDependencies);
    tempOutputs=possibleTempOutputs(outputDependencies);
    conversions=possibleConversions(conversionDependencies);


    outputsString=join(outputs,", ");
    if isempty(outputsString)
        outputsString="";
    end
    outputsString="["+outputsString+"]";

    tempOutputsString=join(tempOutputs,", ");
    if isempty(tempOutputsString)
        tempOutputsString="";
    end
    tempOutputsString="["+tempOutputsString+"]";


    numOutputs=length(outputs);
    if numOutputs>0
        signature="function "+outputsString+" = sequenceNetworkClassify(input)";
    else
        signature="function sequenceNetworkClassify(input, reset)";
    end


    [useExtrinsicLines,extrinsicVar]=deep.blocks.internal.generateUseExtrinsicCode(simSupported);

    inputsString=join([...
    "input",...
    deep.blocks.internal.removeNewlines("coder.const("""+block+""")"),...
    "'"+networkToLoad+"'",...
    string(hasSequenceOutput),...
    extrinsicVar,...
    string(classifyEnabled),...
    string(predictEnabled)...
    ,string(topkEnabled),...
    string(kValue)],", ");
    if numOutputs>0
        call=tempOutputsString+" = deep.blocks.internal.sequenceNetworkClassify("+inputsString+");";
    else
        call="deep.blocks.internal.sequenceNetworkClassify("+inputsString+");";
    end


    functionText=join([...
    signature,...
    useExtrinsicLines,...
    call,...
    conversions{:},...
    "end"],newline);

end
