classdef(Sealed)FakeOverlay<matlab.graphics.primitive.world.Group





    properties(Access=private)
        parFig=matlab.ui.Figure.empty;
    end

    methods(Access=public)
        function hObj=FakeOverlay(varargin)



            hObj.Description='FakeOverlay';
            parProp=strcmpi('Parent',varargin);
            idx=find(parProp);
            if idx~=0
                parVal=varargin{idx+1};
                if ishghandle(parVal,'figure')
                    hObj.parFig=parVal;
                end
            end
        end

        function trueParent=addChild(hObj,hChild)



            if isa(hChild,'matlab.graphics.shape.internal.ScribeObject')
                trueParent=matlab.graphics.annotation.internal.findScribeLayer(hObj.parFig);
            else
                trueParent=hObj;
            end
        end
    end

    methods(Access=public,Static=true)
        function hObj=doloadobj(hObj)

            oldHiddenHandles=get(0,'ShowHiddenHandles');
            hChil=findobj(hObj,'-depth',1);
            set(0,'ShowHiddenHandles',oldHiddenHandles);
            hChil=hChil(2:end);


            if~isempty(hChil)
                trueParent=matlab.graphics.annotation.internal.findScribeLayer(hObj.parFig);
            end
            for i=1:numel(hChil)
                currChild=hChil(i);
                switch class(currChild)
                case 'matlab.graphics.shape.internal.FakeArrow'


                    matlab.graphics.shape.Arrow('LineStyle',currChild.DisplayLineStyle,...
                    'Color',currChild.DisplayLineColor,...
                    'LineWidth',currChild.DisplayLineWidth,...
                    'Position',[currChild.StartPoint,currChild.EndPoint-currChild.StartPoint],...
                    'Tag',currChild.Tag,...
                    'Visible',currChild.Visible,...
                    'Parent',trueParent);
                case 'matlab.graphics.primitive.Text'


                    matlab.graphics.shape.TextBox('String',currChild.String,...
                    'Color',currChild.Color,...
                    'EdgeColor',currChild.EdgeColor,...
                    'Position',[currChild.Position(1:2),eps,eps],...
                    'FitBoxToText','on',...
                    'FontAngle',currChild.FontAngle,...
                    'FontName',currChild.FontName,...
                    'FontUnits',currChild.FontUnits,...
                    'FontSize',currChild.FontSize,...
                    'FontWeight',currChild.FontWeight,...
                    'HorizontalAlignment',currChild.HorizontalAlignment,...
                    'LineStyle',currChild.LineStyle,...
                    'LineWidth',currChild.LineWidth,...
                    'Margin',currChild.Margin,...
                    'String',currChild.String,...
                    'Interpreter',currChild.Interpreter,...
                    'VerticalAlignment',currChild.VerticalAlignment,...
                    'Tag',currChild.Tag,...
                    'Visible',currChild.Visible,...
                    'Parent',trueParent);
                case 'matlab.graphics.primitive.Line'


                    matlab.graphics.shape.Line('LineStyle',currChild.LineStyle,...
                    'LineWidth',currChild.LineWidth,...
                    'Color',currChild.Color,...
                    'X',currChild.XData,...
                    'Y',currChild.YData,...
                    'Tag',currChild.Tag,...
                    'Visible',currChild.Visible,...
                    'Parent',trueParent);
                end
            end
            delete(hObj);
            hObj=matlab.graphics.primitive.world.Group.empty;
        end
    end
end
