function sParameterFitterSimulink(block)





    mws=get_param(bdroot(block),'ModelWorkspace');

    [analogChannelmaskNamesValues,~]=serdes.internal.callbacks.getUtilitiesMaskValues(bdroot(block),'Analog Channel');



    dt=min(analogChannelmaskNamesValues.ImpulseSampleInterval,...
    getVariablePart(mws,'SampleInterval.Value'));

    [configMaskNamesValues,~]=serdes.internal.callbacks.getUtilitiesMaskValues(bdroot(block),'Configuration');



    if hasVariable(mws,'sParameterFit')


        priorSChannel=getVariable(mws,'sParameterFit');

        sChannelInstance=SParameterChannel(...
        'FileName',priorSChannel.FileName,...
        'PortOrder',priorSChannel.PortOrderUsed,...
        'MaxNumberOfPoles',priorSChannel.MaxNumberOfPoles,...
        'ErrorTolerance',priorSChannel.ErrorTolerance,...
        'StopTime',priorSChannel.StopTime,...
        'TxRTFactor',priorSChannel.TxRTFactor,...
        'AutoDetectPortOrder',priorSChannel.AutoDetectPortOrder,...
...
        'SampleInterval',dt,...
        'Signaling',configMaskNamesValues.Signaling,...
        'TxR',analogChannelmaskNamesValues.TxR,...
        'TxC',analogChannelmaskNamesValues.TxC,...
        'RxR',analogChannelmaskNamesValues.RxR,...
        'RxC',analogChannelmaskNamesValues.RxC,...
        'TxRiseTime',analogChannelmaskNamesValues.RiseTime,...
        'TxAmplitude',analogChannelmaskNamesValues.VoltageSwingIdeal);
    else
        sChannelInstance=SParameterChannel(...
        'SampleInterval',dt,...
        'Signaling',configMaskNamesValues.Signaling,...
        'TxR',analogChannelmaskNamesValues.TxR,...
        'TxC',analogChannelmaskNamesValues.TxC,...
        'RxR',analogChannelmaskNamesValues.RxR,...
        'RxC',analogChannelmaskNamesValues.RxC,...
        'TxRiseTime',analogChannelmaskNamesValues.RiseTime,...
        'TxAmplitude',analogChannelmaskNamesValues.VoltageSwingIdeal);
    end

    serdes.utilities.apps.sparameterfitter.sParameterFitter(sChannelInstance,mws);

end



