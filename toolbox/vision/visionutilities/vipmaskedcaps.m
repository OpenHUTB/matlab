function subsysCap=vipmaskedcaps(block)







    if~strcmpi(get_param(block,'Mask'),'on')
        DAStudio.error('Simulink:bcst:ErrOnlyMasks',mfilename);
    end

    maskType=get_param(block,'MaskType');


    [maskStr,trans]=getMaskStr(maskType,block);


    subsysCap=bcstCreateCap(maskType,maskStr,trans);



    function[subsysCapStr,trans]=getMaskStr(maskType,block)

        persistent maskTable transTable;
        if isempty(maskTable)
            [maskTable,transTable]=getMaskTable;
        end

        if isempty(maskType)||(strcmpi(get_param(block,'BlockType'),'SubSystem')&&isempty(get_param(block,'Blocks')))

            subsysCapStr='';
            trans=transTable;
        else

            findMask=find(strcmp(maskType,maskTable(:,2)));
            if~isempty(findMask)

                subsysCapStr=maskTable{findMask,1};
                trans=transTable;
            else
                DAStudio.error('Simulink:bcst:ErrMaskNotFound',maskType,mfilename);
            end
        end



        function[maskTable,transTable]=getMaskTable



            transTable.d='double';

            transTable.s='single';

            transTable.b='boolean';

            transTable.i='integer';
            transTable.is='integerSgn';
            transTable.iu='integerUns';
            transTable.depends.is='i';
            transTable.depends.iu='i';

            transTable.f='fixedpt';
            transTable.fs='fixedptSgn';
            transTable.fu='fixedptUns';
            transTable.depends.fs='f';
            transTable.depends.fu='f';

            transTable.c='codegen';
            transTable.p='production';

            transTable.m='multidimension';
            transTable.v='variablesize';






























            maskTable={...
...
...
...
            'd;s;b;i;f;c;p;','Image From File';...
            'd;s;b;i;f;c;p;','Image From Workspace';...
            'i;c;p;','Read Binary File';...
            'd;s;b;i;f;c;p;m;','Video From Workspace';...
...
            'd;s;b;i;f;c-FnIgnoredCodeGen;v;','Frame Rate Display';...
            'd;s;b;i;c.dsp_FnHostPCOnly;p;m;v;','To Video Display';...
            'd;s;b;i;f;c-FnIgnoredCodeGen;m;','Video To Workspace';...
            'd;s;b;i;c-FnIgnoredCodeGen;v;','Video Viewer';...
            'i;c;p;','Write Binary File';...
...
            'd;s;i;f;c;p;','Block Matching';...
            'd;s;i;f;c;p;v;','Contrast Adjustment';...
            'd;s;b.vision_FnExceptLICMethod;i;f;c;p;v;','Corner Detection';...
            'd;s;i;f;c;p;m;v;','Deinterlacing';...
            'd;s;i;f;c;p;v;','Edge Detection';...
            'd;s;i;f;c;p;','Histogram Equalization';...
            'd;s;b;i;f;c;p;v','Median Filter';...
            'd;s;c;p;','Optical Flow';...
            'd;s;b;i;f;c;p;v;','Template Matching';...
            'b;c;p;','Trace Boundary';...
...
            'd;s;i;f;c;p;v;','Autothreshold';...
            'd;s;iu.vision_Fnu8;c;p;v;','Chroma Resampling';...
            'd;s;b;iu.vision_Fnu8;c;p;m;v;','Color Space Conversion';...
            'd;s;i;f;c;p;m;','Demosaic';...
            'd;s;i.vision_FnWlLess16;f.vision_FnWlLess16;c;p;m;v;','Gamma Correction';...
            'd;s;b;iu.vision_Fnu8;c;p;v;','Image Complement';...
            'd;s;b;i.vision_FnWlLess16;f.vision_FnWlLess16;c;p;m;v;','Image Data Type Conversion';...
...
            'd;s;i;f;c;p;v;','2-D Convolution';...
            'd;s;i;f;c;p;v;','2-D FIR Filter';...
            'd;s;b;i;f;c;p;v;','Median Filter';...
...
            'd;s;c;p;m;v;','Apply Geometric Transformation';...
            'd;s;i.vision_FnIp;c;p;v;','Estimate Geometric Transformation';...
            'd;s;b;i;f;c;p;m;','Resize';...
            'd;s;i;f;c;p;m;v;','Rotate';...
            'd;s;i;f;c;p;m;','Shear';...
            'd;s;i;f;c;p;m;','Translate';...
            'd;s;b;i;f;c;p;m;v;','vision.internal.blocks.Warp';...
...
            'd;s;b;i;f;c;p;v;','Bottom-hat';...
            'd;s;b;i;f;c;p;v;','Closing';...
            'd;s;b;i;f;c;p;v;','Dilation';...
            'd;s;b;i;f;c;p;v;','Erosion';...
            'b;iu.vision_FnOp;c;p;v;','Label';...
            'd;s;b;i;f;c;p;v;','Opening';...
            'd;s;b;i;f;c;p;v;','Top-hat';...
...
            'd;s;i;f;c;p;v;','2-D Minimum';...
            'd;s;i;f;c;p;v;','2-D Maximum';...
            'd;s;i;f;c;p;v;','2-D Mean';...
            'd;s;c;p;v;','2-D Standard Deviation';...
            'd;s;i;f;c;p;v;','2-D Variance';...
            'd;s;i;f;c.FnReliesOnMemOp;p;','2-D Histogram';...
            'd;s;i;f;c.FnReliesOnMemOp;p;v;','2-D Median';...
            'd;s;i;f;c;p;v;','2-D Autocorrelation';...
            'd;s;i;f;c;p;v;','2-D Correlation';...
            'd.vision_FnOp;s.vision_FnOp;b.vision_FnIp;i.vision_FnOp;f.vision_FnOp,vision_FnSelFPSupport;c;p;v;','Blob Analysis';...
            'd;s;i;f;c;p;v;','Find Local Maxima';...
            'd;s;i;f;c.vision_FnCGNonFPSuit;p;v;','PSNR';...
...
            'd;s;b;i;f;c;p;m;v;','Compositing';...
            'd;s;b;i;f;c;p;m;v;','Draw Markers';...
            'd;s;b;i;f;c;p;m;v;','Draw Shapes';...
            'd;s;b;i;f.vision_FnWlLess32;c;p;m;v;','Insert Text';...
...
            'd;s;i;f;c;p;','2-D DCT';...
            'd;s;i;f;c.vision_FnFftwHostOnly;p;v;','2-D FFT';...
            'd;s;i;f;c;p;','2-D IDCT';...
            'd;s;i;f;c.vision_FnFftwHostOnly;p;v;','2-D IFFT ';...
            'd;s;i;f;c;p;m;v;','Gaussian Pyramid';...
            'd;s;b.vision_FnHLineBool;i.vision_FnHLineInt;f.vision_FnIp,vision_FnHLineFxpt;c;p;v;','Hough Lines';...
            'd.vision_FnOp;s.vision_FnOp;b;iu.vision_FnOp;fu.vision_FnOp;c;p;v;','Hough Transform';...
...
            'd.vision_FnSuppDepOnBlocksInside;s.vision_FnSuppDepOnBlocksInside;b.vision_FnSuppDepOnBlocksInside;i.vision_FnSuppDepOnBlocksInside;f.vision_FnSuppDepOnBlocksInside;c.vision_FnSuppDepOnBlocksInside;p.vision_FnSuppDepOnBlocksInside;v;','Block Processing';...
            'd;s;b;i;f;c;p;','Image Pad';...
            };
