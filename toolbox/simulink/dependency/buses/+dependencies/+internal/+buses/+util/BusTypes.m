classdef(Abstract)BusTypes




    properties(Constant)

        SymbolSeparated=arrayfun(@(bt,p,s)struct('blockType',bt,'depType',bt,'param',p,'symbol',s),...
        ["BusCreator","DataStoreRead","DataStoreWrite","BusSelector","BusAssignment"],...
        ["Inputs","DataStoreElements","DataStoreElements","OutputSignals","AssignedSignals",],...
        [",","#","#",",",",",]);
        OutDataTypeTypes=arrayfun(@(dt,p,q)struct('depType',dt,'param',p,'query',q),...
        ["OutDataType","OutDataType,PreLookup"],...
        ["OutDataTypeStr","OutputBusDataTypeStr"],...
        ["//System/Block/OutDataTypeStr","//System/Block[BlockType='PreLookup']/OutputBusDataTypeStr"]);
        InitValue=arrayfun(@(bt,p)struct('blockType',bt,'depType',bt,'param',p),...
        ["Constant","DataStoreMemory"],...
        ["Value","InitialValue"]);
        CodeInParam=arrayfun(@(dt,bt,p,op,newVMin,lastVMax)...
        struct('depType',dt,'blockType',bt,...
        'param',p,'paramQueryVersions',[newVMin,inf],...
        'oldParam',op,'oldParamQueryVersions',[0,lastVMax]),...
        ["Delay","InterpretedMATLABFcn","FromWorkspace","Memory","Merge","Rate","UnitDelay","OutputPort"],...
        ["Delay","MATLABFcn","FromWorkspace","Memory","Merge","RateTransition","UnitDelay","Outport"],...
        ["InitialCondition","MATLABFcn","VariableName","InitialCondition","InitialOutput","InitialCondition","InitialCondition","InitialOutput"],...
        [missing,missing,missing,"X0",missing,"X0","X0",missing],...
        [0,0,0,9.0,0,9.0,8.0,0],...
        [missing,missing,missing,8.9,missing,8.9,7.9,missing]);
        BusPortTypes=arrayfun(@(bt,dt,bn)struct('blockType',bt,...
        'depType',dt,'refElementType',strcat(dt,",Element"),...
        'blockFullType',"simulink/Ports & Subsystems/"+bn),...
        ["Inport","Outport"],...
        ["InBusElement","OutBusElement"],...
        ["In Bus Element","Out Bus Element"]);

        BusObjectSubType="BusObject";
        BusElementObjectSubType="BusElementObject";
        SignalObjectSubType="SignalObject";
        StructSubType="Struct";

    end

    methods(Static)

        function pattern=getBusDataTypePattern(busName)
            pattern=strcat("^(Bus:)?\s*",busName,"$");
        end

    end
end
