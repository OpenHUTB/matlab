function sl_postprocess(h)







    thermo2P_block=sprintf('fl_lib/Two-Phase Fluid/Sensors/Thermodynamic\nProperties Sensor\n(2P)');
    thermo2P_LoadFcn=get_param(thermo2P_block,'LoadFcn');
    thermo2P_LoadFcn_new=sprintf([thermo2P_LoadFcn,'\nif get_param(bdroot, ''VersionLoaded'') < 9.2\n    simscape.library.internal.moveLines2PThermoSensorR2018b(gcbh)\nend']);
    set_param(thermo2P_block,'LoadFcn',thermo2P_LoadFcn_new)




    pipeMA_block=sprintf('fl_lib/Moist Air/Elements/Pipe (MA)');
    pipeMA_LoadFcn=get_param(pipeMA_block,'LoadFcn');
    pipeMA_LoadFcn_new=sprintf([pipeMA_LoadFcn,'\nif get_param(bdroot, ''VersionLoaded'') < 10\n    simscape.library.internal.removeMoistureTraceGasCapR2019b(gcbh, 3)\nend']);
    set_param(pipeMA_block,'LoadFcn',pipeMA_LoadFcn_new)

    transConvMA_block=sprintf('fl_lib/Moist Air/Elements/Translational\nMechanical Converter\n(MA)');
    transConvMA_LoadFcn=get_param(transConvMA_block,'LoadFcn');
    transConvMA_LoadFcn_new=sprintf([transConvMA_LoadFcn,'\nif get_param(bdroot, ''VersionLoaded'') < 10\n    simscape.library.internal.removeMoistureTraceGasCapR2019b(gcbh, 4)\nend']);
    set_param(transConvMA_block,'LoadFcn',transConvMA_LoadFcn_new)

    rotConvMA_block=sprintf('fl_lib/Moist Air/Elements/Rotational\nMechanical Converter\n(MA)');
    rotConvMA_LoadFcn=get_param(rotConvMA_block,'LoadFcn');
    rotConvMA_LoadFcn_new=sprintf([rotConvMA_LoadFcn,'\nif get_param(bdroot, ''VersionLoaded'') < 10\n    simscape.library.internal.removeMoistureTraceGasCapR2019b(gcbh, 7)\nend']);
    set_param(rotConvMA_block,'LoadFcn',rotConvMA_LoadFcn_new)

    chamberMA_block=sprintf('fl_lib/Moist Air/Elements/Constant Volume\nChamber (MA)');
    chamberMA_LoadFcn=get_param(chamberMA_block,'LoadFcn');
    chamberMA_LoadFcn_new=sprintf([chamberMA_LoadFcn,'\nif get_param(bdroot, ''VersionLoaded'') < 10\n    simscape.library.internal.removeMoistureTraceGasCapR2019b(gcbh, str2num(get_param(gcbh, ''num_ports'')) + 4)\nend']);
    set_param(chamberMA_block,'LoadFcn',chamberMA_LoadFcn_new)




    rotConvIL_block=sprintf('fl_lib/Isothermal Liquid/Elements/Rotational\nMechanical Converter\n(IL)');
    rotConvIL_LoadFcn=get_param(rotConvIL_block,'LoadFcn');
    rotConvIL_LoadFcn_new=sprintf([rotConvIL_LoadFcn,'\nif get_param(bdroot, ''VersionLoaded'') < 10.3\n    simscape.library.internal.moveLinesR2021aILRotationalMechConverter(gcbh)\nend']);
    set_param(rotConvIL_block,'LoadFcn',rotConvIL_LoadFcn_new)



    ft={
...
    {'fl_lib/Hydraulic/Hydraulic Elements/Pressure Compensator',sprintf('sh_lib/Valves/Pressure Control\nValves/Pressure Compensator')}...
    ,{'fl_lib/Hydraulic/Hydraulic Elements/Annular Orifice','sh_lib/Orifices/Annular Orifice'}...
    ,{'fl_lib/Hydraulic/Hydraulic Elements/Fixed Orifice','sh_lib/Orifices/Fixed Orifice'}...
    ,{'fl_lib/Hydraulic/Hydraulic Elements/Variable Orifice','sh_lib/Orifices/Variable Orifice'}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Elements/Orifice with\nVariable Area Round\nHoles'),sprintf('sh_lib/Orifices/Orifice with\nVariable Area Round\nHoles')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Elements/Orifice with\nVariable Area Slot'),sprintf('sh_lib/Orifices/Orifice with\nVariable Area Slot')}...
...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Elements/Variable Volume\nChamber'),sprintf('fl_lib/Hydraulic/Hydraulic Elements/Hydraulic Piston\nChamber')}...
...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Sensors\nand Sources/Ideal Hydraulic Flow\nRate Source'),sprintf('fl_lib/Hydraulic/Hydraulic Sources/Hydraulic Flow Rate\nSource')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Sensors\nand Sources/Ideal Hydraulic\nPressure Source'),sprintf('fl_lib/Hydraulic/Hydraulic Sources/Hydraulic Pressure\nSource')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Sensors\nand Sources/Ideal Hydraulic Flow\nRate Sensor'),sprintf('fl_lib/Hydraulic/Hydraulic Sensors/Hydraulic Flow Rate\nSensor')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Sensors\nand Sources/Ideal Hydraulic\nPressure Sensor'),sprintf('fl_lib/Hydraulic/Hydraulic Sensors/Hydraulic Pressure\nSensor')}...
...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Sources/Ideal Hydraulic Flow\nRate Source'),sprintf('fl_lib/Hydraulic/Hydraulic Sources/Hydraulic Flow Rate\nSource')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Sources/Ideal Hydraulic\nPressure Source'),sprintf('fl_lib/Hydraulic/Hydraulic Sources/Hydraulic Pressure\nSource')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Sensors/Ideal Hydraulic Flow\nRate Sensor'),sprintf('fl_lib/Hydraulic/Hydraulic Sensors/Hydraulic Flow Rate\nSensor')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Sensors/Ideal Hydraulic\nPressure Sensor'),sprintf('fl_lib/Hydraulic/Hydraulic Sensors/Hydraulic Pressure\nSensor')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Elements/Constant Area\nOrifice'),sprintf('fl_lib/Hydraulic/Hydraulic Elements/Constant Area\nHydraulic Orifice')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Elements/Constant Volume\nChamber'),sprintf('fl_lib/Hydraulic/Hydraulic Elements/Constant Volume\nHydraulic Chamber')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Elements/Piston Chamber'),sprintf('fl_lib/Hydraulic/Hydraulic Elements/Hydraulic Piston\nChamber')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Elements/Resistive Tube'),sprintf('fl_lib/Hydraulic/Hydraulic Elements/Hydraulic Resistive\nTube')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Elements/Variable Area\nOrifice'),sprintf('fl_lib/Hydraulic/Hydraulic Elements/Variable Area\nHydraulic Orifice')}...
    ,{sprintf('fl_lib/Hydraulic/Hydraulic Elements/Variable Chamber'),sprintf('fl_lib/Hydraulic/Hydraulic Elements/Variable Hydraulic\nChamber')}...
    };


    ft=lAppend(ft,...
    'fl_lib/Mechanical',...
    'Mechanical Sensors\nand Sources','Mechanical Sensors',...
    {'Ideal Rotational\nMotion Sensor','Ideal Translational\nMotion Sensor',...
    'Ideal Force Sensor','Ideal Torque Sensor'});
    ft=lAppend(ft,...
    'fl_lib/Mechanical',...
    'Mechanical Sensors\nand Sources','Mechanical Sources',...
    {'Ideal Angular\nVelocity Source','Ideal Translational\nVelocity Source',...
    'Ideal Force Source','Ideal Torque Source'});

    ft=lAppend(ft,...
    'fl_lib/Thermal',...
    'Thermal Sensors and\nSources','Thermal Sensors',...
    {'Ideal Heat Flow\nSensor','Ideal Temperature\nSensor'});
    ft=lAppend(ft,...
    'fl_lib/Thermal',...
    'Thermal Sensors and\nSources','Thermal Sources',...
    {'Ideal Heat Flow\nSource','Ideal Temperature\nSource'});



    ft{end+1}={sprintf('fl_lib/Mechanical/Rotational Elements/Rotational Friction'),...
    sprintf('fl_lib/Mechanical/Rotational Elements/Rotational Friction'),...
    '0.0','8009000.1','simscape.library.internal.transformFrictionR2017a'};

    ft{end+1}={sprintf('fl_lib/Mechanical/Translational\nElements/Translational\nFriction'),...
    sprintf('fl_lib/Mechanical/Translational\nElements/Translational\nFriction'),...
    '0.0','8009000.1','simscape.library.internal.transformFrictionR2017a'};


    psList=simscape.compiler.mli.internal.PSLegacyList;
    for i=1:numel(psList)
        ft{end+1}={psList(i).oldLib,'',...
        'simscape.library.internal.transformPSLegacyBlocks'};
    end

    set_param(h,'ForwardingTable',ft);




    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Mechanical/Translational Elements/Translational Spring',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Mechanical/Translational Elements/Mass',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Mechanical/Translational Elements/Translational Hard Stop',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Mechanical/Rotational Elements/Rotational Spring',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Mechanical/Rotational Elements/Inertia',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Mechanical/Rotational Elements/Rotational Hard Stop',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Electrical/Electrical Elements/Capacitor',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Electrical/Electrical Elements/Inductor',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Electrical/Electrical Elements/Mutual Inductor',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal/Thermal Elements/Thermal Mass',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Hydraulic/Hydraulic Elements/Constant Volume Hydraulic Chamber',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Hydraulic/Hydraulic Elements/Fluid Inertia',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Hydraulic/Hydraulic Elements/Hydraulic Piston Chamber',...
    '0.0','8.31'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Hydraulic/Hydraulic Elements/Variable Hydraulic Chamber',...
    '0.0','8.31'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Temperature Reservoir (TL)',...
    'fl_lib/Thermal Liquid/Elements/Reservoir (TL)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Controlled Temperature Reservoir (TL)',...
    'fl_lib/Thermal Liquid/Elements/Controlled Reservoir (TL)'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Translational Mechanical Converter (TL)',...
    '0.0','8.71'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Rotational Mechanical Converter (TL)',...
    '0.0','8.71'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Reservoir (TL)',...
    '0.0','8.71'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Controlled Reservoir (TL)',...
    '0.0','8.71'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Pipe (TL)',...
    '0.0','8.71'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Infinite Flow Resistance (TL)',...
    '0.0','8.71'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Sensors/Mass Flow Rate & Thermal Flux Sensor (TL)',...
    'fl_lib/Thermal Liquid/Sensors/Mass & Energy Flow Rate Sensor (TL)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Utilities/Thermal Liquid Settings (TL)',...
    '0.0','8.71'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Pneumatic Absolute Reference',...
    'Pneumatic_lib/Pneumatic Elements/Pneumatic Absolute Reference'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Adiabatic Cup',...
    'Pneumatic_lib/Pneumatic Elements/Adiabatic Cup'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Pneumatic Atmospheric Reference',...
    'Pneumatic_lib/Pneumatic Elements/Pneumatic Atmospheric Reference'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Constant Volume Pneumatic Chamber',...
    'Pneumatic_lib/Pneumatic Elements/Constant Volume Pneumatic Chamber'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Infinite Pneumatic Resistance',...
    'Pneumatic_lib/Pneumatic Elements/Infinite Pneumatic Resistance'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Constant Area Pneumatic Orifice',...
    'Pneumatic_lib/Pneumatic Elements/Constant Area Pneumatic Orifice'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Constant Area Pneumatic Orifice (ISO 6358)',...
    'Pneumatic_lib/Pneumatic Elements/Constant Area Pneumatic Orifice (ISO 6358)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Pneumatic Piston Chamber',...
    'Pneumatic_lib/Pneumatic Elements/Pneumatic Piston Chamber'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Pneumatic Resistive Tube',...
    'Pneumatic_lib/Pneumatic Elements/Pneumatic Resistive Tube'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Rotary Pneumatic Piston Chamber',...
    'Pneumatic_lib/Pneumatic Elements/Rotary Pneumatic Piston Chamber'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Rotational Pneumatic- Mechanical Converter',...
    'Pneumatic_lib/Pneumatic Elements/Rotational Pneumatic- Mechanical Converter'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Elements/Variable Area Pneumatic Orifice',...
    'Pneumatic_lib/Pneumatic Elements/Variable Area Pneumatic Orifice'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Sensors/Pneumatic Mass & Heat Flow Sensor',...
    'Pneumatic_lib/Pneumatic Sensors/Pneumatic Mass & Heat Flow Sensor'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Sensors/Pneumatic Pressure & Temperature Sensor',...
    'Pneumatic_lib/Pneumatic Sensors/Pneumatic Pressure & Temperature Sensor'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Sources/Controlled Pneumatic Flow Rate Source',...
    'Pneumatic_lib/Pneumatic Sources/Controlled Pneumatic Flow Rate Source'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Sources/Controlled Pneumatic Pressure Source',...
    'Pneumatic_lib/Pneumatic Sources/Controlled Pneumatic Pressure Source'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Sources/Pneumatic Flow Rate Source',...
    'Pneumatic_lib/Pneumatic Sources/Pneumatic Flow Rate Source'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Sources/Pneumatic Pressure Source',...
    'Pneumatic_lib/Pneumatic Sources/Pneumatic Pressure Source'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Pneumatic/Pneumatic Utilities/Gas Properties',...
    'Pneumatic_lib/Pneumatic Utilities/Gas Properties'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Sensors/Mass & Energy Flow Sensor (2P)',...
    'fl_lib/Two-Phase Fluid/Sensors/Mass & Energy Flow Rate Sensor (2P)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Sensors/Volumetric Flow Sensor (2P)',...
    'fl_lib/Two-Phase Fluid/Sensors/Volumetric Flow Rate Sensor (2P)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Sources/Controlled Mass Flow Rate Source (2P)',...
    '0.0','8009000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Sources/Controlled Pressure Source (2P)',...
    '0.0','8009000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Sources/Controlled Volumetric Flow Rate Source (2P)',...
    '0.0','8009000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Sources/Mass Flow Rate Source (2P)',...
    '0.0','8009000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Sources/Pressure Source (2P)',...
    '0.0','8009000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Sources/Volumetric Flow Rate Source (2P)',...
    '0.0','8009000.1'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Hydraulic/Hydraulic Elements/Constant Area Hydraulic Orifice',...
    '0.0','8009000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Hydraulic/Hydraulic Elements/Variable Area Hydraulic Orifice',...
    '0.0','8009000.1'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal/Thermal Sources/Ideal Heat Flow Source',...
    'fl_lib/Thermal/Thermal Sources/Controlled Heat Flow Rate Source'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal/Thermal Sources/Ideal Temperature Source',...
    'fl_lib/Thermal/Thermal Sources/Controlled Temperature Source'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal/Thermal Sensors/Ideal Heat Flow Sensor',...
    'fl_lib/Thermal/Thermal Sensors/Heat Flow Rate Sensor'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal/Thermal Sensors/Ideal Temperature Sensor',...
    'fl_lib/Thermal/Thermal Sensors/Temperature Sensor'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Mechanical/Translational Elements/Translational Hard Stop',...
    '8.31','9000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Mechanical/Rotational Elements/Rotational Hard Stop',...
    '8.31','9000000.1'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Utilities/Two-Phase Fluid Properties (2P)',...
    '0.0','9002000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/Pipe (2P)',...
    '0.0','9002000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/Translational Mechanical Converter (2P)',...
    '0.0','9002000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/Rotational Mechanical Converter (2P)',...
    '0.0','9002000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/Reservoir (2P)',...
    '0.0','9002000.1'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Moist Air/Elements/2-Port Constant Volume Chamber (MA)',...
    'fl_lib/Moist Air/Elements/Constant Volume Chamber (MA)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Moist Air/Elements/3-Port Constant Volume Chamber (MA)',...
    'fl_lib/Moist Air/Elements/Constant Volume Chamber (MA)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Moist Air/Elements/Constant Volume Chamber (MA)',...
    '0.0','10000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Moist Air/Elements/Pipe (MA)',...
    '0.0','10000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Moist Air/Elements/Translational Mechanical Converter (MA)',...
    '0.0','10000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Moist Air/Elements/Rotational Mechanical Converter (MA)',...
    '0.0','10000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Moist Air/Elements/Variable Local Restriction (MA)',...
    'fl_lib/Moist Air/Elements/Local Restriction (MA)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Moist Air/Elements/Local Restriction (MA)',...
    '0.0','10000000.1'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/2-Port Constant Volume Chamber (TL)',...
    'fl_lib/Thermal Liquid/Elements/Constant Volume Chamber (TL)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/3-Port Constant Volume Chamber (TL)',...
    'fl_lib/Thermal Liquid/Elements/Constant Volume Chamber (TL)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Constant Volume Chamber (TL)',...
    '0.0','10000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Variable Local Restriction (TL)',...
    'fl_lib/Thermal Liquid/Elements/Local Restriction (TL)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Thermal Liquid/Elements/Local Restriction (TL)',...
    '0.0','10000000.1'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Gas/Elements/2-Port Constant Volume Chamber (G)',...
    'fl_lib/Gas/Elements/Constant Volume Chamber (G)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Gas/Elements/3-Port Constant Volume Chamber (G)',...
    'fl_lib/Gas/Elements/Constant Volume Chamber (G)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Gas/Elements/Constant Volume Chamber (G)',...
    '0.0','10000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Gas/Elements/Variable Local Restriction (G)',...
    'fl_lib/Gas/Elements/Local Restriction (G)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Gas/Elements/Local Restriction (G)',...
    '0.0','10000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Gas/Elements/Pipe (G)',...
    '0.0','10000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Gas/Elements/Translational Mechanical Converter (G)',...
    '0.0','10000000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Gas/Elements/Rotational Mechanical Converter (G)',...
    '0.0','10000000.1'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Isothermal Liquid/Elements/Translational Mechanical Converter (IL)'...
    ,'0.0','10003000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Isothermal Liquid/Elements/Rotational Mechanical Converter (IL)',...
    '0.0','10003000.1'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/Controlled Reservoir (2P)',...
    '0.0','10004000.1'});


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/2-Port Constant Volume Chamber (2P)',...
    'fl_lib/Two-Phase Fluid/Elements/Constant Volume Chamber (2P)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/3-Port Constant Volume Chamber (2P)',...
    'fl_lib/Two-Phase Fluid/Elements/Constant Volume Chamber (2P)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/Constant Volume Chamber (2P)',...
    '0.0','9002000.1'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/Variable Local Restriction (2P)',...
    'fl_lib/Two-Phase Fluid/Elements/Local Restriction (2P)'});
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'fl_lib/Two-Phase Fluid/Elements/Local Restriction (2P)',...
    '0.0','10006000.1'});


    validateNames=nesl_private('nesl_validatenames');
    validateNames(h);



    reorder_library({'fl_lib/Moist Air/Sources'},{sprintf('Moisture & Trace Gas\nSources')})

end

function ft=lAppend(ft,path,old,new,elements)



    oldPath=sprintf('%s/%s',sprintf(path),sprintf(old));
    newPath=sprintf('%s/%s',sprintf(path),sprintf(new));
    for i=1:length(elements)
        name=sprintf(elements{i});
        ft{end+1}={sprintf('%s/%s',oldPath,name),sprintf('%s/%s',newPath,name)};
    end

end

function reorder_library(sublibraryPath,blocksToMove)


    items=find_system(sublibraryPath,'SearchDepth',1);
    items=items(2:end);
    nItems=length(items);
    nReloc=length(blocksToMove);


    positionData=cell(nItems,1);
    centerPoints=cell(nItems,1);
    idx=zeros(1,nReloc);
    for i=1:nItems
        x=get_param(items(i),'Position');
        positionData{i}=x;
        centerPoints{i}=[(x{1}(1)+x{1}(3))/2,(x{1}(2)+x{1}(4))/2];
        blockName=get_param(items(i),'Name');
        for j=1:nReloc
            if strcmp(blockName,blocksToMove{j})
                idx(j)=i;
            end
        end
    end


    order=[];
    for j=1:nItems
        if isempty(find(idx==j,1))
            order=[order,j];%#ok
        end
    end
    newOrder=[order,idx];






    for i=1:nItems
        x_old=positionData{newOrder(i)};
        x0_old=centerPoints{newOrder(i)};
        x0_new=centerPoints{i};
        x_offset=x0_new(1)-x0_old(1);
        y_offset=x0_new(2)-x0_old(2);
        NewPosition=[x_old{1}(1)+x_offset,x_old{1}(2)+y_offset,x_old{1}(3)+x_offset,x_old{1}(4)+y_offset];
        newOrderBlock=items{newOrder(i),1};
        set_param(newOrderBlock,'Position',NewPosition);
    end

end