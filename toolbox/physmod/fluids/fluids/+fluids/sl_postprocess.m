function sl_postprocess(h)





    tank_block=sprintf('SimscapeFluids_lib/Thermal Liquid/Tanks & Accumulators/Tank (TL)');
    tank_LoadFcn=get_param(tank_block,'LoadFcn');
    new_tank_LoadFcn=sprintf([tank_LoadFcn,'\nif get_param(bdroot,''VersionLoaded'') < 10.4\n    fluids.internal.blockforwarding.transformR2021bTLTankConnections(gcbh)\nend']);
    set_param(tank_block,'LoadFcn',new_tank_LoadFcn);


    valve_block='SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Directional Control Valves/M-Way N-Position Directional Valve (IL)';
    set_param(valve_block,'MaskIconUnits','Autoscale')
    set_param(valve_block,'MaskIconFrame','off')
    set_param(valve_block,'MaskIconOpaque','transparent')
    set_param(valve_block,'MaskDisplay','Data=fluids.internal.directional_control_valves.MwayNposValveDrawIcon(gcbh); for i= 1:length(Data), patch(Data{i}(1,:), Data{i}(2,:), [0.1765, 0.1882, 0.6784]); end;');





    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/E-NTU Heat Exchanger (TL)',...
    'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/Heat Exchanger (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/E-NTU Heat Exchanger (TL-TL)',...
    'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/Heat Exchanger (TL-TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/Simple Heat Exchanger (G)',...
    'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/Heat Exchanger (G)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/Simple Heat Exchanger (G-G)',...
    'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/Heat Exchanger (G-G)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/Simple Heat Exchanger (G-TL)',...
    'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/Heat Exchanger (G-TL)'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Actuators/Double-Acting Actuator (TL-G)',...
    '0.0','9000000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Actuators/Double-Acting Actuator (TL)',...
    '0.0','9000000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Actuators/Single-Acting Actuator (TL)',...
    '0.0','9000000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Directional Control Valves/2-Way Directional Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Directional Control Valves/2-Way Directional Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Directional Control Valves/3-Way Directional Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Directional Control Valves/3-Way Directional Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Directional Control Valves/4-Way Directional Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Directional Control Valves/4-Way Directional Valve (TL)'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Orifices/Variable Area Orifice (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Variable Area Orifice (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Flow Coefficient Parameterized Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Flow Coefficient Parameterized Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Directional Control Valves/Check Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Directional Control Valves/Check Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Flow Control Valves/Ball Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Flow Control Valves/Ball Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Flow Control Valves/Gate Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Flow Control Valves/Gate Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Flow Control Valves/Temperature Control Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Flow Control Valves/Temperature Control Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Pressure Control Valves/Pressure Reducing Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Pressure Control Valves/Pressure Reducing Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves/Pressure Control Valves/Pressure Relief Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Pressure Control Valves/Pressure Relief Valve (TL)'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Interface',...
    'SimscapeFluids_lib/Fluid Network Interfaces/Interface (TL-IL)'})





    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Interface (TL-IL)',...
    '0.0','10003000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Actuators/Double-Acting Actuator (IL-G)',...
    'SimscapeFluids_lib/Fluid Network Interfaces/Actuators/Double-Acting Actuator (H-G)'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/Condenser Evaporator (2P-MA)',...
    '0.0','10002000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Tanks & Accumulators/Spring-Loaded Accumulator (IL)',...
    '0.0','10002000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Actuators/Single-Acting Actuator (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Actuators/Double-Acting Actuator (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Actuators/Single-Acting Rotary Actuator (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Actuators/Double-Acting Rotary Actuator (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Actuators/Rotating Single-Acting Actuator (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Actuators/Auxiliary Components/Cylinder Cushion (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Actuators/Auxiliary Components/Rotating Cylinder Force (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Actuators/Double-Acting Actuator (G-IL)',...
    '0.0','10003000.1'})



    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Directional Control Valves/4-Way Directional Valve (IL)',...
    'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Directional Control Valves/4-Way 3-Position Directional Valve (IL)'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Pumps & Motors/Fixed-Displacement Pump (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Pumps & Motors/Fixed-Displacement Motor (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Pumps & Motors/Variable-Displacement Pump (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Pumps & Motors/Variable-Displacement Motor (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Pumps & Motors/Pressure-Compensated Pump (IL)',...
    '0.0','10003000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Pumps & Motors/Centrifugal Pump (TL)',...
    '0.0','10003000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Directional Control Valves/Check Valve (TL)',...
    '0.0','10004000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Pressure Control Valves/Pressure Relief Valve (TL)',...
    '0.0','10004000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Turbomachinery/Fan (G)',...
    ''})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Directional Control Valves/3-Way Directional Valve (IL)',...
    '0.0','10004000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Tanks & Accumulators/Tank (TL)',...
    '0.0','10004000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Pumps & Motors/Fixed-Displacement Pump (TL)',...
    '0.0','10004000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Pumps & Motors/Fixed-Displacement Motor (TL)',...
    '0.0','10004000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Pumps & Motors/Variable-Displacement Pump (TL)',...
    '0.0','10004000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Pumps & Motors/Variable-Displacement Motor (TL)',...
    '0.0','10004000.1'})

    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Two-Phase Fluid/Tanks & Accumulators/Receiver Accumulator (2P)',...
    '0.0','10005000.1'})



    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Pipes & Fittings/Pipe (TL)',...
    '0.0','10005000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Directional Control Valves/4-Way 2-Position Directional Valve (IL)',...
    '0.0','10005000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Directional Control Valves/Check Valve (IL)',...
    '0.0','10005000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Pressure Control Valves/Pressure Relief Valve (IL)',...
    '0.0','10005000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Variable Area Orifice (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Orifice (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Directional Control Valves/2-Way Directional Valve (TL)',...
    '0.0','10005000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Directional Control Valves/3-Way Directional Valve (TL)',...
    '0.0','10005000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Directional Control Valves/4-Way Directional Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Directional Control Valves/4-Way 3-Position Directional Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Flow Control Valves/Ball Valve (TL)',...
    'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Flow Control Valves/Poppet Valve (TL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Thermal Liquid/Valves & Orifices/Flow Control Valves/Gate Valve (TL)',...
    '0.0','10005000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/System-Level Condenser Evaporator (2P-MA)',...
    '0.0','10005000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Fluid Network Interfaces/Heat Exchangers/System-Level Heat Exchanger (2P-2P)',...
    '0.0','10005000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Turbomachinery/Compressor (G)',...
    '0.0','10005000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Two-Phase Fluid/Valves & Orifices/Flow Control Valves/Thermostatic Expansion Valve (2P)',...
    '0.0','10006000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Orifice ISO 6358 (G)',...
    'SimscapeFluids_lib/Gas/Valves & Orifices/Orifice (G)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Variable Orifice ISO 6358 (G)',...
    'SimscapeFluids_lib/Gas/Valves & Orifices/Orifice (G)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Directional Control Valves/2-Way Directional Valve (G)',...
    '0.0','10006000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Directional Control Valves/3-Way Directional Valve (G)',...
    '0.0','10006000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Directional Control Valves/4-Way Directional Valve (G)',...
    'SimscapeFluids_lib/Gas/Valves & Orifices/Directional Control Valves/4-Way 3-Position Directional Valve (G)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Directional Control Valves/Check Valve (G)',...
    '0.0','10006000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Directional Control Valves/Pilot-Operated Check Valve (G)',...
    '0.0','10006000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Flow Control Valves/Ball Valve (G)',...
    'SimscapeFluids_lib/Gas/Valves & Orifices/Flow Control Valves/Poppet Valve (G)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Flow Control Valves/Gate Valve (G)',...
    '0.0','10006000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Flow Control Valves/Temperature Control Valve (G)',...
    '0.0','10006000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Pressure Control Valves/Pressure Reducing Valve (G)',...
    '0.0','10006000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Gas/Valves & Orifices/Pressure Control Valves/Pressure Relief Valve (G)',...
    '0.0','10006000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Flow Control Valves/Counterbalance Valve (IL)',...
    'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Pressure Control Valves/Counterbalance Valve (IL)'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Pressure Control Valves/Pressure Compensator Valve (IL)',...
    '0.0','10006000.1'})
    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Valves & Orifices/Pressure Control Valves/Pressure-Reducing Valve (IL)',...
    '0.0','10006000.1'})


    simscape.internal.blockforwarding.registerBlockUpdates(h,...
    {'SimscapeFluids_lib/Isothermal Liquid/Actuators/Auxiliary Components/Rotating Cylinder Force (IL)',...
    '10003000.1','10006000.1'})



    fluidsLibName=get_param(h,'Name');
    addLink(fluidsLibName,['Hydraulics',newline,'(Isothermal)'],'sh_lib')
    addLink([fluidsLibName,'/Isothermal Liquid/Valves & Orifices/Valve Actuators & Forces'],...
    'Valve Actuators',[fluidsLibName,'/Valve Actuators'])



    fluids.internal.diagrams.PHDiagram2P.createBlock(...
    [fluidsLibName,'/Two-Phase Fluid/Utilities'],'P-H Diagram (2P)')


    nesl_libautolayout=nesl_private('nesl_libautolayout');
    nesl_libautolayout(h)



    validateNames=nesl_private('nesl_validatenames');
    validateNames(h)



    reorderLibrary([fluidsLibName,'/Fluid Network Interfaces'],...
    {'Actuators','Heat Exchangers','Tanks & Accumulators'})
    reorderLibrary([fluidsLibName,'/Fluid Network Interfaces/Heat Exchangers'],...
    'Fundamental Components')
    reorderLibrary([fluidsLibName,'/Thermal Liquid/Valves & Orifices'],...
    {'Directional Control Valves','Flow Control Valves','Pressure Control Valves'});
    reorderLibrary([fluidsLibName,'/Gas/Valves & Orifices'],...
    {'Directional Control Valves','Flow Control Valves','Pressure Control Valves'});
    reorderLibrary([fluidsLibName,'/Isothermal Liquid/Actuators'],...
    'Auxiliary Components');
    reorderLibrary([fluidsLibName,'/Isothermal Liquid/Pumps & Motors'],...
    'Auxiliary Components');


    foundation.internal.parameterization.updateLibraryPartsSupport(h,...
    fullfile(matlabroot,'toolbox/physmod/fluids/fluids'));

end



function addLink(library,linkName,linkDestination)




    libraryPath=find_system(library,'SearchDepth',0);
    linkBlock=add_block('built-in/Subsystem',[libraryPath{1},'/',linkName]);


    set_param(linkBlock,'OpenFcn',['open_system(''',linkDestination,''')'])


    copyLib='SimscapeFluids_lib/Thermal Liquid';


    copyParams={'Position','Tag','DropShadow','ShowName','MaskDisplay'};


    for i=1:length(copyParams)
        set_param(linkBlock,copyParams{i},get_param(copyLib,copyParams{i}))
    end

end



function reorderLibrary(libraryPath,blocksToMove)




    if iscell(libraryPath)
        libraryPath=libraryPath{1};
    end
    items=find_system(libraryPath,'SearchDepth',1,'Parent',libraryPath);

    items=pm.sli.internal.getSortedBlkNames(items);
    nItems=numel(items);
    if~iscell(blocksToMove)
        blocksToMove={blocksToMove};
    end
    nReloc=numel(blocksToMove);


    position=cell2mat(get_param(items,'Position'));
    center=[(position(:,1)+position(:,3))/2,(position(:,2)+position(:,4))/2];
    offset=position-[center(:,1),center(:,2),center(:,1),center(:,2)];


    idx=false(nItems,1);
    for i=1:nReloc
        blocksToMovePath=find_system(libraryPath,'SearchDepth',1,'Name',blocksToMove{i});
        idx=idx|strcmp(items,blocksToMovePath);
    end


    newOrder=1:nItems;
    newOrder=[newOrder(~idx),newOrder(idx)];


    items=items(newOrder);
    offset=offset(newOrder,:);
    position=offset+[center(:,1),center(:,2),center(:,1),center(:,2)];


    for i=1:nItems
        set_param(items{i},'position',position(i,:))
    end

end
