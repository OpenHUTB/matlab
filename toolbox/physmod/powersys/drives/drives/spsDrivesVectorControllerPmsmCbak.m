function[]=spsDrivesVectorControllerPmsmCbak(block)


    detailLevel=get_param(block,'detailLevel');
    nb_ph=get_param(block,'nb_ph');

    handlemask=Simulink.Mask.get(block);
    hdle_daxis_gbox=handlemask.getDialogControl('daxis_gbox');
    hdle_qaxis_gbox=handlemask.getDialogControl('qaxis_gbox');

    fluxConstantChoice=get_param(block,'MachineConstant');
    switch fluxConstantChoice
    case 'Flux linkage established by magnets (V.s)'
        lambdaVisible='on';
        voltageCstVisible='off';
        torqueCstVisible='off';

    case 'Voltage Constant (V_peak L-L / krpm)'
        lambdaVisible='off';
        voltageCstVisible='on';
        torqueCstVisible='off';

    case 'Torque Constant (N.m / A_peak)'
        lambdaVisible='off';
        voltageCstVisible='off';
        torqueCstVisible='on';
    end

    switch detailLevel
    case 'Detailed'
        switch nb_ph
        case '3'
            modulationType=get_param(block,'modulationType');
            switch modulationType

            case 'Hysteresis'
                if~isequal(get_param(block,'LabelModeActiveChoice'),detailLevel)
                    set_param(block,'LabelModeActiveChoice',[detailLevel,'_',nb_ph,'ph']);
                end

                maskEnables={...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'off',...
                'off',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'off',...
                'off',...
                'off',...
                'off',...
                };
                maskVisibilities={...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'off',...
                'off',...
                'on',...
                'on',...
                lambdaVisible,...
                voltageCstVisible,...
                torqueCstVisible,...
                'off',...
                'off',...
                'off',...
                'off',...
                };
                hdle_daxis_gbox.Visible='off';
                hdle_qaxis_gbox.Visible='off';

            case 'SVM'
                set_param(block,'LabelModeActiveChoice',[detailLevel,'_SVM','_','3ph']);
                set_param(block,'nb_ph','3');
                maskEnables={...
                'on',...
                'off',...
                'on',...
                'on',...
                'off',...
                'off',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                'on',...
                };
                maskVisibilities={...
                'on',...
                'on',...
                'on',...
                'on',...
                'off',...
                'off',...
                'on',...
                'on',...
                'on',...
                'on',...
                lambdaVisible,...
                voltageCstVisible,...
                torqueCstVisible,...
                'on',...
                'on',...
                'on',...
                'on',...
                };
                hdle_daxis_gbox.Visible='on';
                hdle_qaxis_gbox.Visible='on';

            end
        case '5'
            if~isequal(get_param(block,'LabelModeActiveChoice'),detailLevel)
                set_param(block,'LabelModeActiveChoice',[detailLevel,'_',nb_ph,'ph']);
            end

            maskEnables={...
            'on',...
            'on',...
            'off',...
            'on',...
            'on',...
            'on',...
            'off',...
            'off',...
            'on',...
            'on',...
            'on',...
            'on',...
            'on',...
            'off',...
            'off',...
            'off',...
            'off',...
            };
            maskVisibilities={...
            'on',...
            'on',...
            'off',...
            'on',...
            'on',...
            'on',...
            'off',...
            'off',...
            'on',...
            'on',...
            lambdaVisible,...
            voltageCstVisible,...
            torqueCstVisible,...
            'off',...
            'off',...
            'off',...
            'off',...
            };
            hdle_daxis_gbox.Visible='off';
            hdle_qaxis_gbox.Visible='off';
        end
    case 'Average'
        if~isequal(get_param(block,'LabelModeActiveChoice'),detailLevel)
            set_param(block,'LabelModeActiveChoice',[detailLevel,'_',nb_ph,'ph']);
        end

        maskEnables={...
        'on',...
        'on',...
        'off',...
        'on',...
        'off',...
        'off',...
        'off',...
        'off',...
        'on',...
        'on',...
        'on',...
        'on',...
        'on',...
        'off',...
        'off',...
        'off',...
        'off',...
        };
        maskVisibilities={...
        'on',...
        'on',...
        'off',...
        'on',...
        'off',...
        'off',...
        'off',...
        'off',...
        'on',...
        'on',...
        lambdaVisible,...
        voltageCstVisible,...
        torqueCstVisible,...
        'off',...
        'off',...
        'off',...
        'off',...
        };
        hdle_daxis_gbox.Visible='off';
        hdle_qaxis_gbox.Visible='off';

    otherwise
        error(['Unknown detail level ''',detailLevel,'''.']);
    end
    if sps_Authoring(bdroot(block))
        set_param(block,'MaskEnables',maskEnables);
    end
    set_param(block,'MaskVisibilities',maskVisibilities);
