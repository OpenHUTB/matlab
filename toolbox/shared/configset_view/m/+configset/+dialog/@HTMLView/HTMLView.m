classdef HTMLView<handle





    properties(Constant)
        Tag='Tag_ConfigSet_Web_Widget';
        Name='Configuration Set View';
    end

    properties
Dlg
CEF

ID
Source
    end

    properties(Hidden)
cfg


data

pending


fSourceListener
fConnectorListener

errorMap
        params={}
        isWebPageReady=false;
        dataDelayed=false;

ts
        hasUnappliedChanges=false
        inRefresh=false
        isSecondSourceNameChanged=false

    end


    properties(Access=private)
        transaction=0
    end
    methods(Access=?qeConfigSet.Dialog)
        startTransaction(obj,from)
        stopTransaction(obj,from)
        resetTransaction(obj,from)
    end

    properties(Access=private)
        deferredMsgs={}
        deferredRefresh=false
        error=[];
    end

    properties(Access=?configset.dialog.MultiView)
        needRefreshWhenSwitch=false;
    end

    methods
        function obj=HTMLView(varargin)
            cs=[];
            if nargin>0
                cs=varargin{1};
            end



            if nargin>1
                obj.cfg=varargin{2};
            end

            obj.init();
            if~isempty(cs)
                obj.setSource(cs,false);
            end
        end

        function delete(obj)
            adp=obj.Source;
            if~isempty(adp)
                adp.detachView();
            end
        end
    end

    methods

        setSource(obj,cs,refresh)

        createPage(obj,~)
        pageReady(obj,~)
        jobDone(obj,msg)


        view(obj)
        debug(obj)

        dlgStruct=getDialogSchema(obj)
        web=getSchema(obj)
        launchQtDialog(obj)
        launchCEFWindow(obj)
        out=getDisplayIcon(obj)


        close(obj,dlg,action)
        [out,msg]=preApplyCallback(obj,dlg)
        [out,msg]=apply(obj,dlg)
        helpButton(obj,dlg)
        alert(obj,title,msg)
        enableApplyButton(obj,enable)
        dialogAction(obj,action)


        destroy(obj,~,~)


        refresh(obj)
        callback(obj,msg)
        action(obj,command,varargin)


        showGroup(obj,component)
        highlight(obj,name,reason)
        clearHighlights(obj)

        cs=getDialogSource(obj)




        locateInDialog(obj,name)
        launchHelpPage(obj,name)


        msg(obj,data)
        layout(obj,data)
        coderTarget(obj,data)
        clearDirty(obj)
        selectTreeNode(obj,id)
        actionDispatcher(obj,~,eventData)


        prepareData(obj,varargin)
        data=getData(obj,paramOrName)
        [json,layoutFeatures]=getCurrentComponentJSON(obj,cc,pid,lazy)
        [json,layoutFeatures]=getComponentJSON(obj,cc,pid,lazy)
        json=getAutoGeneratedData(obj,cc,pid)
        sendParams(obj,params)
        cid=getCID(obj,cc)


        publish(obj,subChannel,data)
        out=evalJS(obj,js)


        [url,debugUrl]=getUrl(obj)


        evalM(obj,data)


        ret=getContextMenuEnabled(obj,menu,param)


        addConfigSet(obj,data)
        selectConfigSet(obj,data)

    end

    methods(Access=private)
        init(obj)

        update(obj,~,eventData)
        updateError(obj,error,flag)
        updateCallback(obj,~)

    end

    methods(Static,Hidden)
        out=debugMode(varargin)
        out=uptMode(varargin)
        out=getConfigSetRefDialogSchema(hController,schemaName)



        out=mergeStructs(s1,s2)

        out=useCEF(varargin)
    end

    methods(Hidden)
        chrome(obj)
        bool=isInTransaction(obj)
    end
end


