function serializedData=serializeDataForFromWks(...
    inputData,interpolation,blkHandle,bdhandle)




    model=get_param(bdhandle,'Name');
    [aobHierarchy,leafSignalOffset,portBusTypes]=...
    Simulink.SimulationData.util.retrieveAoBHierarchy(model,blkHandle,inputData);

    parent=get_param(blkHandle,'Parent');
    parentType=get_param(parent,'Type');
    isFrmWksInSigEditor=isequal(parentType,'block')&&...
    isequal(get_param(parent,'MaskType'),'SignalEditor');
    if~isFrmWksInSigEditor
        serializer=Simulink.SimulationData.SerializeInput.FromWksSerializer(...
        model,...
        inputData,...
        aobHierarchy,...
        interpolation,...
portBusTypes...
        );
    else

        serializer=Simulink.SimulationData.SerializeInput.SignalEditorSerializer(...
        model,...
        inputData,...
        aobHierarchy,...
        interpolation,...
portBusTypes...
        );
    end

    try
        serializedData=serializer.serialize(blkHandle);
    catch ME
        throwAsCaller(ME);
    end

    serializedData=...
    Simulink.SimulationData.util.addLeafOffsetsToSerializedDataset(...
    serializedData,...
    aobHierarchy,...
leafSignalOffset...
    );
end
