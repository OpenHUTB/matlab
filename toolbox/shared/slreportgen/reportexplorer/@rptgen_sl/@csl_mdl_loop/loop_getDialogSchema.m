function loopContent=loop_getDialogSchema(this,name)




    if~builtin('license','checkout','SIMULINK_Report_Gen')
        loopContent=this.buildErrorMessage('panel',true);
        return;

    end

    nModels=length(this.LoopList);

    loopContent=cell(1,nModels);
    for i=nModels:-1:1
        loopContent{i}=this.LoopList(i).getDisplayLabel;
    end


    if nModels<1
        enableUp=false;
        enableDown=false;
        wLoopList=this.dlgText('No models to loop');
    else
        mdlIdx=max(1,min(this.DlgLoopListIdx+1,nModels));
        wLoopList=getDialogSchema(this.LoopList(mdlIdx),'panel');
        enableUp=mdlIdx>1;
        enableDown=mdlIdx<nModels;
    end

    listFrame=this.dlgContainer({
    struct('Type','pushbutton',...
    'Enabled',enableUp,...
    'FilePath',fullfile(matlabroot,'toolbox/rptgen/resources/move_up.png'),...
    'ObjectMethod','dlgMoveUp',...
    'MethodArgs',{{'%dialog'}},...
    'ArgDataTypes',{{'handle'}},...
    'ToolTip',getString(message('RptgenSL:rsl_csl_mdl_loop:moveUpLabel')),...
    'ColSpan',[1,1],...
    'RowSpan',[2,2])
    struct('Type','pushbutton',...
    'Enabled',enableDown,...
    'FilePath',fullfile(matlabroot,'toolbox/rptgen/resources/move_down.png'),...
    'ObjectMethod','dlgMoveDown',...
    'MethodArgs',{{'%dialog'}},...
    'ArgDataTypes',{{'handle'}},...
    'ToolTip',getString(message('RptgenSL:rsl_csl_mdl_loop:moveDownLabel')),...
    'ColSpan',[1,1],...
    'RowSpan',[3,3])
    struct('Type','pushbutton',...
    'Enabled',nModels>1,...
    'FilePath',fullfile(matlabroot,'toolbox/rptgen/resources/delete.png'),...
    'ObjectMethod','dlgDelete',...
    'MethodArgs',{{'%dialog'}},...
    'ArgDataTypes',{{'handle'}},...
    'ToolTip',getString(message('RptgenSL:rsl_csl_mdl_loop:removeCurrentLabel')),...
    'ColSpan',[1,1],...
    'RowSpan',[4,4])
    struct('Type','pushbutton',...
    'FilePath',fullfile(matlabroot,'toolbox/rptgen/resources/SimulinkModelAdd.png'),...
    'ObjectMethod','dlgAdd',...
    'MethodArgs',{{'%dialog'}},...
    'ArgDataTypes',{{'handle'}},...
    'ToolTip',getString(message('RptgenSL:rsl_csl_mdl_loop:addNewModelLabel')),...
    'Tag','AddModel',...
    'ColSpan',[1,1],...
    'RowSpan',[5,5])
    this.dlgWidget('DlgLoopListIdx',...
    'Type','listbox',...
    'MultiSelect',false,...
    'DialogRefresh',true,...
    'ListKeyPressCallback',@listboxDelete,...
    'Entries',loopContent,...
    'ColSpan',[2,2],...
    'RowSpan',[1,6])
    },getString(message('RptgenSL:rsl_csl_mdl_loop:modelsToIncludeLabel')),...
    'LayoutGrid',[6,2],...
    'RowStretch',[1,0,0,0,0,1]);




    loopContent=this.dlgContainer({
    this.dlgSet(wLoopList,...
    'ColSpan',[2,3],...
    'RowSpan',[1,1])
    this.dlgSet(listFrame,...
    'ColSpan',[1,1],...
    'RowSpan',[1,1])
    },'','LayoutGrid',[1,3]);




    function listboxDelete(dlgH,tag,key)








        if strcmpi(key,'del')
            dlgDelete(dlgH.getDialogSource,dlgH);
        end


