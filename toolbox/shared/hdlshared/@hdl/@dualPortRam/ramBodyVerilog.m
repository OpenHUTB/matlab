function str=ramBodyVerilog(this,clk,ce,di,wa,we,ra,wdo,rdo)








    if this.dataIsComplex
        dipt=['[',num2str(di(1).Width*2-1),':0] '];
    elseif di.Width>1
        dipt=['[',num2str(di.Width-1),':0] '];
    else
        dipt='';
    end

    str=[...
    '  reg ',dipt,'ram [',num2str(2^wa.Width-1),':0];\n'...
    ,'  reg ',dipt,'dout_a;\n'...
    ,'  reg ',dipt,'dout_b;\n'...
    ,'\n'...
    ];


    str=[str...
    ,'  integer i;\n'...
    ,'\n'...
    ,'  initial begin\n'...
    ,'    for (i=0; i<=',num2str(2^wa.Width-1),'; i=i+1) begin\n'...
    ,'      ram[i] = 0;\n'...
    ,'    end\n'...
    ,'    dout_a = 0;\n'...
    ,'    dout_b = 0;\n'...
    ,'  end\n'...
    ,'\n'...
    ];


    if this.hasClkEn==1
        indent=2;
        s2={[blanks(6),'if (',ce.Name,' == 1''b1) begin\n'],[blanks(6),'end\n']};
    else
        indent=0;
        s2={'',''};
    end



    if strfind(di(1).PortType,'signed')
        si={'$unsigned(',')'};
        so={'$signed(',')'};
    else
        si={'',''};
        so={'',''};
    end

    if~this.dataIsComplex
        s4=[si{1},di.Name,si{2}];
    else
        s4=['{',si{1},di(1).Name,si{2},', ',si{1},di(2).Name,si{2},'}'];
    end

    procLabel=hdlgetparameter('clock_process_label');

    procLabel=hdlgetparameter('clock_process_label');
    clock_edge=hdlgetparameter('clockedge')==0;
    if clock_edge
        clk_str=['  always @ (posedge ',clk.Name,')\n'];
    else
        clk_str=['  always @ (negedge ',clk.Name,')\n'];
    end


    str=[str...
    ,clk_str...
    ,'    begin: ',this.entityName,procLabel,'\n'...
    ,s2{1}...
    ,[blanks(indent+6),'if (',we.Name,' == 1''b1) begin\n']...
    ,[blanks(indent+6),'  ram[',wa.Name,'] <= ',s4,';\n']...
    ,[blanks(indent+6),'  dout_a <= ',s4,';\n']...
    ,[blanks(indent+6),'end\n']...
    ,[blanks(indent+6),'else begin\n']...
    ,[blanks(indent+6),'  dout_a <= ram[',wa.Name,'];\n']...
    ,[blanks(indent+6),'end\n']...
    ,[blanks(indent+6),'dout_b <= ram[',ra.Name,'];\n']...
    ,s2{2}...
    ,'    end // ',this.entityName,procLabel,'\n'...
    ,'\n'...
    ];


    if~this.dataIsComplex
        str=[str...
        ,'  assign ',wdo.Name,' = ',so{1},'dout_a',so{2},';\n'...
        ,'  assign ',rdo.Name,' = ',so{1},'dout_b',so{2},';\n'...
        ,'\n'...
        ];
    else
        [s7,s8]=this.getVectorSlice(wdo(1).Width);

        str=[str...
        ,'  assign ',wdo(1).Name,' = ',so{1},'dout_a',s7,so{2},';\n'...
        ,'  assign ',wdo(2).Name,' = ',so{1},'dout_a',s8,so{2},';\n'...
        ,'  assign ',rdo(1).Name,' = ',so{1},'dout_b',s7,so{2},';\n'...
        ,'  assign ',rdo(2).Name,' = ',so{1},'dout_b',s8,so{2},';\n'...
        ,'\n'...
        ];
    end

    str=[str...
    ,'endmodule // ',this.entityName,'\n'...
    ,'\n'...
    ];

