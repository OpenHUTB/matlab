function str=ramBodyVerilog(this,clk,ce,di,wa,we,do)








    if this.dataIsComplex
        dipt=['[',num2str(di(1).Width*2-1),':0] '];
    elseif di.Width>1
        dipt=['[',num2str(di.Width-1),':0] '];
    else
        dipt='';
    end

    str=[...
    '  reg ',dipt,'ram [',num2str(2^wa.Width-1),':0];\n'...
    ,'  reg ',dipt,'data_int;\n'...
    ,'\n'...
    ];


    str=[str...
    ,'  integer i;\n'...
    ,'\n'...
    ,'  initial begin\n'...
    ,'    for (i=0; i<=',num2str(2^wa.Width-1),'; i=i+1) begin\n'...
    ,'      ram[i] = 0;\n'...
    ,'    end\n'...
    ,'    data_int = 0;\n'...
    ,'  end\n'...
    ,'\n'...
    ];


    if this.hasClkEn==1
        indent=2;
        s2={[blanks(6),'if (',ce.Name,' == 1''b1) begin\n'],[blanks(6),'end\n']};
    else
        indent=0;
        s2={'',''};
    end



    if strfind(di(1).PortType,'signed')
        si={'$unsigned(',')'};
        so={'$signed(',')'};
    else
        si={'',''};
        so={'',''};
    end

    if~this.dataIsComplex
        s4=[si{1},di.Name,si{2}];
        s7='';
        s8='';
    else
        s4=['{',si{1},di(1).Name,si{2},', ',si{1},di(2).Name,si{2},'}'];
        [s7,s8]=this.getVectorSlice(do(1).Width);
    end

    if this.readNewData==1
        indent2=2;
        s3={[blanks(indent+6),'  data_int <= ',s4,';\n'],...
        [blanks(indent+6),'else begin\n'],...
        [blanks(indent+6),'end\n']};
    else
        indent2=0;
        s3={'','',''};
    end

    procLabel=hdlgetparameter('clock_process_label');
    clock_edge=hdlgetparameter('clockedge')==0;
    if clock_edge
        clk_str=['  always @ (posedge ',clk.Name,')\n'];
    else
        clk_str=['  always @ (negedge ',clk.Name,')\n'];
    end

    str=[str...
    ,clk_str...
    ,'    begin: ',this.entityName,procLabel,'\n'...
    ,s2{1}...
    ,[blanks(indent+6),'if (',we.Name,' == 1''b1) begin\n']...
    ,[blanks(indent+6),'  ram[',wa.Name,'] <= ',s4,';\n']...
    ,s3{1}...
    ,[blanks(indent+6),'end\n']...
    ,s3{2}...
    ,[blanks(indent+indent2+6),'data_int <= ram[',wa.Name,'];\n']...
    ,s3{3}...
    ,s2{2}...
    ,'    end // ',this.entityName,procLabel,'\n'...
    ,'\n'...
    ,'  assign ',do(1).Name,' = ',so{1},'data_int',s7,so{2},';\n'...
    ];

    if this.dataIsComplex
        str=[str...
        ,'  assign ',do(2).Name,' = ',so{1},'data_int',s8,so{2},';\n'...
        ];
    end

    str=[str...
    ,'\n'...
    ,'endmodule // ',this.entityName,'\n'...
    ,'\n'...
    ];


