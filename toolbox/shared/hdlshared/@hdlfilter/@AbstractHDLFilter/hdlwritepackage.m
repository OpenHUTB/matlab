function hdlwritepackage(~)






    if hdlgetparameter('vhdl_package_required')
        createdate=datestr(now,31);

        hdlsetparameter('vhdl_package_comment',...
        ['----------------------------------------------------------------\n',...
        '--\n',...
        '-- Package: ',hdlgetparameter('vhdl_package_name'),'\n',...
        '-- Created: ',createdate,'\n',...
        hdlformatcomment(hdlgetparameter('tool_file_comment')),...
        hdlformatcomment(hdlgetparameter('rcs_cvs_tag')),...
        '--\n',...
        '----------------------------------------------------------------\n']);

        hdlsetparameter('vhdl_package_decl',...
        ['PACKAGE ',hdlgetparameter('vhdl_package_name'),' IS\n\n']);
        hdlsetparameter('vhdl_package_decl_end',...
        ['END ',hdlgetparameter('vhdl_package_name'),';\n\n']);
        hdlsetparameter('vhdl_package_body_decl',...
        ['PACKAGE BODY ',hdlgetparameter('vhdl_package_name'),' IS\n\n']);
        hdlsetparameter('vhdl_package_body_end',...
        ['END ',hdlgetparameter('vhdl_package_name'),';\n\n']);

        hdl_arch_typedefs=hdlUniquifyTypeDefinitions(hdlgetparameter('vhdl_package_type_defs'));

        vhdlpackage=[hdlgetparameter('vhdl_package_comment'),...
        hdlgetparameter('vhdl_package_library'),...
        hdlgetparameter('vhdl_package_decl'),...
        hdl_arch_typedefs,...
        hdlgetparameter('vhdl_package_constants'),...
        hdlgetparameter('vhdl_package_function_headers'),...
        hdlgetparameter('vhdl_package_decl_end'),...
        hdlgetparameter('vhdl_package_body_decl'),...
        hdlgetparameter('vhdl_package_functions'),...
        hdlgetparameter('vhdl_package_body_end')];

        pkgname=fullfile(hdlGetCodegendir,...
        [hdlgetparameter('module_prefix'),...
        hdlgetparameter('vhdl_package_name'),...
        hdlgetparameter('filename_suffix')]);

        pkgfid=fopen(pkgname,'w');

        if pkgfid==-1
            error(message('HDLShared:hdlfilter:fileerror',pkgname));
        end

        fprintf(pkgfid,vhdlpackage);
        fclose(pkgfid);
    end



