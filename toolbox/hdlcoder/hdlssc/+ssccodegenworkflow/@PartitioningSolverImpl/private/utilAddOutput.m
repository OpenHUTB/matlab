function[hOutput,OutputBlkLatency]=utilAddOutput(parent,position,code,globalInfo,latencyStrategy)




    dataType=globalInfo.dataType;

    hOutput=utilAddSubsystem(parent,'Output',position);

    outputName=getfullname(hOutput);

    hInU=add_block('hdlsllib/Sources/In1',strcat(outputName,'/U'),...
    'MakeNameUnique','on',...
    'Position',[175,108,205,122]);
    hInX=add_block('hdlsllib/Sources/In1',strcat(outputName,'/State'),...
    'MakeNameUnique','on',...
    'Position',[175,58,205,72]);
    hInT=add_block('hdlsllib/Sources/In1',strcat(outputName,'/t'),...
    'MakeNameUnique','on',...
    'Position',[175,158,205,172]);
    hInMode=add_block('hdlsllib/Sources/In1',strcat(outputName,'/Mode'),...
    'MakeNameUnique','on',...
    'Position',[175,58,205,72]);

    hOut=add_block('hdlsllib/Sinks/Out1',strcat(outputName,'/State Out'),...
    'MakeNameUnique','on',...
    'Position',[530,108,560,122]);

    fModechart=matlab.internal.feature("SSC2HDLModechart");

    if(fModechart&&globalInfo.numQs>0)
        hInQ=add_block('hdlsllib/Sources/In1',strcat(outputName,'/Q'),...
        'MakeNameUnique','on',...
        'Position',[175,58,205,72]);


        hInCI=add_block('hdlsllib/Sources/In1',strcat(outputName,'/CI'),...
        'MakeNameUnique','on',...
        'Position',[175,58,205,72]);
    end

    OutputBlkLatency=0;
    if~isempty(code)

        numStates=globalInfo.numStates;
        numInputs=globalInfo.numInputs;
        numModes=globalInfo.totalModes;
        numQs=globalInfo.numQs;
        numCIs=globalInfo.numCIs;

        if numInputs<1
            numInputs=1;
        end
        if numModes<1
            numModes=1;
        end

        if(fModechart&&numQs>0)
            if(numCIs<1)
                numCIs=1;
            end
            argDims={[numStates,1],...
            [numInputs,1],...
            [1,1],...
            [numModes,1],...
            [1,numQs],...
            [1,numCIs]};
        else

            argDims={[numStates,1],...
            [numInputs,1],...
            [1,1],...
            [numModes,1]};

        end

        [hF,MlBlkInfo]=utilAddML2SLSubsystem(outputName,code,[285,41,445,189],...
        dataType,argDims,globalInfo.sampleTime,latencyStrategy,numQs>0);

        linePorts=cell(5,2);

        linePorts(1,:)={strcat(get_param(hInU,'name'),'/1'),...
        strcat(get_param(hF,'name'),'/2')};

        linePorts(2,:)={strcat(get_param(hInX,'name'),'/1'),...
        strcat(get_param(hF,'name'),'/1')};

        linePorts(3,:)={strcat(get_param(hInT,'name'),'/1'),...
        strcat(get_param(hF,'name'),'/3')};

        linePorts(4,:)={strcat(get_param(hInMode,'name'),'/1'),...
        strcat(get_param(hF,'name'),'/4')};
        if(fModechart&&numQs>0)

            hQDelay=add_block('hdlsllib/Discrete/Delay',strcat(outputName,'/Delay'),...
            'MakeNameUnique','on',...
            'DelayLength','1',...
            'Position',[240,223,270,257]);

            hCIDelay=add_block('hdlsllib/Discrete/Delay',strcat(outputName,'/Delay1'),...
            'MakeNameUnique','on',...
            'DelayLength','1',...
            'Position',[240,273,270,307]);

            linePorts(6,:)={strcat(get_param(hInQ,'name'),'/1'),...
            strcat(get_param(hQDelay,'name'),'/1')};
            linePorts(7,:)={strcat(get_param(hInCI,'name'),'/1'),...
            strcat(get_param(hCIDelay,'name'),'/1')};
            linePorts(8,:)={strcat(get_param(hQDelay,'name'),'/1'),...
            strcat(get_param(hF,'name'),'/5')};
            linePorts(9,:)={strcat(get_param(hCIDelay,'name'),'/1'),...
            strcat(get_param(hF,'name'),'/6')};
        end

        linePorts(5,:)={strcat(get_param(hF,'name'),'/1'),...
        strcat(get_param(hOut,'name'),'/1')};

    else


        htermBlkU=add_block('hdlsllib/Sinks/Terminator',strcat(outputName,'/Valid Out'),...
        'MakeNameUnique','on');
        htermBlkX=add_block('hdlsllib/Sinks/Terminator',strcat(outputName,'/Valid Out'),...
        'MakeNameUnique','on');
        htermBlkT=add_block('hdlsllib/Sinks/Terminator',strcat(outputName,'/Valid Out'),...
        'MakeNameUnique','on');
        htermBlkMode=add_block('hdlsllib/Sinks/Terminator',strcat(outputName,'/Valid Out'),...
        'MakeNameUnique','on');

        hDefaultOut=add_block('hdlsllib/Sources/Constant',strcat(outputName,'/Constant'),...
        'MakeNameUnique','on',...
        'Value',strcat(dataType,'(0)'),...
        'Position',[370,60,400,90]);

        linePorts(1,:)={strcat(get_param(hInU,'name'),'/1'),...
        strcat(get_param(htermBlkU,'name'),'/1')};

        linePorts(2,:)={strcat(get_param(hInX,'name'),'/1'),...
        strcat(get_param(htermBlkX,'name'),'/1')};

        linePorts(3,:)={strcat(get_param(hInT,'name'),'/1'),...
        strcat(get_param(htermBlkT,'name'),'/1')};

        linePorts(4,:)={strcat(get_param(hInMode,'name'),'/1'),...
        strcat(get_param(htermBlkMode,'name'),'/1')};

        linePorts(5,:)={strcat(get_param(hDefaultOut,'name'),'/1'),...
        strcat(get_param(hOut,'name'),'/1')};


        if(fModechart&&globalInfo.numQs>0)
            htermBlkQ=add_block('hdlsllib/Sinks/Terminator',strcat(outputName,'/Valid Out'),...
            'MakeNameUnique','on');
            htermBlkCI=add_block('hdlsllib/Sinks/Terminator',strcat(outputName,'/Valid Out'),...
            'MakeNameUnique','on');

            linePorts(6,:)={strcat(get_param(hInQ,'name'),'/1'),...
            strcat(get_param(htermBlkQ,'name'),'/1')};
            linePorts(7,:)={strcat(get_param(hInCI,'name'),'/1'),...
            strcat(get_param(htermBlkCI,'name'),'/1')};
        end

        MlBlkInfo.mlfbBlkLatency=0;
    end
    add_line(outputName,linePorts(:,1),linePorts(:,2),'AutoRouting','smart')
    Simulink.BlockDiagram.arrangeSystem(outputName,'FullLayout','True','Animation','False');

    OutputBlkLatency=MlBlkInfo.mlfbBlkLatency;

end


