

function WrtAddrGenerator(~,hN,WrtAddrGenInSigs,WrtAddrGenOutSigs,hBoolT,hAddrT,...
    slRate,blockInfo)


    hWrtAddrGenN=pirelab.createNewNetwork(...
    'Name','WrtAddrGenerator',...
    'InportNames',{'validIn','ready','lowerTriangEnb','fwdSubEnb',...
    'matMultEnb','wrtAddrStore','wrtAddrLT','wrtAddrFwdSub',...
    'wrtAddrMatMult'},...
    'InportTypes',[hBoolT,hBoolT,hBoolT,hBoolT,hBoolT,...
    WrtAddrGenInSigs(6).Type,...
    WrtAddrGenInSigs(7).Type,...
    WrtAddrGenInSigs(8).Type,...
    WrtAddrGenInSigs(9).Type],...
    'InportRates',slRate*ones(1,9),...
    'OutportNames',{'wrtAddr'},...
    'OutportTypes',pirelab.createPirArrayType(hAddrT,[blockInfo.RowSize+1,0]));

    hWrtAddrGenN.setTargetCompReplacementCandidate(true);


    for ii=1:numel(hWrtAddrGenN.PirOutputSignals)
        hWrtAddrGenN.PirOutputSignals(ii).SimulinkRate=slRate;
    end

    hWrtAddrGenNinSigs=hWrtAddrGenN.PirInputSignals;
    hWrtAddrGenNoutSigs=hWrtAddrGenN.PirOutputSignals;

    LogicalOperator_out1_s26=l_addSignal(hWrtAddrGenN,sprintf('Logical\nOperator_out1'),...
    hBoolT,slRate);
    Constant19_out1_s8=l_addSignal(hWrtAddrGenN,'Constant19_out1',hAddrT,slRate);
    SwitchReciprocalS=l_addSignal(hWrtAddrGenN,'SwitchReciprocal',hAddrT,slRate);

    wrtAddrLTSplitS=hWrtAddrGenNinSigs(7).split;
    wrtAddrLTSplitSigS=wrtAddrLTSplitS.PirOutputSignals;

    if blockInfo.RowSize>1
        wrtAddrStoreSplitS=hWrtAddrGenNinSigs(6).split;
        wrtAddrStoreSplitSigS=wrtAddrStoreSplitS.PirOutputSignals;

        wrtAddrFwdSubSplitS=hWrtAddrGenNinSigs(8).split;
        wrtAddrFwdSubSplitSigS=wrtAddrFwdSubSplitS.PirOutputSignals;


        wrtAddrMatMultSplitS=hWrtAddrGenNinSigs(9).split;
        wrtAddrMatMultSplitSigS=wrtAddrMatMultSplitS.PirOutputSignals;


    else
        wrtAddrStoreSplitS=hWrtAddrGenNinSigs(6);
        wrtAddrStoreSplitSigS=wrtAddrStoreSplitS;


        wrtAddrFwdSubSplitS=hWrtAddrGenNinSigs(8);
        wrtAddrFwdSubSplitSigS=wrtAddrFwdSubSplitS;

        wrtAddrMatMultSplitS=hWrtAddrGenNinSigs(9);
        wrtAddrMatMultSplitSigS=wrtAddrMatMultSplitS;
    end

    pirelab.getLogicComp(hWrtAddrGenN,...
    [hWrtAddrGenNinSigs(1),hWrtAddrGenNinSigs(2)],...
    LogicalOperator_out1_s26,...
    'and',sprintf('Logical\nOperator'));

    pirelab.getConstComp(hWrtAddrGenN,...
    Constant19_out1_s8,...
    0,...
    'Constant19','on',1,'','','');
    WrtAddrArray=hdlhandles(blockInfo.RowSize,1);

    SwitchStoreS=hdlhandles(blockInfo.RowSize,1);
    SwitchLTS=hdlhandles(blockInfo.RowSize,1);
    SwitchFwdSubS=hdlhandles(blockInfo.RowSize,1);
    SwitchMatMultS=hdlhandles(blockInfo.RowSize,1);

    for itr=1:blockInfo.RowSize

        suffix=['_',int2str(itr)];

        SwitchStoreS(itr)=l_addSignal(hWrtAddrGenN,['SwitchStore',suffix],hAddrT,slRate);
        SwitchLTS(itr)=l_addSignal(hWrtAddrGenN,['SwitchLT',suffix],hAddrT,slRate);
        SwitchFwdSubS(itr)=l_addSignal(hWrtAddrGenN,['SwitchFwdSub',suffix],hAddrT,slRate);
        SwitchMatMultS(itr)=l_addSignal(hWrtAddrGenN,['SwitchMatMult',suffix],hAddrT,slRate);



        pirelab.getSwitchComp(hWrtAddrGenN,...
        [wrtAddrStoreSplitSigS(itr),SwitchLTS(itr)],...
        SwitchStoreS(itr),...
        LogicalOperator_out1_s26,['SwitchStore',suffix],...
        '~=',0,'Floor','Wrap');


        pirelab.getSwitchComp(hWrtAddrGenN,...
        [wrtAddrLTSplitSigS(itr),SwitchFwdSubS(itr)],...
        SwitchLTS(itr),...
        hWrtAddrGenNinSigs(3),['SwitchLT',suffix],...
        '~=',0,'Floor','Wrap');


        pirelab.getSwitchComp(hWrtAddrGenN,...
        [wrtAddrFwdSubSplitSigS(itr),SwitchMatMultS(itr)],...
        SwitchFwdSubS(itr),...
        hWrtAddrGenNinSigs(4),['SwitchFwdSub',suffix],...
        '~=',0,'Floor','Wrap');


        pirelab.getSwitchComp(hWrtAddrGenN,...
        [wrtAddrMatMultSplitSigS(itr),Constant19_out1_s8],...
        SwitchMatMultS(itr),...
        hWrtAddrGenNinSigs(5),['SwitchMatMult',suffix],...
        '~=',0,'Floor','Wrap');

        WrtAddrArray(itr)=SwitchStoreS(itr);
    end

    pirelab.getSwitchComp(hWrtAddrGenN,...
    [wrtAddrLTSplitSigS(blockInfo.RowSize+1),Constant19_out1_s8],...
    SwitchReciprocalS,...
    hWrtAddrGenNinSigs(3),'SwitchReciprocal',...
    '~=',0,'Floor','Wrap');

    pirelab.getMuxComp(hWrtAddrGenN,...
    [(WrtAddrArray(1:end))',SwitchReciprocalS],...
    hWrtAddrGenNoutSigs(1),...
    'concatenate');

    pirelab.instantiateNetwork(hN,hWrtAddrGenN,WrtAddrGenInSigs,WrtAddrGenOutSigs,...
    [hWrtAddrGenN.Name,'_inst']);

end


function hS=l_addSignal(hN,sigName,pirTyp,simulinkRate)
    hS=hN.addSignal;
    hS.Name=sigName;
    hS.Type=pirTyp;
    hS.SimulinkHandle=-1;
    hS.SimulinkRate=simulinkRate;
end
