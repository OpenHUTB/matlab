

function MatMultEnableBlock(~,hN,MatMultEnbInSigs,MatMultEnbOutSigs,hBoolT,...
    slRate)


    hMatMultEnbN=pirelab.createNewNetwork(...
    'Name','MatMultEnableBlock',...
    'InportNames',{'fwdSubDone','invDone'},...
    'InportTypes',[hBoolT,hBoolT],...
    'InportRates',slRate*ones(1,2),...
    'OutportNames',{'matMultEnb'},...
    'OutportTypes',hBoolT);

    hMatMultEnbN.setTargetCompReplacementCandidate(true);


    for ii=1:numel(hMatMultEnbN.PirOutputSignals)
        hMatMultEnbN.PirOutputSignals(ii).SimulinkRate=slRate;
    end

    hMatMultEnbNinSigs=hMatMultEnbN.PirInputSignals;
    hMatMultEnbNoutSigs=hMatMultEnbN.PirOutputSignals;


    Constant11_out1_s2=l_addSignal(hMatMultEnbN,'Constant11_out1',hBoolT,slRate);
    Constant12_out1_s3=l_addSignal(hMatMultEnbN,'Constant12_out1',hBoolT,slRate);
    Switch11_out1_s5=l_addSignal(hMatMultEnbN,'Switch11_out1',hBoolT,slRate);
    Switch12_out1_s6=l_addSignal(hMatMultEnbN,'Switch12_out1',hBoolT,slRate);


    pirelab.getConstComp(hMatMultEnbN,...
    Constant11_out1_s2,...
    1,...
    'Constant11','on',0,'','','');

    pirelab.getConstComp(hMatMultEnbN,...
    Constant12_out1_s3,...
    0,...
    'Constant12','on',1,'','','');

    pirelab.getIntDelayComp(hMatMultEnbN,...
    Switch11_out1_s5,...
    hMatMultEnbNoutSigs(1),...
    1,'Delay4',...
    false,...
    0,0,[],0,0);

    pirelab.getSwitchComp(hMatMultEnbN,...
    [Constant11_out1_s2,Switch12_out1_s6],...
    Switch11_out1_s5,...
    hMatMultEnbNinSigs(1),'Switch11',...
    '~=',0,'Floor','Wrap');

    pirelab.getSwitchComp(hMatMultEnbN,...
    [Constant12_out1_s3,hMatMultEnbNoutSigs(1)],...
    Switch12_out1_s6,...
    hMatMultEnbNinSigs(2),'Switch12',...
    '~=',0,'Floor','Wrap');


    pirelab.instantiateNetwork(hN,hMatMultEnbN,MatMultEnbInSigs,MatMultEnbOutSigs,...
    [hMatMultEnbN.Name,'_inst']);
end


function hS=l_addSignal(hN,sigName,pirTyp,simulinkRate)
    hS=hN.addSignal;
    hS.Name=sigName;
    hS.Type=pirTyp;
    hS.SimulinkHandle=-1;
    hS.SimulinkRate=simulinkRate;
end
