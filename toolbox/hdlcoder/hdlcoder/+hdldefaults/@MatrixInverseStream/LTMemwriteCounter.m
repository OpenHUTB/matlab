

function LTMemwriteCounter(~,hN,LTMemwriteCounterInSigs,LTMemwriteCounterOutSigs,...
    hBoolT,hCounterT,slRate,blockInfo)


    hLTMemwriteCounterN=pirelab.createNewNetwork(...
    'Name','LTMemwriteCounter',...
    'InportNames',{'rowDone','diagValidOut','nonDiagValidOut'},...
    'InportTypes',[hBoolT,hBoolT,hBoolT],...
    'InportRates',slRate*ones(1,3),...
    'OutportNames',{'writeCount'},...
    'OutportTypes',hCounterT);

    hLTMemwriteCounterN.setTargetCompReplacementCandidate(true);


    for ii=1:numel(hLTMemwriteCounterN.PirOutputSignals)
        hLTMemwriteCounterN.PirOutputSignals(ii).SimulinkRate=slRate;
    end

    hLTMemwriteCounterNinSigs=hLTMemwriteCounterN.PirInputSignals;
    hLTMemwriteCounterNoutSigs=hLTMemwriteCounterN.PirOutputSignals;

    LogicalOperator_out1_s4=l_addSignal(hLTMemwriteCounterN,sprintf('Logical\nOperator_out1'),...
    hBoolT,slRate);
    memWrtCountOutS=l_addSignal(hLTMemwriteCounterN,'memWrtCountOut',hCounterT,slRate);

    pirelab.getCounterComp(hLTMemwriteCounterN,...
    [hLTMemwriteCounterNinSigs(1),LogicalOperator_out1_s4],...
    memWrtCountOutS,...
    'Count limited',1,1,blockInfo.RowSize,1,0,1,0,'HDL Counter',1);

    pirelab.getIntDelayComp(hLTMemwriteCounterN,...
    memWrtCountOutS,...
    hLTMemwriteCounterNoutSigs(1),...
    0,'Delay',...
    0,...
    0,0,[],0,0);


    pirelab.getLogicComp(hLTMemwriteCounterN,...
    [hLTMemwriteCounterNinSigs(2),hLTMemwriteCounterNinSigs(3)],...
    LogicalOperator_out1_s4,...
    'or',sprintf('Logical\nOperator'));

    pirelab.instantiateNetwork(hN,hLTMemwriteCounterN,LTMemwriteCounterInSigs,LTMemwriteCounterOutSigs,...
    [hLTMemwriteCounterN.Name,'_inst']);
end



function hS=l_addSignal(hN,sigName,pirTyp,simulinkRate)
    hS=hN.addSignal;
    hS.Name=sigName;
    hS.Type=pirTyp;
    hS.SimulinkHandle=-1;
    hS.SimulinkRate=simulinkRate;
end
