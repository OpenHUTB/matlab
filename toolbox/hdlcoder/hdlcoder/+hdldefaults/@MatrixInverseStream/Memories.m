

function Memories(~,hN,MemoriesInSigs,MemoriesOutSigs,...
    hBoolT,hAddrT,hInputDataT,slRate,blockInfo)



    hMemoriesN=pirelab.createNewNetwork(...
    'Name','Memories',...
    'InportNames',{'wrtEnb','wrtAddr','wrtData','rdAddr'},...
    'InportTypes',[pirelab.createPirArrayType(hBoolT,[blockInfo.RowSize+1,0]),...
    pirelab.createPirArrayType(hAddrT,[blockInfo.RowSize+1,0]),...
    pirelab.createPirArrayType(hInputDataT,[blockInfo.RowSize+1,0]),...
    pirelab.createPirArrayType(hAddrT,[blockInfo.RowSize+1,0])],...
    'InportRates',slRate*ones(1,4),...
    'OutportNames',{'rdData'},...
    'OutportTypes',pirelab.createPirArrayType(hInputDataT,[blockInfo.RowSize+1,0]));


    for ii=1:numel(hMemoriesN.PirOutputSignals)
        hMemoriesN.PirOutputSignals(ii).SimulinkRate=slRate;
    end

    hMemoriesNinSigs=hMemoriesN.PirInputSignals;
    hMemoriesNoutSigs=hMemoriesN.PirOutputSignals;


    wrtEnbSplitS=hMemoriesNinSigs(1).split;
    wrtAddrSplitS=hMemoriesNinSigs(2).split;
    wrtDataSplitS=hMemoriesNinSigs(3).split;
    rdAddrSplitS=hMemoriesNinSigs(4).split;

    rdData=hMemoriesNoutSigs(1);

    hInputDataT=pir_single_t;

    RdDataArray=hdlhandles(blockInfo.RowSize+1,1);

    ReadDataS=hdlhandles(blockInfo.RowSize+1,1);

    hUfix1T=hMemoriesN.getType('FixedPoint','Signed',false,'WordLength',1,...
    'FractionLength',0);

    hUfix2T=hMemoriesN.getType('FixedPoint','Signed',false,'WordLength',2,...
    'FractionLength',0);

    wrtEnbUfix1S=hdlhandles(blockInfo.RowSize+1,1);
    if blockInfo.RowSize<=2
        wrtAddrUfix2S=hdlhandles(blockInfo.RowSize+1,1);
        rdAddrUfix2S=hdlhandles(blockInfo.RowSize+1,1);
    end

    for i=1:blockInfo.RowSize+1

        suffix=['_',int2str(i)];
        wrtEnbUfix1S(i)=l_addSignal(hMemoriesN,['wrtEnbUfix1',suffix],hUfix1T,slRate);

        pirelab.getDTCComp(hMemoriesN,...
        wrtEnbSplitS.PirOutputSignals(i),...
        wrtEnbUfix1S(i),...
        'Floor','Wrap','RWV','Data Type Conversion');
    end

    if(blockInfo.RowSize<=2)
        for j=1:blockInfo.RowSize+1
            suffix1=['_',int2str(j)];
            wrtAddrUfix2S(j)=l_addSignal(hMemoriesN,['wrtAddrUfix2',suffix1],hUfix2T,slRate);
            rdAddrUfix2S(j)=l_addSignal(hMemoriesN,['rdAddrUfix2',suffix1],hUfix2T,slRate);

            pirelab.getDTCComp(hMemoriesN,...
            wrtAddrSplitS.PirOutputSignals(j),...
            wrtAddrUfix2S(j),...
            'Floor','Wrap','RWV','Data Type Conversion');

            pirelab.getDTCComp(hMemoriesN,...
            rdAddrSplitS.PirOutputSignals(j),...
            rdAddrUfix2S(j),...
            'Floor','Wrap','RWV','Data Type Conversion');
        end
    end

    for itr=1:blockInfo.RowSize+1

        suffix=['_',int2str(itr)];
        ReadDataS(itr)=l_addSignal(hMemoriesN,['_',suffix],hInputDataT,slRate);

        if(blockInfo.RowSize<=2)
            pirelab.getSimpleDualPortRamComp(hMemoriesN,...
            [wrtDataSplitS.PirOutputSignals(itr),wrtAddrUfix2S(itr),...
            wrtEnbUfix1S(itr),...
            rdAddrUfix2S(itr)],...
            ReadDataS(itr),...
            ['SimpleDualPortRAM_generic',suffix],1,...
            -1,[],' ',...
            []);
        else
            pirelab.getSimpleDualPortRamComp(hMemoriesN,...
            [wrtDataSplitS.PirOutputSignals(itr),wrtAddrSplitS.PirOutputSignals(itr),...
            wrtEnbUfix1S(itr),...
            rdAddrSplitS.PirOutputSignals(itr)],...
            ReadDataS(itr),...
            ['SimpleDualPortRAM_generic',suffix],1,...
            -1,[],' ',...
            []);
        end

        RdDataArray(itr)=ReadDataS(itr);
    end

    pirelab.getMuxComp(hMemoriesN,...
    RdDataArray(1:end),...
    rdData,...
    'rd_out_concat');

    pirelab.instantiateNetwork(hN,hMemoriesN,MemoriesInSigs,MemoriesOutSigs,...
    [hMemoriesN.Name,'_inst']);

end


function hS=l_addSignal(hN,sigName,pirTyp,simulinkRate)
    hS=hN.addSignal;
    hS.Name=sigName;
    hS.Type=pirTyp;
    hS.SimulinkHandle=-1;
    hS.SimulinkRate=simulinkRate;
end
