
function DataValidGenerator(~,hN,DataVldGenInSigs,DataVldGenOutSigs,hBoolT,...
    hCounterT,slRate,blockInfo)


    hDataVldGenN=pirelab.createNewNetwork(...
    'Name','DataValidGenerator',...
    'InportNames',{'startPulse','fwdSubEnb','rowProcDone','colCount'},...
    'InportTypes',[hBoolT,hBoolT,hBoolT,hCounterT],...
    'InportRates',slRate*ones(1,4),...
    'OutportNames',{'rowCountEn','colCountEn','valid'},...
    'OutportTypes',[hBoolT,hBoolT,hBoolT]);

    hDataVldGenN.setTargetCompReplacementCandidate(true);


    for ii=1:numel(hDataVldGenN.PirOutputSignals)
        hDataVldGenN.PirOutputSignals(ii).SimulinkRate=slRate;
    end

    hDataVldGenNinSigs=hDataVldGenN.PirInputSignals;
    hDataVldGenNoutSigs=hDataVldGenN.PirOutputSignals;




    hUnsignedFix4T=hDataVldGenN.getType('FixedPoint','Signed',false,'WordLength',4,'FractionLength',0);

    CompareToConstant_out1_s4=l_addSignal(hDataVldGenN,sprintf('Compare\nTo Constant_out1'),hBoolT,slRate);
    CompareToConstant1_out1_s5=l_addSignal(hDataVldGenN,sprintf('Compare\nTo Constant1_out1'),hBoolT,slRate);
    Constant1_out1_s7=l_addSignal(hDataVldGenN,'Constant1_out1',hBoolT,slRate);
    Constant3_out1_s8=l_addSignal(hDataVldGenN,'Constant3_out1',hBoolT,slRate);
    Delay_out1_s9=l_addSignal(hDataVldGenN,'Delay_out1',hBoolT,slRate);
    HDLCounter_out1_s11=l_addSignal(hDataVldGenN,'HDL Counter_out1',hUnsignedFix4T,slRate);
    LogicalOperator_out1_s12=l_addSignal(hDataVldGenN,sprintf('Logical\nOperator_out1'),hBoolT,slRate);
    LogicalOperator10_out1_s13=l_addSignal(hDataVldGenN,sprintf('Logical\nOperator10_out1'),hBoolT,slRate);
    LogicalOperator11_out1_s14=l_addSignal(hDataVldGenN,sprintf('Logical\nOperator11_out1'),hBoolT,slRate);
    LogicalOperator8_out1_s16=l_addSignal(hDataVldGenN,sprintf('Logical\nOperator8_out1'),hBoolT,slRate);
    Switch_out1_s17=l_addSignal(hDataVldGenN,'Switch_out1',hBoolT,slRate);
    Switch1_out1_s18=l_addSignal(hDataVldGenN,'Switch1_out1',hBoolT,slRate);
    Switch2_out1_s19=l_addSignal(hDataVldGenN,'Switch2_out1',hBoolT,slRate);
    row_read_done_out1_s20=l_addSignal(hDataVldGenN,'row_read_done_out1',hBoolT,slRate);


    pirelab.getConstComp(hDataVldGenN,...
    Constant1_out1_s7,...
    1,...
    'Constant1','on',0,'','','');


    pirelab.getConstComp(hDataVldGenN,...
    Constant3_out1_s8,...
    0,...
    'Constant3','on',1,'','','');


    pirelab.getIntDelayComp(hDataVldGenN,...
    row_read_done_out1_s20,...
    hDataVldGenNoutSigs(1),...
    1,'Delay1',...
    false,...
    0,0,[],0,0);


    pirelab.getCompareToValueComp(hDataVldGenN,...
    hDataVldGenNinSigs(4),...
    CompareToConstant_out1_s4,...
    '==',1,...
    sprintf('Compare\nTo Constant'),0);

    if(strcmp(blockInfo.latencyStrategy,'MAX'))
        delayHold=12;
    elseif(strcmp(blockInfo.latencyStrategy,'MIN'))
        delayHold=7;
    end

    if(strcmp(blockInfo.latencyStrategy,'ZERO'))

        pirelab.getIntDelayComp(hDataVldGenN,...
        Switch1_out1_s18,...
        hDataVldGenNoutSigs(3),...
        1,'Delay',...
        false,...
        0,0,[],0,0);
    else

        pirelab.getIntDelayComp(hDataVldGenN,...
        Switch1_out1_s18,...
        Delay_out1_s9,...
        1,'Delay',...
        false,...
        0,0,[],0,0);

        pirelab.getCounterComp(hDataVldGenN,...
        LogicalOperator_out1_s12,...
        HDLCounter_out1_s11,...
        'Count limited',1,1,delayHold,0,0,1,0,'HDL Counter',1);

        pirelab.getCompareToValueComp(hDataVldGenN,...
        HDLCounter_out1_s11,...
        CompareToConstant1_out1_s5,...
        '>',1,...
        sprintf('Compare\nTo Constant1'),0);


        pirelab.getCompareToValueComp(hDataVldGenN,...
        HDLCounter_out1_s11,...
        hDataVldGenNoutSigs(3),...
        '==',delayHold,...
        sprintf('Compare\nTo Constant2'),0);


        pirelab.getLogicComp(hDataVldGenN,...
        [CompareToConstant1_out1_s5,Delay_out1_s9],...
        LogicalOperator_out1_s12,...
        'or',sprintf('Logical\nOperator'));
    end



    pirelab.getLogicComp(hDataVldGenN,...
    [hDataVldGenNinSigs(1),hDataVldGenNinSigs(2)],...
    LogicalOperator10_out1_s13,...
    'and',sprintf('Logical\nOperator10'));


    pirelab.getLogicComp(hDataVldGenN,...
    [hDataVldGenNinSigs(2),hDataVldGenNinSigs(3)],...
    LogicalOperator11_out1_s14,...
    'and',sprintf('Logical\nOperator11'));


    pirelab.getLogicComp(hDataVldGenN,...
    [hDataVldGenNoutSigs(3),LogicalOperator8_out1_s16],...
    hDataVldGenNoutSigs(2),...
    'and',sprintf('Logical\nOperator7'));


    pirelab.getLogicComp(hDataVldGenN,...
    CompareToConstant_out1_s4,...
    LogicalOperator8_out1_s16,...
    'not',sprintf('Logical\nOperator8'));


    pirelab.getSwitchComp(hDataVldGenN,...
    [Constant3_out1_s8,hDataVldGenNoutSigs(3)],...
    Switch_out1_s17,...
    CompareToConstant_out1_s4,'Switch',...
    '~=',0,'Floor','Wrap');


    pirelab.getSwitchComp(hDataVldGenN,...
    [Constant1_out1_s7,Switch2_out1_s19],...
    Switch1_out1_s18,...
    LogicalOperator10_out1_s13,'Switch1',...
    '~=',0,'Floor','Wrap');


    pirelab.getSwitchComp(hDataVldGenN,...
    [Constant1_out1_s7,Switch_out1_s17],...
    Switch2_out1_s19,...
    LogicalOperator11_out1_s14,'Switch2',...
    '~=',0,'Floor','Wrap');


    pirelab.getLogicComp(hDataVldGenN,...
    [hDataVldGenNoutSigs(3),CompareToConstant_out1_s4],...
    row_read_done_out1_s20,...
    'and','rowReadDone');

    pirelab.instantiateNetwork(hN,hDataVldGenN,DataVldGenInSigs,DataVldGenOutSigs,...
    [hDataVldGenN.Name,'_inst']);

end


function hS=l_addSignal(hN,sigName,pirTyp,simulinkRate)
    hS=hN.addSignal;
    hS.Name=sigName;
    hS.Type=pirTyp;
    hS.SimulinkHandle=-1;
    hS.SimulinkRate=simulinkRate;
end


