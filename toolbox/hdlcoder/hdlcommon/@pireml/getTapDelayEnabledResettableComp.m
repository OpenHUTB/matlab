function cgirComp=getTapDelayEnabledResettableComp(hN,hSignalsIn,hSignalsOut,...
    delayNumber,compName,initVal,delayOrder,includeCurrent,resettype,...
    hEnbSignals,hRstSignal)















    narginchk(8,11);
    if(nargin<11)
        hRstSignal='';
    end

    if(nargin<10)
        hEnbSignals='';
    end

    if(nargin<9)
        resettype='';
    end

    hwSemantics=hN.hasSLHWFriendlySemantics||hN.getWithinHWFriendlyHierarchy;

    hasExtEnable=~isempty(hEnbSignals);
    hasExtReset=~isempty(hRstSignal);


    if hasExtEnable&&hasExtReset
        delayType=hdldelaytypeenum.DelayEnabledResettable;
    elseif hasExtEnable&&~hasExtReset
        delayType=hdldelaytypeenum.DelayEnabled;
    elseif~hasExtEnable&&hasExtReset
        delayType=hdldelaytypeenum.DelayResettable;
    else
        delayType=hdldelaytypeenum.Delay;
    end

    [indimlen,~]=pirelab.getVectorTypeInfo(hSignalsIn(1));
    assert(isscalar(indimlen));


    if length(initVal)==1
        initVal=repmat(initVal,1,indimlen*delayNumber);
    end

    [~,clkEnb,~]=hN.getClockBundle(hSignalsIn,1,1,0);
    initVal=reshape(pirelab.getTypeInfoAsFi(hSignalsOut.Type,'Floor','Wrap',...
    initVal,false),1,indimlen*delayNumber);
    switch delayType
    case hdldelaytypeenum.Delay
        cgirComp=hN.addComponent2(...
        'kind','cgireml',...
        'Name',compName,...
        'InputSignals',hSignalsIn,...
        'OutputSignals',hSignalsOut,...
        'EMLFileName','hdleml_tapdelay',...
        'EMLParams',{delayNumber,initVal,includeCurrent,delayOrder},...
        'EMLFlag_RunLoopUnrolling',false);
    case hdldelaytypeenum.DelayEnabledResettable
        if hwSemantics
            cgirComp=hN.addComponent2(...
            'kind','cgireml',...
            'Name',compName,...
            'InputSignals',hSignalsIn,...
            'OutputSignals',hSignalsOut,...
            'EnableSignals',clkEnb,...
            'ExternalEnableSignal',hEnbSignals,...
            'ExternalSynchronousResetSignal',hRstSignal,...
            'EMLFileName','hdleml_tapdelay',...
            'EMLParams',{delayNumber,initVal,includeCurrent,delayOrder},...
            'EMLFlag_RunLoopUnrolling',false);
            cgirComp.setIsSynchronousRegister(true);
        else
            cgirComp=hN.addComponent2(...
            'kind','cgireml',...
            'Name',compName,...
            'InputSignals',[hSignalsIn,hEnbSignals,hRstSignal],...
            'OutputSignals',hSignalsOut,...
            'EnableSignals',clkEnb,...
            'ExternalEnableSignal',hEnbSignals,...
            'ExternalSynchronousResetSignal',hRstSignal,...
            'EMLFileName','hdleml_tapdelay_enabled_resettable_classic',...
            'EMLParams',{delayNumber,initVal,includeCurrent,delayOrder},...
            'EMLFlag_RunLoopUnrolling',false);
        end

    case hdldelaytypeenum.DelayEnabled
        if hwSemantics
            cgirComp=hN.addComponent2(...
            'kind','cgireml',...
            'Name',compName,...
            'InputSignals',hSignalsIn,...
            'OutputSignals',hSignalsOut,...
            'EnableSignals',clkEnb,...
            'ExternalEnableSignal',hEnbSignals,...
            'EMLFileName','hdleml_tapdelay',...
            'EMLParams',{delayNumber,initVal,includeCurrent,delayOrder},...
            'EMLFlag_RunLoopUnrolling',false);
        else
            cgirComp=hN.addComponent2(...
            'kind','cgireml',...
            'Name',compName,...
            'InputSignals',[hSignalsIn,hEnbSignals],...
            'OutputSignals',hSignalsOut,...
            'EnableSignals',clkEnb,...
            'ExternalEnableSignal',hEnbSignals,...
            'EMLFileName','hdleml_tapdelay_enabled_classic',...
            'EMLParams',{delayNumber,initVal,includeCurrent,delayOrder},...
            'EMLFlag_RunLoopUnrolling',false);
        end
    case hdldelaytypeenum.DelayResettable
        if hwSemantics
            cgirComp=hN.addComponent2(...
            'kind','cgireml',...
            'Name',compName,...
            'InputSignals',hSignalsIn,...
            'OutputSignals',hSignalsOut,...
            'ExternalSynchronousResetSignal',hRstSignal,...
            'EMLFileName','hdleml_tapdelay',...
            'EMLParams',{delayNumber,initVal,includeCurrent,delayOrder},...
            'EMLFlag_RunLoopUnrolling',false);
        else
            cgirComp=hN.addComponent2(...
            'kind','cgireml',...
            'Name',compName,...
            'InputSignals',[hSignalsIn,hRstSignal],...
            'OutputSignals',hSignalsOut,...
            'ExternalSynchronousResetSignal',hRstSignal,...
            'EMLFileName','hdleml_tapdelay_resettable_classic',...
            'EMLParams',{delayNumber,initVal,includeCurrent,delayOrder},...
            'EMLFlag_RunLoopUnrolling',false);
        end
    end
    if targetmapping.isValidDataType(hSignalsIn(1).Type)
        cgirComp.setSupportTargetCodGenWithoutMapping(true);
    end

    cgirComp.resetNone(resettype);
end


