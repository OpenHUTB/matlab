classdef MIGZCU102<soc.xilcomp.MIGBase

    properties
    end

    methods
        function obj=MIGZCU102(varargin)

            obj.Configuration={...
            'memPL_addr','0x00000000',...
            'memPL_range','0',...
            'mm_dw','32',...
            };

            if nargin>0
                obj.Configuration=varargin;
            end


            obj.addClk('ddr4_0/C0_SYS_CLK','InputClk')
            obj.addRst('ddr4_0/sys_rst','InputRst');


            obj.ClkOutput.source='ddr4_0/c0_ddr4_ui_clk';
            obj.ClkOutput.freq='300';
            obj.RstnOutput.source='mig_sys_reset/peripheral_aresetn';


            obj.addAXI4Slave('ddr4_0/C0_DDR4_S_AXI','memPL','memPL',obj.Configuration.memPL_addr,obj.Configuration.memPL_range);


            obj.Instance=[...
            'create_bd_intf_port -mode Slave -vlnv xilinx.com:interface:diff_clock_rtl:1.0 C0_SYS_CLK\n',...
            'set_property CONFIG.FREQ_HZ 300000000 [get_bd_intf_ports C0_SYS_CLK]\n',...
            'create_bd_port -dir I -type rst   sys_rst\n',...
            'set_property CONFIG.POLARITY ACTIVE_HIGH [get_bd_ports sys_rst]\n',...
            '# Create interface ports\n',...
            'set C0_DDR4 [ create_bd_intf_port -mode Master -vlnv xilinx.com:interface:ddr4_rtl:1.0 C0_DDR4 ]\n',...
            '# Create instance: ddr4_0, and set properties\n',...
            'set ddr4_0 [ create_bd_cell -type ip -vlnv xilinx.com:ip:ddr4:2.2 ddr4_0 ]\n',...
            'set_property -dict [ list CONFIG.C0.BANK_GROUP_WIDTH {1} CONFIG.C0.DDR4_AxiAddressWidth {29} CONFIG.C0.DDR4_AxiDataWidth {128} CONFIG.C0.DDR4_AxiArbitrationScheme {ROUND_ROBIN} CONFIG.C0.DDR4_DataWidth {16} CONFIG.C0.DDR4_CLKOUT0_DIVIDE {5} CONFIG.C0.DDR4_CasWriteLatency {12} CONFIG.C0.DDR4_InputClockPeriod {3332} CONFIG.C0.DDR4_MemoryPart {MT40A256M16GE-075E} CONFIG.C0.DDR4_Specify_MandD {false} CONFIG.C0.DDR4_TimePeriod {833}  ] $ddr4_0\n',...
            '# Create instance: mig_sys_reset, and set properties\n',...
            'set mig_sys_reset [ create_bd_cell -type ip -vlnv xilinx.com:ip:proc_sys_reset:5.0 mig_sys_reset ]\n',...
            '# Create interface connections\n',...
            'connect_bd_intf_net -intf_net C0_SYS_CLK_1 [get_bd_intf_ports C0_SYS_CLK] [get_bd_intf_pins ddr4_0/C0_SYS_CLK]\n',...
            'connect_bd_intf_net -intf_net ddr4_0_C0_DDR4 [get_bd_intf_ports C0_DDR4] [get_bd_intf_pins ddr4_0/C0_DDR4]\n',...
            '# Create port connections\n',...
            'connect_bd_net -net mig_sys_reset_peripheral_aresetn [get_bd_pins ddr4_0/c0_ddr4_aresetn] [get_bd_pins mig_sys_reset/peripheral_aresetn]\n',...
            'connect_bd_net -net ddr4_0_c0_ddr4_ui_clk [get_bd_pins ddr4_0/c0_ddr4_ui_clk] [get_bd_pins mig_sys_reset/slowest_sync_clk]\n',...
            'connect_bd_net -net ddr4_0_c0_ddr4_ui_clk_sync_rst [get_bd_pins ddr4_0/c0_ddr4_ui_clk_sync_rst] [get_bd_pins mig_sys_reset/ext_reset_in]\n',...
            '# Create address segments\n',...
            ];
            obj.Constraint=[...
            "set_property IOSTANDARD DIFF_SSTL12_DCI [get_ports {C0_DDR4_ck_t[0]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[8]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[9]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[10]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[11]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[12]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[15]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[14]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[13]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[7]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[6]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[5]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[4]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[3]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[2]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[1]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dq[0]}]",...
            "set_property IOSTANDARD DIFF_POD12_DCI [get_ports {C0_DDR4_dqs_t[1]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dm_n[1]}]",...
            "set_property IOSTANDARD LVCMOS18 [get_ports C0_DDR4_reset_n]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[12]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_cs_n[0]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[16]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[15]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[14]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[13]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[11]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[10]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[9]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[8]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[7]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[6]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[5]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[4]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[3]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[2]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[1]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_adr[0]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_ba[1]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_ba[0]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_bg[0]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_cke[0]}]",...
            "set_property IOSTANDARD POD12_DCI [get_ports {C0_DDR4_dm_n[0]}]",...
            "set_property IOSTANDARD DIFF_POD12_DCI [get_ports {C0_DDR4_dqs_t[0]}]",...
            "set_property IOSTANDARD SSTL12_DCI [get_ports {C0_DDR4_odt[0]}]",...
            "set_property PACKAGE_PIN AM8 [get_ports {C0_DDR4_adr[0]}]",...
            "set_property PACKAGE_PIN AM9 [get_ports {C0_DDR4_adr[1]}]",...
            "set_property PACKAGE_PIN AP8 [get_ports {C0_DDR4_adr[2]}]",...
            "set_property PACKAGE_PIN AN8 [get_ports {C0_DDR4_adr[3]}]",...
            "set_property PACKAGE_PIN AJ10 [get_ports {C0_DDR4_adr[5]}]",...
            "set_property PACKAGE_PIN AP9 [get_ports {C0_DDR4_adr[6]}]",...
            "set_property PACKAGE_PIN AN9 [get_ports {C0_DDR4_adr[7]}]",...
            "set_property PACKAGE_PIN AP10 [get_ports {C0_DDR4_adr[8]}]",...
            "set_property PACKAGE_PIN AP11 [get_ports {C0_DDR4_adr[9]}]",...
            "set_property PACKAGE_PIN AM10 [get_ports {C0_DDR4_adr[10]}]",...
            "set_property PACKAGE_PIN AL10 [get_ports {C0_DDR4_adr[11]}]",...
            "set_property PACKAGE_PIN AM11 [get_ports {C0_DDR4_adr[12]}]",...
            "set_property PACKAGE_PIN AL11 [get_ports {C0_DDR4_adr[13]}]",...
            "set_property PACKAGE_PIN AJ7 [get_ports {C0_DDR4_adr[14]}]",...
            "set_property PACKAGE_PIN AL5 [get_ports {C0_DDR4_adr[15]}]",...
            "set_property PACKAGE_PIN AJ9 [get_ports {C0_DDR4_adr[16]}]",...
            "set_property PACKAGE_PIN AK10 [get_ports {C0_DDR4_adr[4]}]",...
            "set_property PACKAGE_PIN AK12 [get_ports {C0_DDR4_ba[0]}]",...
            "set_property PACKAGE_PIN AJ12 [get_ports {C0_DDR4_ba[1]}]",...
            "set_property PACKAGE_PIN AK7 [get_ports {C0_DDR4_bg[0]}]",...
            "set_property PACKAGE_PIN AN7 [get_ports {C0_DDR4_ck_t[0]}]",...
            "set_property PACKAGE_PIN AM3 [get_ports {C0_DDR4_cke[0]}]",...
            "set_property PACKAGE_PIN AP2 [get_ports {C0_DDR4_cs_n[0]}]",...
            "set_property PACKAGE_PIN AL6 [get_ports {C0_DDR4_dm_n[0]}]",...
            "set_property PACKAGE_PIN AK4 [get_ports {C0_DDR4_dq[0]}]",...
            "set_property PACKAGE_PIN AK5 [get_ports {C0_DDR4_dq[1]}]",...
            "set_property PACKAGE_PIN AN4 [get_ports {C0_DDR4_dq[2]}]",...
            "set_property PACKAGE_PIN AM4 [get_ports {C0_DDR4_dq[3]}]",...
            "set_property PACKAGE_PIN AP4 [get_ports {C0_DDR4_dq[4]}]",...
            "set_property PACKAGE_PIN AP5 [get_ports {C0_DDR4_dq[5]}]",...
            "set_property PACKAGE_PIN AM5 [get_ports {C0_DDR4_dq[6]}]",...
            "set_property PACKAGE_PIN AM6 [get_ports {C0_DDR4_dq[7]}]",...
            "set_property PACKAGE_PIN AK2 [get_ports {C0_DDR4_dq[8]}]",...
            "set_property PACKAGE_PIN AK3 [get_ports {C0_DDR4_dq[9]}]",...
            "set_property PACKAGE_PIN AL1 [get_ports {C0_DDR4_dq[10]}]",...
            "set_property PACKAGE_PIN AK1 [get_ports {C0_DDR4_dq[11]}]",...
            "set_property PACKAGE_PIN AN1 [get_ports {C0_DDR4_dq[12]}]",...
            "set_property PACKAGE_PIN AM1 [get_ports {C0_DDR4_dq[13]}]",...
            "set_property PACKAGE_PIN AP3 [get_ports {C0_DDR4_dq[14]}]",...
            "set_property PACKAGE_PIN AN3 [get_ports {C0_DDR4_dq[15]}]",...
            "set_property PACKAGE_PIN AN2 [get_ports {C0_DDR4_dm_n[1]}]",...
            "set_property PACKAGE_PIN AL3 [get_ports {C0_DDR4_dqs_t[1]}]",...
            "set_property PACKAGE_PIN AN6 [get_ports {C0_DDR4_dqs_t[0]}]",...
            "set_property PACKAGE_PIN AK9 [get_ports {C0_DDR4_odt[0]}]",...
            "set_property PACKAGE_PIN AK8 [get_ports C0_DDR4_act_n]",...
            "set_property PACKAGE_PIN AH9 [get_ports C0_DDR4_reset_n]",...
            "set_property C_CLK_INPUT_FREQ_HZ 300000000 [get_debug_cores dbg_hub]",...
            "set_property C_ENABLE_CLK_DIVIDER false [get_debug_cores dbg_hub]",...
            "set_property C_USER_SCAN_CHAIN 1 [get_debug_cores dbg_hub]",...
            "connect_debug_port dbg_hub/clk [get_nets clk]",...
            ];
        end
    end
end