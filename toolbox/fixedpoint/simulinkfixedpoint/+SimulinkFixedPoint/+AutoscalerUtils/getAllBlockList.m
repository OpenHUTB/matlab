function[activeBlockList,inactiveBlockList]=getAllBlockList(bd)






    modelName=bd.getFullName;


    allBlockPaths=find_system(modelName,...
    'MatchFilter',@Simulink.match.allVariants,...
    'IncludeCommented','on',...
    'SearchDepth',inf,...
    'LookUnderMasks','all',...
    'FollowLinks','on');
    allSFPaths=find_system(modelName,...
    'MatchFilter',@Simulink.match.allVariants,...
    'IncludeCommented','on',...
    'SearchDepth',inf,...
    'LookUnderMasks','all',...
    'FollowLinks','on',...
    'MaskType','Stateflow');

    allBlockList=SimulinkFixedPoint.AutoscalerUtils.getFilteredBlockObjList(allBlockPaths,allSFPaths);


    if Simulink.internal.useFindSystemVariantsMatchFilter()


        activeBlockPaths=find_system(modelName,...
        'MatchFilter',@Simulink.match.activeVariants,...
        'IncludeCommented','off',...
        'SearchDepth',inf,...
        'LookUnderMasks','all',...
        'FollowLinks','on');
        activeSFPaths=find_system(modelName,...
        'MatchFilter',@Simulink.match.activeVariants,...
        'IncludeCommented','off',...
        'SearchDepth',inf,...
        'LookUnderMasks','all',...
        'FollowLinks','on',...
        'MaskType','Stateflow');
    else
        activeBlockPaths=find_system(modelName,...
        'Variants','ActiveVariants',...
        'IncludeCommented','off',...
        'SearchDepth',inf,...
        'LookUnderMasks','all',...
        'FollowLinks','on',...
        'CompiledIsActive','on');
        activeSFPaths=find_system(modelName,...
        'MatchFilter',@Simulink.match.allVariants,...
        'IncludeCommented','off',...
        'SearchDepth',inf,...
        'LookUnderMasks','all',...
        'FollowLinks','on',...
        'CompiledIsActive','on',...
        'MaskType','Stateflow');
    end


    activeBlockList=[];
    inactiveBlockList=[];
    if~isempty(activeBlockPaths)
        activeBlockList=SimulinkFixedPoint.AutoscalerUtils.getFilteredBlockObjList(activeBlockPaths,activeSFPaths);



        inactiveBlockList=setdiff(allBlockList,activeBlockList);
    end
end


