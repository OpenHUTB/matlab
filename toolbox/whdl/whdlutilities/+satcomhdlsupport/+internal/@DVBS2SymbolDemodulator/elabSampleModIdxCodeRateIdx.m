function sampleModCodeRateIdxNet=elabSampleModIdxCodeRateIdx(~,topNet,blockInfo,datarate)



    inDataRateModCod(1)=datarate;
    inDataRateModCod(2)=datarate;
    inDataRateModCod(3)=datarate;

    inportNamesModCod={'startSample','modIdx','codeRateIdx'};
    outportNamesModCod={'modIdxSampled','codeRateIdxSampled'};

    inTypesModCod(1)=pir_ufixpt_t(1,0);
    inTypesModCod(2)=pir_ufixpt_t(3,0);
    inTypesModCod(3)=pir_ufixpt_t(4,0);

    outTypesModCod(1)=pir_ufixpt_t(3,0);
    outTypesModCod(2)=pir_ufixpt_t(3,0);

    sampleModCodeRateIdxNet=pirelab.createNewNetwork(...
    'Network',topNet,...
    'Name','sampleModCodeRateIdxNet',...
    'InportNames',inportNamesModCod,...
    'InportTypes',inTypesModCod,...
    'InportRates',inDataRateModCod,...
    'OutportNames',outportNamesModCod,...
    'OutportTypes',outTypesModCod...
    );

    startSample=sampleModCodeRateIdxNet.PirInputSignals(1);
    modIdx=sampleModCodeRateIdxNet.PirInputSignals(2);
    codeRateIdx=sampleModCodeRateIdxNet.PirInputSignals(3);
    modIdxSampled=sampleModCodeRateIdxNet.PirOutputSignals(1);
    codeRateIdxSampled=sampleModCodeRateIdxNet.PirOutputSignals(2);

    desc='sample modulation index and code rate';

    fid=fopen(fullfile(matlabroot,'toolbox','whdl','whdlutilities',...
    '+satcomhdlsupport','+internal','@DVBS2SymbolDemodulator','cgireml',...
    'sampleModCod.m'),'r');

    fcnBody=fread(fid,Inf,'char=>char');
    fclose(fid);

    inports=[startSample,modIdx,codeRateIdx];
    outports=[modIdxSampled,codeRateIdxSampled];

    sampleModCodRate=sampleModCodeRateIdxNet.addComponent2(...
    'kind','cgireml',...
    'Name','sampleModCod',...
    'InputSignals',inports,...
    'OutputSignals',outports,...
    'EMLFileName','sampleModCod',...
    'EMLFileBody',fcnBody,...
    'BlockComment',desc...
    );
    sampleModCodRate.runConcurrencyMaximizer(0);

end
