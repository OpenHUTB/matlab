function endInNet=elaborateEndIn(~,topNet,blockInfo,dataRate)





    ufix1Type=pir_ufixpt_t(1,0);

    inPortNames={'endin'};

    inPortRates=dataRate*ones(1,length(inPortNames));

    inPortTypes=ufix1Type;

    outPortNames={'out'};

    outPortTypes=ufix1Type;

    endInNet=pirelab.createNewNetwork(...
    'Network',topNet,...
    'Name','endInNet',...
    'InportNames',inPortNames,...
    'InportTypes',inPortTypes,...
    'InportRates',inPortRates,...
    'OutportNames',outPortNames,...
    'OutportTypes',outPortTypes...
    );

    desc='endIn_Delayer';

    fid=fopen(fullfile(matlabroot,'toolbox','whdl','whdlutilities',...
    '+ltehdlsupport','+internal','@CRCDecoder','cgireml','endin_delayer.m'),'r');
    fcnBody=fread(fid,Inf,'char=>char');
    fclose(fid);

    input=endInNet.PirInputSignals(1);

    outports=endInNet.PirOutputSignals;
    inports=input;

    depth=round(blockInfo.CRClen/blockInfo.dlen);

    endInDelayerComp=endInNet.addComponent2(...
    'kind','cgireml',...
    'Name','endInDelayerComp',...
    'InputSignals',inports,...
    'OutputSignals',outports,...
    'EMLFileName','endin_delayer',...
    'EMLFileBody',fcnBody,...
    'EMLParams',{depth},...
    'EMLFlag_TreatInputIntsAsFixpt',true,...
    'EMLFlag_SaturateOnIntOverflow',false,...
    'BlockComment',desc);
    endInDelayerComp.runConcurrencyMaximizer(0);
end