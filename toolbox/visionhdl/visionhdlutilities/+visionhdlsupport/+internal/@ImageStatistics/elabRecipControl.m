function recipControlNet=elabRecipControl(~,topNet,~,sigInfo,dataRate)






    booleanT=pir_boolean_t();
    accCountT=sigInfo.accCountT;
    pipeCountT=sigInfo.pipeCountT;
    selT=sigInfo.selT;


    inPortNames={'vEnd','vEndD','lvlOneCount',...
    'lvlTwoCount','lvlThreeCount','lvlFourCount','pipeCount','vStart'};

    inPortRates=[dataRate,dataRate,dataRate,dataRate,dataRate,dataRate,dataRate,dataRate];

    inPortTypes=[booleanT,booleanT,accCountT,accCountT,accCountT,accCountT,pipeCountT,booleanT];

    outPortNames={'lvlTwoEn','lvlThreeEn','lvlFourEn','SEL','outEn',...
    'pipeRst','pipeEn','endFL','normFlag','countReset'};

    outPortTypes=[booleanT,booleanT,booleanT,selT,booleanT,...
    booleanT,booleanT,booleanT,booleanT,booleanT];

    recipControlNet=pirelab.createNewNetwork(...
    'Network',topNet,...
    'Name','dataWriteFSM',...
    'InportNames',inPortNames,...
    'InportTypes',inPortTypes,...
    'InportRates',inPortRates,...
    'OutportNames',outPortNames,...
    'OutportTypes',outPortTypes...
    );

    compName='recipController';
    desc='dataWriteFSM';

    cgiremldir=fullfile(matlabroot,'toolbox','visionhdl','visionhdlutilities',...
    '+visionhdlsupport','+internal','@ImageStatistics','cgireml');
    fid=fopen(fullfile(cgiremldir,[compName,'.m']));
    fcnBody=fread(fid,Inf,'char=>char');
    fclose(fid);

    FSMInput=recipControlNet.PirInputSignals;
    FSMOutput=recipControlNet.PirOutputSignals;

    recipController=recipControlNet.addComponent2(...
    'kind','cgireml',...
    'Name','statsFSM',...
    'InputSignals',FSMInput,...
    'OutputSignals',FSMOutput,...
    'EMLFileName','recipController',...
    'EMLFileBody',fcnBody,...
    'EMLFlag_TreatInputIntsAsFixpt',true,...
    'EMLFlag_SaturateOnIntOverflow',false,...
    'BlockComment',desc);%#ok


